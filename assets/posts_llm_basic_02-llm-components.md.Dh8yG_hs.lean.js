import{_ as s,c as a,o as l,ah as e,j as Q,a as T}from"./chunks/framework.CvbyeFFO.js";const F0=JSON.parse('{"title":"语言模型重要组件","description":"","frontmatter":{"title":"语言模型重要组件","date":"2025-07-03T16:48:14.000Z","create":"2025-07-03T16:48:14.000Z","categories":["llm"],"tags":["Attention","MHA","MQA","GQA","Flash Attention","Batch Norm","Layer Norm","RMS Norm","RoPE","GeLU","TopK","TopP","Temperature"]},"headers":[],"relativePath":"posts/llm/basic/02-llm-components.md","filePath":"posts/llm/basic/02-llm-components.md","lastUpdated":1761231250000}'),m={name:"posts/llm/basic/02-llm-components.md"},o={class:"custom-block important"},d={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.64ex",height:"2.484ex",role:"img",focusable:"false",viewBox:"0 -903.7 8238.7 1097.7","aria-hidden":"true"},r={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},i={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-5.786ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.132ex",height:"12.703ex",role:"img",focusable:"false",viewBox:"0 -3057.5 13760.4 5614.9","aria-hidden":"true"},h={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.85ex",height:"2.029ex",role:"img",focusable:"false",viewBox:"0 -703 6121.9 897","aria-hidden":"true"},p={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.089ex",height:"1.38ex",role:"img",focusable:"false",viewBox:"0 -452 923.3 609.8","aria-hidden":"true"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.8ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.007ex",height:"2.39ex",role:"img",focusable:"false",viewBox:"0 -703 6191.3 1056.5","aria-hidden":"true"},c={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},w={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.692ex",height:"2.569ex",role:"img",focusable:"false",viewBox:"0 -885.3 14449.8 1135.3","aria-hidden":"true"},x={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.51ex",height:"1.697ex",role:"img",focusable:"false",viewBox:"0 -710.2 4645.2 750.2","aria-hidden":"true"},y={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.148ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.894ex",height:"5.428ex",role:"img",focusable:"false",viewBox:"0 -1449.5 7909 2399","aria-hidden":"true"},V={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.466ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.026ex",height:"2.036ex",role:"img",focusable:"false",viewBox:"0 -694 2663.7 900","aria-hidden":"true"},Z={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.466ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.609ex",height:"2.036ex",role:"img",focusable:"false",viewBox:"0 -694 5131.2 900","aria-hidden":"true"},v={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.962ex"},xmlns:"http://www.w3.org/2000/svg",width:"23.978ex",height:"7.056ex",role:"img",focusable:"false",viewBox:"0 -1809.3 10598.3 3118.6","aria-hidden":"true"},_={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.577ex"},xmlns:"http://www.w3.org/2000/svg",width:"60.555ex",height:"4.676ex",role:"img",focusable:"false",viewBox:"0 -1370 26765.4 2067","aria-hidden":"true"},A={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.481ex",height:"1.136ex",role:"img",focusable:"false",viewBox:"0 -491 2422.4 502","aria-hidden":"true"},S={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.002ex",height:"2.456ex",role:"img",focusable:"false",viewBox:"0 -835.3 4862.7 1085.3","aria-hidden":"true"},R={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.345ex",height:"1.912ex",role:"img",focusable:"false",viewBox:"0 -833.9 1036.6 844.9","aria-hidden":"true"},P={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.963ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 22967.6 1234.8","aria-hidden":"true"},I={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},N={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.296ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 8970.7 1234.8","aria-hidden":"true"},z={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.651ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 12221.6 1234.8","aria-hidden":"true"},G={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},J={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.148ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.223ex",height:"5.428ex",role:"img",focusable:"false",viewBox:"0 -1449.5 15126.7 2399","aria-hidden":"true"},q={class:"custom-block important"},K={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.045ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.268ex",height:"6.048ex",role:"img",focusable:"false",viewBox:"0 -885.3 15146.6 2673.2","aria-hidden":"true"},W={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.934ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 10137 1083.9","aria-hidden":"true"},$={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.909ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5705.9 1000","aria-hidden":"true"},Q1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.909ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5705.9 1000","aria-hidden":"true"},T1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.807ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 11848.7 1083.9","aria-hidden":"true"},l1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.345ex",height:"1.912ex",role:"img",focusable:"false",viewBox:"0 -833.9 1036.6 844.9","aria-hidden":"true"},s1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.753ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 10057 1083.9","aria-hidden":"true"},o1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.728ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5625.9 1000","aria-hidden":"true"},n1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.728ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5625.9 1000","aria-hidden":"true"},i1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.807ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 11848.7 1083.9","aria-hidden":"true"},g1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.164ex",height:"1.909ex",role:"img",focusable:"false",viewBox:"0 -833.9 956.6 843.9","aria-hidden":"true"},H1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.784ex",height:"2.329ex",role:"img",focusable:"false",viewBox:"0 -835.3 2556.7 1029.3","aria-hidden":"true"},L1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},c1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.693ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.41ex",height:"5.696ex",role:"img",focusable:"false",viewBox:"0 -885.3 10789.2 2517.7","aria-hidden":"true"},w1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.038ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.731ex",height:"1.59ex",role:"img",focusable:"false",viewBox:"0 -686 1207 703","aria-hidden":"true"},f1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.481ex",height:"1.136ex",role:"img",focusable:"false",viewBox:"0 -491 2422.4 502","aria-hidden":"true"},k1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.979ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1758.9 977.2","aria-hidden":"true"},M1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.706ex",height:"2.029ex",role:"img",focusable:"false",viewBox:"0 -703 1196 897","aria-hidden":"true"},b1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.073ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 2242.4 704","aria-hidden":"true"},D1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.97ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.818ex",height:"2.86ex",role:"img",focusable:"false",viewBox:"0 -835.3 1687.7 1264","aria-hidden":"true"},j1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.073ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 2242.4 704","aria-hidden":"true"},C1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},S1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.864ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.043ex",height:"6.802ex",role:"img",focusable:"false",viewBox:"0 -1740.7 13721.1 3006.4","aria-hidden":"true"},E1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.034ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1783 1000","aria-hidden":"true"},O1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},B1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.073ex",height:"1.756ex",role:"img",focusable:"false",viewBox:"0 -694 2242.4 776","aria-hidden":"true"},N1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.345ex",height:"1.912ex",role:"img",focusable:"false",viewBox:"0 -833.9 1036.6 844.9","aria-hidden":"true"},X1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},J1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.036ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.823ex",height:"1.926ex",role:"img",focusable:"false",viewBox:"0 -835.3 2573.7 851.3","aria-hidden":"true"},K1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},F1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.29ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.154ex",height:"5.335ex",role:"img",focusable:"false",viewBox:"0 -903.7 10676.1 2358.1","aria-hidden":"true"},W1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.038ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.731ex",height:"1.59ex",role:"img",focusable:"false",viewBox:"0 -686 1207 703","aria-hidden":"true"},$1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.119ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 2262.4 704","aria-hidden":"true"},Q2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.979ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1758.9 977.2","aria-hidden":"true"},T2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.661ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.818ex",height:"2.551ex",role:"img",focusable:"false",viewBox:"0 -835.3 1687.7 1127.5","aria-hidden":"true"},l2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.254ex",height:"1.532ex",role:"img",focusable:"false",viewBox:"0 -666 2322.4 677","aria-hidden":"true"},s2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.381ex",height:"2.218ex",role:"img",focusable:"false",viewBox:"0 -686 1052.3 980.2","aria-hidden":"true"},o2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.254ex",height:"1.532ex",role:"img",focusable:"false",viewBox:"0 -666 2322.4 677","aria-hidden":"true"},n2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},r2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.864ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.179ex",height:"6.399ex",role:"img",focusable:"false",viewBox:"0 -1562.5 13339.1 2828.3","aria-hidden":"true"},i2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.215ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1863 1000","aria-hidden":"true"},g2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.357ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 600 453","aria-hidden":"true"},H2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.254ex",height:"1.692ex",role:"img",focusable:"false",viewBox:"0 -666 2322.4 748","aria-hidden":"true"},L2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.164ex",height:"1.909ex",role:"img",focusable:"false",viewBox:"0 -833.9 956.6 843.9","aria-hidden":"true"},w2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},f2={class:"custom-block caution"},y2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.503ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6852.4 1000","aria-hidden":"true"},V2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.589ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 4238.3 636","aria-hidden":"true"},Z2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},b2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.308ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.234ex",height:"5.727ex",role:"img",focusable:"false",viewBox:"0 -1511.3 18225.5 2531.3","aria-hidden":"true"},v2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},D2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.372ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.128ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -895.6 1824.4 1060","aria-hidden":"true"},_2={class:"custom-block warning"},j2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.198ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 971.4 851.8","aria-hidden":"true"},C2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.646ex",height:"2.347ex",role:"img",focusable:"false",viewBox:"0 -750 7799.4 1037.2","aria-hidden":"true"},E2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.768ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6527.3 1000","aria-hidden":"true"},O2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"52.545ex",height:"3.108ex",role:"img",focusable:"false",viewBox:"0 -1086 23224.8 1373.9","aria-hidden":"true"},B2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},I2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-7.647ex"},xmlns:"http://www.w3.org/2000/svg",width:"62.627ex",height:"16.425ex",role:"img",focusable:"false",viewBox:"0 -3879.9 27681.3 7259.9","aria-hidden":"true"},N2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.293ex",height:"3.108ex",role:"img",focusable:"false",viewBox:"0 -1086 12505.4 1373.9","aria-hidden":"true"},X2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.345ex",height:"3.108ex",role:"img",focusable:"false",viewBox:"0 -1086 18274.7 1373.9","aria-hidden":"true"},J2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},q2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-16.508ex"},xmlns:"http://www.w3.org/2000/svg",width:"81.565ex",height:"34.147ex",role:"img",focusable:"false",viewBox:"0 -7796.4 36051.9 15092.9","aria-hidden":"true"},K2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.293ex",height:"2.556ex",role:"img",focusable:"false",viewBox:"0 -841.7 12505.4 1129.6","aria-hidden":"true"},W2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.345ex",height:"2.556ex",role:"img",focusable:"false",viewBox:"0 -841.7 18274.7 1129.6","aria-hidden":"true"},$2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.685ex"},xmlns:"http://www.w3.org/2000/svg",width:"54.398ex",height:"2.589ex",role:"img",focusable:"false",viewBox:"0 -841.7 24044.1 1144.5","aria-hidden":"true"},Q3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.811ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 1242.4 898","aria-hidden":"true"},T3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.811ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 1242.4 898","aria-hidden":"true"},l3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.725ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 2530.6 877","aria-hidden":"true"},s3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.315ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 1023.4 599.8","aria-hidden":"true"},o3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.471ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.36ex",height:"1.471ex",role:"img",focusable:"false",viewBox:"0 -442 1927.1 650","aria-hidden":"true"},n3={class:"custom-block danger"},r3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.435ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 2402.4 898","aria-hidden":"true"},h3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.023ex",height:"1.505ex",role:"img",focusable:"false",viewBox:"0 -583 1778 665","aria-hidden":"true"},p3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},u3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.804ex",height:"1.74ex",role:"img",focusable:"false",viewBox:"0 -759 797.5 769","aria-hidden":"true"},c3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"36.517ex",height:"2.731ex",role:"img",focusable:"false",viewBox:"0 -957 16140.7 1207","aria-hidden":"true"},x3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.225ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 1425.7 888","aria-hidden":"true"},y3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.854ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 1703.4 888","aria-hidden":"true"},V3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},Z3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},b3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.44ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 11686.7 1000","aria-hidden":"true"},v3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.997ex",height:"2.565ex",role:"img",focusable:"false",viewBox:"0 -883.9 21214.8 1133.9","aria-hidden":"true"},_3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.372ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.128ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -895.6 1824.4 1060","aria-hidden":"true"},A3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.801ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 1680 898","aria-hidden":"true"},S3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.811ex",height:"1.956ex",role:"img",focusable:"false",viewBox:"0 -853.7 1242.7 864.7","aria-hidden":"true"},R3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.615ex",height:"2.938ex",role:"img",focusable:"false",viewBox:"0 -1048.5 5575.6 1298.5","aria-hidden":"true"},P3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.372ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.128ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -895.6 1824.4 1060","aria-hidden":"true"},I3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.593ex",height:"2.451ex",role:"img",focusable:"false",viewBox:"0 -833.2 3355.9 1083.2","aria-hidden":"true"},z3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.854ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 1703.4 888","aria-hidden":"true"},G3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.205ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.106ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -969.5 1373 1060","aria-hidden":"true"},q3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},K3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"56.983ex",height:"5.768ex",role:"img",focusable:"false",viewBox:"0 -1370 25186.3 2549.5","aria-hidden":"true"},F3={class:"custom-block tip"},W3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},$3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},Q4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},t4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.045ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.771ex",height:"6.048ex",role:"img",focusable:"false",viewBox:"0 -885.3 14926.6 2673.2","aria-hidden":"true"},T4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},a4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.412ex"},xmlns:"http://www.w3.org/2000/svg",width:"58.968ex",height:"8.241ex",role:"img",focusable:"false",viewBox:"0 -1692.6 26063.9 3642.7","aria-hidden":"true"},l4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},e4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.885ex"},xmlns:"http://www.w3.org/2000/svg",width:"76.403ex",height:"2.93ex",role:"img",focusable:"false",viewBox:"0 -903.7 33770.3 1295","aria-hidden":"true"},s4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.333ex",height:"1.947ex",role:"img",focusable:"false",viewBox:"0 -703 1031.3 860.8","aria-hidden":"true"},o4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.333ex",height:"1.947ex",role:"img",focusable:"false",viewBox:"0 -703 1031.3 860.8","aria-hidden":"true"},n4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},r4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.302ex",height:"2.579ex",role:"img",focusable:"false",viewBox:"0 -885.3 14277.6 1140.1","aria-hidden":"true"},i4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.014ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.923ex",height:"6.844ex",role:"img",focusable:"false",viewBox:"0 -1692.6 6153.9 3024.8","aria-hidden":"true"},g4={class:"custom-block tip"},p4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.829ex",height:"2.288ex",role:"img",focusable:"false",viewBox:"0 -853.7 4344.3 1011.5","aria-hidden":"true"},u4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.489ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.229ex",height:"1.486ex",role:"img",focusable:"false",viewBox:"0 -441 543 657","aria-hidden":"true"},c4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},w4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"35.165ex",height:"2.579ex",role:"img",focusable:"false",viewBox:"0 -885.3 15543.1 1140.1","aria-hidden":"true"},x4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.489ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.229ex",height:"1.486ex",role:"img",focusable:"false",viewBox:"0 -441 543 657","aria-hidden":"true"},y4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.805ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1682 1000","aria-hidden":"true"},V4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"37.742ex",height:"2.579ex",role:"img",focusable:"false",viewBox:"0 -885.3 16682.1 1140.1","aria-hidden":"true"},Z4={class:"custom-block tip"},b4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.373ex",height:"1.991ex",role:"img",focusable:"false",viewBox:"0 -686 2374.7 880","aria-hidden":"true"},D4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.351ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.42ex",height:"1.941ex",role:"img",focusable:"false",viewBox:"0 -703 1069.4 857.9","aria-hidden":"true"},j4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},A4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.775ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 12276.4 1000","aria-hidden":"true"},C4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},S4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.609ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6015 1000","aria-hidden":"true"},E4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.624ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 10000 950","aria-hidden":"true"},O4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.1ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 8000 950","aria-hidden":"true"},B4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},I4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.138ex",height:"2.713ex",role:"img",focusable:"false",viewBox:"0 -849.5 22602.9 1199","aria-hidden":"true"},N4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.244ex",height:"2.059ex",role:"img",focusable:"false",viewBox:"0 -705 550 910","aria-hidden":"true"},X4={class:"custom-block important"},G4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.68ex",height:"1.553ex",role:"img",focusable:"false",viewBox:"0 -675.5 1184.7 686.5","aria-hidden":"true"},q4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.251ex",height:"2.046ex",role:"img",focusable:"false",viewBox:"0 -893.3 4088.7 904.3","aria-hidden":"true"},F4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},W4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.251ex",height:"2.046ex",role:"img",focusable:"false",viewBox:"0 -893.3 4088.7 904.3","aria-hidden":"true"},U4={class:"custom-block important"},$4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.119ex",height:"1.887ex",role:"img",focusable:"false",viewBox:"0 -833.9 1378.8 833.9","aria-hidden":"true"},Q6={class:"custom-block tip"},t6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.489ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.229ex",height:"1.486ex",role:"img",focusable:"false",viewBox:"0 -441 543 657","aria-hidden":"true"},a6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},l6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.281ex",height:"2.034ex",role:"img",focusable:"false",viewBox:"0 -705 566 899","aria-hidden":"true"},e6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},s6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.76ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.907ex",height:"6.063ex",role:"img",focusable:"false",viewBox:"0 -1460 14987.1 2680","aria-hidden":"true"},m6={class:"custom-block tip"},o6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.448ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 640 453","aria-hidden":"true"},n6={class:"custom-block important"},r6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.883ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.521ex",height:"6.923ex",role:"img",focusable:"false",viewBox:"0 -1785.8 9512.3 3060","aria-hidden":"true"},h6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.833ex"},xmlns:"http://www.w3.org/2000/svg",width:"42.382ex",height:"9.362ex",role:"img",focusable:"false",viewBox:"0 -1118 18732.6 4138","aria-hidden":"true"},p6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},H6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.252ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.492ex",height:"8.281ex",role:"img",focusable:"false",viewBox:"0 -2222.7 9941.4 3660","aria-hidden":"true"},u6={class:"custom-block important"},L6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.315ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 1023.4 599.8","aria-hidden":"true"},w6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},x6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"46.345ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 20484.3 950","aria-hidden":"true"},f6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.671ex",height:"1.595ex",role:"img",focusable:"false",viewBox:"0 -694 2064.4 705","aria-hidden":"true"},k6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.159ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 954.4 636","aria-hidden":"true"},M6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.912ex",height:"1.532ex",role:"img",focusable:"false",viewBox:"0 -666 845 677","aria-hidden":"true"},b6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.809ex",height:"1.692ex",role:"img",focusable:"false",viewBox:"0 -666 2567.4 748","aria-hidden":"true"},D6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},_6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.039ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.676ex",height:"7.209ex",role:"img",focusable:"false",viewBox:"0 -1843.2 10022.9 3186.4","aria-hidden":"true"},j6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.385ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5474 1000","aria-hidden":"true"},C6={class:"custom-block important"},S6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},R6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.932ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 412 865","aria-hidden":"true"},P6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.242ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 4969 950","aria-hidden":"true"},I6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},N6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-8.342ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.689ex",height:"17.816ex",role:"img",focusable:"false",viewBox:"0 -4187.3 13564.6 7874.7","aria-hidden":"true"},z6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.97ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.242ex",height:"2.874ex",role:"img",focusable:"false",viewBox:"0 -841.7 1874.8 1270.4","aria-hidden":"true"},G6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},J6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-9.671ex"},xmlns:"http://www.w3.org/2000/svg",width:"64.729ex",height:"20.472ex",role:"img",focusable:"false",viewBox:"0 -4774.4 28610.2 9048.7","aria-hidden":"true"},q6={class:"custom-block tip"},K6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.985ex",height:"1.666ex",role:"img",focusable:"false",viewBox:"0 -442 877.3 736.2","aria-hidden":"true"},W6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.561ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1573.9 977.2","aria-hidden":"true"},$6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.561ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1573.9 977.2","aria-hidden":"true"},Q5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.478ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 1979.4 865","aria-hidden":"true"},T5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.308ex",height:"1.457ex",role:"img",focusable:"false",viewBox:"0 -450 2788.1 644","aria-hidden":"true"},l5={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},e5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.788ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.945ex",height:"6.708ex",role:"img",focusable:"false",viewBox:"0 -1732.4 13677.8 2964.8","aria-hidden":"true"},s5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.018ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.912ex",height:"2.919ex",role:"img",focusable:"false",viewBox:"0 -840.3 2171.3 1290.2","aria-hidden":"true"},o5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.985ex",height:"1.666ex",role:"img",focusable:"false",viewBox:"0 -442 877.3 736.2","aria-hidden":"true"},n5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.361ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1927.4 977.2","aria-hidden":"true"},i5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.878ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 830 636","aria-hidden":"true"},g5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},H5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.097ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 485 454","aria-hidden":"true"},L5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.361ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1927.4 977.2","aria-hidden":"true"},w5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.944ex",height:"1.668ex",role:"img",focusable:"false",viewBox:"0 -443 859.3 737.2","aria-hidden":"true"},f5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.554ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.283ex",height:"4.25ex",role:"img",focusable:"false",viewBox:"0 -750 7639.3 1878.6","aria-hidden":"true"},k5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.018ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.912ex",height:"2.919ex",role:"img",focusable:"false",viewBox:"0 -840.3 2171.3 1290.2","aria-hidden":"true"},M5={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Z5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.885ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.722ex",height:"2.903ex",role:"img",focusable:"false",viewBox:"0 -891.7 10927.2 1283","aria-hidden":"true"},b5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.124ex",height:"2.261ex",role:"img",focusable:"false",viewBox:"0 -705 1380.9 999.2","aria-hidden":"true"},D5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.478ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 1979.4 865","aria-hidden":"true"},j5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.478ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 1979.4 865","aria-hidden":"true"},C5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.483ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3307.4 1000","aria-hidden":"true"},E5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.97ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.242ex",height:"2.874ex",role:"img",focusable:"false",viewBox:"0 -841.7 1874.8 1270.4","aria-hidden":"true"},O5={class:"custom-block important"},P5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.041ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 460 636","aria-hidden":"true"},I5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.179ex",height:"1.595ex",role:"img",focusable:"false",viewBox:"0 -694 521 705","aria-hidden":"true"},z5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},G5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.932ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 412 865","aria-hidden":"true"},q5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.719ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 1201.7 865","aria-hidden":"true"},F5={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},W5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.259ex",height:"2.363ex",role:"img",focusable:"false",viewBox:"0 -750 12490.3 1044.2","aria-hidden":"true"},U5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$5={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.749ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 773 636","aria-hidden":"true"},Y5={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Q0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.026ex",height:"2.236ex",role:"img",focusable:"false",viewBox:"0 -694 895.3 988.2","aria-hidden":"true"},t0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.478ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 1979.4 865","aria-hidden":"true"},a0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},l0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"35.025ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 15481.1 1000","aria-hidden":"true"},e0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.038ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3110.7 1000","aria-hidden":"true"},m0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},o0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.618ex",role:"img",focusable:"false",viewBox:"0 -705 469 715","aria-hidden":"true"},d0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-5.676ex"},xmlns:"http://www.w3.org/2000/svg",width:"55.501ex",height:"8.956ex",role:"img",focusable:"false",viewBox:"0 -1450 24531.3 3958.8","aria-hidden":"true"},r0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.18ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5825.8 1000","aria-hidden":"true"},h0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.645ex",height:"2.594ex",role:"img",focusable:"false",viewBox:"0 -891.7 21059.3 1146.5","aria-hidden":"true"},p0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.89ex",height:"2.446ex",role:"img",focusable:"false",viewBox:"0 -923.4 6581.4 1081.2","aria-hidden":"true"},u0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.618ex",role:"img",focusable:"false",viewBox:"0 -705 469 715","aria-hidden":"true"},c0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.478ex",height:"1.957ex",role:"img",focusable:"false",viewBox:"0 -661 1979.4 865","aria-hidden":"true"},x0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.409ex",height:"2.236ex",role:"img",focusable:"false",viewBox:"0 -694 2390.7 988.2","aria-hidden":"true"},y0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.199ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2298 1000","aria-hidden":"true"},V0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.199ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2298 1000","aria-hidden":"true"},Z0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.618ex",role:"img",focusable:"false",viewBox:"0 -705 469 715","aria-hidden":"true"},v0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.149ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.877ex",height:"5.43ex",role:"img",focusable:"false",viewBox:"0 -1450 10995.6 2400","aria-hidden":"true"},_0={class:"custom-block tip"},j0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.233ex",height:"2.343ex",role:"img",focusable:"false",viewBox:"0 -841.7 2312.8 1035.7","aria-hidden":"true"},C0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},S0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"65.653ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 29018.7 1000","aria-hidden":"true"},E0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},R0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.827ex"},xmlns:"http://www.w3.org/2000/svg",width:"57.696ex",height:"6.785ex",role:"img",focusable:"false",viewBox:"0 -1749.5 25501.8 2999","aria-hidden":"true"},O0={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.281ex",height:"2.034ex",role:"img",focusable:"false",viewBox:"0 -705 566 899","aria-hidden":"true"},B0={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},I0={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.193ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 12461.4 1000","aria-hidden":"true"};function N0(z0,t,X0,G0,J0,q0){return l(),a("div",null,[t[844]||(t[844]=e("",6)),Q("div",o,[t[58]||(t[58]=Q("div",{class:"custom-block-title"},"标准 Softmax Attention",-1)),t[59]||(t[59]=Q("p",null,[Q("strong",null,"符号定义")],-1)),Q("mjx-container",d,[(l(),a("svg",n,t[0]||(t[0]=[e("",1)]))),t[1]||(t[1]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mi",null,"i")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"i")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"i")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"i")])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mn",null,"1")])])])])],-1))]),Q("mjx-container",r,[(l(),a("svg",i,t[2]||(t[2]=[e("",1)]))),t[3]||(t[3]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"["),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mn",null,"2")])]),Q("mo",null,","),Q("mo",null,"⋯"),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mi",null,"n")])]),Q("msup",null,[Q("mo",{stretchy:"false"},"]"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"["),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mn",null,"2")])]),Q("mo",null,","),Q("mo",null,"⋯"),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"n")])]),Q("msup",null,[Q("mo",{stretchy:"false"},"]"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"["),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mn",null,"2")])]),Q("mo",null,","),Q("mo",null,"⋯"),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"n")])]),Q("msup",null,[Q("mo",{stretchy:"false"},"]"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"["),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mn",null,"2")])]),Q("mo",null,","),Q("mo",null,"⋯"),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"n")])]),Q("msup",null,[Q("mo",{stretchy:"false"},"]"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])])])])],-1))]),t[60]||(t[60]=Q("ul",null,[Q("li",null,"Q、K的维度和V、O的维度可以不相同，参考MLA。")],-1)),t[61]||(t[61]=Q("p",null,[Q("strong",null,"核心思想")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[t[6]||(t[6]=T("注意力本质：")),Q("mjx-container",h,[(l(),a("svg",g,t[4]||(t[4]=[e("",1)]))),t[5]||(t[5]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q"),Q("mo",{mathvariant:"bold"},","),Q("mi",{mathvariant:"bold-italic"},"K"),Q("mo",{mathvariant:"bold"},","),Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",{stretchy:"false"},"→"),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"O")])])],-1))]),t[7]||(t[7]=T(" 映射。"))])]),Q("li",null,[Q("p",null,[t[12]||(t[12]=Q("strong",null,"Causal场景",-1)),t[13]||(t[13]=T("：")),Q("mjx-container",p,[(l(),a("svg",H,t[8]||(t[8]=[e("",1)]))),t[9]||(t[9]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])])])],-1))]),t[14]||(t[14]=T(" 至多和 ")),Q("mjx-container",u,[(l(),a("svg",L,t[10]||(t[10]=[e("",1)]))),t[11]||(t[11]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"Q"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{stretchy:"false"},"["),Q("mo",null,":"),Q("mi",null,"t"),Q("mo",{stretchy:"false"},"]")])]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"K"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{stretchy:"false"},"["),Q("mo",null,":"),Q("mi",null,"t"),Q("mo",{stretchy:"false"},"]")])]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"V"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{stretchy:"false"},"["),Q("mo",null,":"),Q("mi",null,"t"),Q("mo",{stretchy:"false"},"]")])])])])],-1))]),t[15]||(t[15]=T()),t[16]||(t[16]=Q("code",null,"有关",-1)),t[17]||(t[17]=T("。"))]),Q("mjx-container",c,[(l(),a("svg",w,t[18]||(t[18]=[e("",1)]))),t[19]||(t[19]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"softmax")]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q"),Q("msup",null,[Q("mi",{mathvariant:"bold-italic"},"K"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"log")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M"),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")])])],-1))])]),Q("li",null,[Q("p",null,[Q("mjx-container",x,[(l(),a("svg",f,t[20]||(t[20]=[e("",1)]))),t[21]||(t[21]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M")]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n")])])])])],-1))]),t[22]||(t[22]=T("：")),t[23]||(t[23]=Q("code",null,"掩码矩阵",-1)),t[24]||(t[24]=T("，下三角矩阵"))]),Q("mjx-container",y,[(l(),a("svg",k,t[25]||(t[25]=[e("",1)]))),t[26]||(t[26]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"M"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"{"),Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[Q("mtr",null,[Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("mn",null,"1")]),Q("mo",null,",")]),Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"i"),Q("mo",null,"≥"),Q("mi",null,"j")])])]),Q("mtr",null,[Q("mtd",null,[Q("mstyle",{mathcolor:"blue"},[Q("mn",null,"0")]),Q("mo",null,",")]),Q("mtd",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"i"),Q("mo",null,"<"),Q("mi",null,"j")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])],-1))]),Q("ul",null,[Q("li",null,[Q("mjx-container",V,[(l(),a("svg",M,t[27]||(t[27]=[e("",1)]))),t[28]||(t[28]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"log")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M")])])],-1))]),t[31]||(t[31]=T("，对M的分量")),t[32]||(t[32]=Q("code",null,"逐一取log",-1)),t[33]||(t[33]=T("，")),Q("mjx-container",Z,[(l(),a("svg",b,t[29]||(t[29]=[e("",1)]))),t[30]||(t[30]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"log")]),Q("mstyle",{mathcolor:"blue"},[Q("mn",{mathvariant:"bold"},"0")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"∞")])])],-1))])])])])]),t[62]||(t[62]=Q("p",null,[Q("strong",null,"Softmax Attention 分量形式")],-1)),t[63]||(t[63]=Q("ul",null,[Q("li",null,[T("分母："),Q("code",null,"权重和"),T("，分子每项的"),Q("code",null,"权重*值"),T("，再"),Q("code",null,"求和"),T("。除以分母：保持数值稳定性")])],-1)),Q("mjx-container",v,[(l(),a("svg",D,t[34]||(t[34]=[e("",1)]))),t[35]||(t[35]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mi",null,"t")])]),Q("mi",null,"exp"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mi",null,"t"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j")]),Q("mo",{stretchy:"false"},")")]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])])]),Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mi",null,"t")])]),Q("mi",null,"exp"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mi",null,"t"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j")]),Q("mo",{stretchy:"false"},")")])])])])],-1))]),t[64]||(t[64]=Q("ul",null,[Q("li",null,"简单示例，多项V加权求和")],-1)),Q("mjx-container",_,[(l(),a("svg",j,t[36]||(t[36]=[e("",1)]))),t[37]||(t[37]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"o"),Q("mn",null,"5")])]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"5")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"k"),Q("mn",null,"1")])])]),Q("mstyle",{mathcolor:"blue"},[Q("mtext",null,"sum")])]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"1")])]),Q("mo",null,"+"),Q("mfrac",null,[Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"5")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"k"),Q("mn",null,"2")])])]),Q("mstyle",{mathcolor:"blue"},[Q("mtext",null,"sum")])]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"2")])]),Q("mo",null,"+"),Q("mfrac",null,[Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"5")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"k"),Q("mn",null,"3")])])]),Q("mstyle",{mathcolor:"blue"},[Q("mtext",null,"sum")])]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"3")])]),Q("mo",null,"+"),Q("mfrac",null,[Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"5")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"k"),Q("mn",null,"4")])])]),Q("mstyle",{mathcolor:"blue"},[Q("mtext",null,"sum")])]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"4")])]),Q("mo",null,"+"),Q("mfrac",null,[Q("mrow",null,[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"5")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"k"),Q("mn",null,"5")])])]),Q("mstyle",{mathcolor:"blue"},[Q("mtext",null,"sum")])]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"5")])])])],-1))]),t[65]||(t[65]=Q("p",null,[Q("strong",null,"Softmax Attention 精简")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[t[44]||(t[44]=T("最核心为分子，需把 ")),Q("mjx-container",A,[(l(),a("svg",C,t[38]||(t[38]=[e("",1)]))),t[39]||(t[39]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n")])])],-1))]),t[45]||(t[45]=T("的矩阵")),Q("mjx-container",S,[(l(),a("svg",E,t[40]||(t[40]=[e("",1)]))),t[41]||(t[41]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"exp")]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",{stretchy:"false"},")")])],-1))]),t[46]||(t[46]=T("算出来，空间和时间复杂度，都正比于")),Q("mjx-container",R,[(l(),a("svg",O,t[42]||(t[42]=[e("",1)]))),t[43]||(t[43]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")])])])],-1))])]),Q("mjx-container",P,[(l(),a("svg",B,t[47]||(t[47]=[e("",1)]))),t[48]||(t[48]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"exp")]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q"),Q("msup",null,[Q("mi",{mathvariant:"bold-italic"},"K"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"log")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M"),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"exp")]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"⊙"),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")])])],-1))])]),Q("li",null,[t[51]||(t[51]=Q("p",null,[T("精简："),Q("code",null,"去掉softmax")],-1)),Q("mjx-container",I,[(l(),a("svg",N,t[49]||(t[49]=[e("",1)]))),t[50]||(t[50]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"⊙"),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")])])],-1))])]),Q("li",null,[t[54]||(t[54]=Q("p",null,[T("精简："),Q("code",null,"去掉掩码"),T("，非causal")],-1)),Q("mjx-container",z,[(l(),a("svg",X,t[52]||(t[52]=[e("",1)]))),t[53]||(t[53]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))])]),Q("li",null,[t[57]||(t[57]=Q("p",null,"增加归一化",-1)),Q("mjx-container",G,[(l(),a("svg",J,t[55]||(t[55]=[e("",1)]))),t[56]||(t[56]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("mtext",null,"RMSNorm"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"⊙"),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"M")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])])])]),t[845]||(t[845]=Q("h4",{id:"softmax和linear时间复杂度",tabindex:"-1"},[T("Softmax和Linear时间复杂度 "),Q("a",{class:"header-anchor",href:"#softmax和linear时间复杂度","aria-label":'Permalink to "Softmax和Linear时间复杂度"'},"​")],-1)),Q("div",q,[t[235]||(t[235]=Q("div",{class:"custom-block-title"},"Softmax和线性注意力时间复杂度",-1)),t[236]||(t[236]=Q("p",null,[Q("strong",null,"Softmax和线性注意力")],-1)),Q("mjx-container",K,[(l(),a("svg",F,t[66]||(t[66]=[e("",1)]))),t[67]||(t[67]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n")])])])])]),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mo",{stretchy:"false"},"⟺"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"d")])])])])])])],-1))]),Q("ul",null,[Q("li",null,[t[88]||(t[88]=T("左侧：")),t[89]||(t[89]=Q("strong",null,"传统softmax注意力",-1)),Q("ul",null,[Q("li",null,[t[79]||(t[79]=Q("strong",null,"时间复杂度",-1)),t[80]||(t[80]=T("：")),Q("mjx-container",W,[(l(),a("svg",U,t[68]||(t[68]=[e("",1)]))),t[69]||(t[69]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"d"),Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))]),Q("ul",null,[Q("li",null,[t[74]||(t[74]=T("第一步：")),Q("mjx-container",$,[(l(),a("svg",Y,t[70]||(t[70]=[e("",1)]))),t[71]||(t[71]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"n")]),Q("mo",{stretchy:"false"},")")])],-1))]),t[75]||(t[75]=T("；第二步：")),Q("mjx-container",Q1,[(l(),a("svg",t1,t[72]||(t[72]=[e("",1)]))),t[73]||(t[73]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")]),Q("mo",{stretchy:"false"},")")])],-1))])]),Q("li",null,[t[78]||(t[78]=T("综合两步：")),Q("mjx-container",T1,[(l(),a("svg",a1,t[76]||(t[76]=[e("",1)]))),t[77]||(t[77]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"d"),Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"d"),Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"d"),Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))])])])]),Q("li",null,[t[83]||(t[83]=Q("code",null,"当n很大时",-1)),t[84]||(t[84]=T("：由于 ")),Q("strong",null,[Q("mjx-container",l1,[(l(),a("svg",e1,t[81]||(t[81]=[e("",1)]))),t[82]||(t[82]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")])])],-1))])]),t[85]||(t[85]=T("，")),t[86]||(t[86]=Q("code",null,"计算成本非常高",-1))]),t[87]||(t[87]=Q("li",null,[Q("code",null,"Flash Attention"),T("降低了"),Q("code",null,"空间需求"),T("，但"),Q("code",null,"平方时间复杂度"),T("依然"),Q("code",null,"无法避免"),T("。")],-1))])]),Q("li",null,[t[111]||(t[111]=T("右侧：")),t[112]||(t[112]=Q("strong",null,"线性注意力",-1)),t[113]||(t[113]=T("。 ")),Q("ul",null,[Q("li",null,[t[101]||(t[101]=Q("strong",null,"时间复杂度",-1)),t[102]||(t[102]=T("：")),Q("mjx-container",s1,[(l(),a("svg",m1,t[90]||(t[90]=[e("",1)]))),t[91]||(t[91]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"n"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))]),Q("ul",null,[Q("li",null,[t[96]||(t[96]=T("第一步：")),Q("mjx-container",o1,[(l(),a("svg",d1,t[92]||(t[92]=[e("",1)]))),t[93]||(t[93]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")]),Q("mo",{stretchy:"false"},")")])],-1))]),t[97]||(t[97]=T("；第二步：")),Q("mjx-container",n1,[(l(),a("svg",r1,t[94]||(t[94]=[e("",1)]))),t[95]||(t[95]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")]),Q("mo",{stretchy:"false"},")")])],-1))])]),Q("li",null,[t[100]||(t[100]=T("综合两步：")),Q("mjx-container",i1,[(l(),a("svg",h1,t[98]||(t[98]=[e("",1)]))),t[99]||(t[99]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"n"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"n"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"O"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"n"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))])])])]),Q("li",null,[t[105]||(t[105]=Q("code",null,"当n很大时",-1)),t[106]||(t[106]=T("，")),Q("mjx-container",g1,[(l(),a("svg",p1,t[103]||(t[103]=[e("",1)]))),t[104]||(t[104]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")])])],-1))]),t[107]||(t[107]=T("为常数，")),t[108]||(t[108]=Q("code",null,"复杂度随n线性递增",-1)),t[109]||(t[109]=T("，")),t[110]||(t[110]=Q("code",null,"计算成本低",-1))])])]),t[114]||(t[114]=Q("li",null,[T("区别 "),Q("ul",null,[Q("li",null,[T("计算上："),Q("code",null,"仅仅是交换了计算顺序")])])],-1))]),t[237]||(t[237]=Q("p",null,[Q("strong",null,"Softmax 时间复杂度例子")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[Q("mjx-container",H1,[(l(),a("svg",u1,t[115]||(t[115]=[e("",1)]))),t[116]||(t[116]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")])])],-1))]),t[117]||(t[117]=T("矩阵乘法 (传统softmax注意力)"))]),Q("mjx-container",L1,[(l(),a("svg",c1,t[118]||(t[118]=[e("",1)]))),t[119]||(t[119]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mo",null,"×"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"n")])])])])]),Q("mo",null,"="),Q("mi",{mathvariant:"bold-italic"},"W"),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n")])])])])],-1))]),Q("ul",null,[Q("li",null,[Q("p",null,[t[127]||(t[127]=T("结果矩阵")),Q("mjx-container",w1,[(l(),a("svg",x1,t[120]||(t[120]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D47E",d:"M111 624Q109 624 102 624T91 623Q61 623 61 640Q61 660 70 678Q78 686 98 686Q140 684 239 684Q277 684 309 684T360 685T383 686H385Q407 686 407 668Q404 634 391 626Q387 624 348 624Q307 624 307 622Q307 618 332 409Q359 198 359 195L570 532L564 576L558 622V624H522H504Q472 624 472 641Q475 678 488 684L493 686L529 685Q551 684 645 684Q716 684 753 685T795 686Q818 686 818 669Q815 632 802 626Q798 624 759 624Q718 624 718 622Q718 615 743 410Q770 199 770 196Q770 195 806 253T903 406Q1035 618 1035 619Q1025 624 968 624Q943 624 943 641Q943 648 946 659Q950 675 952 679T963 686L998 685Q1020 684 1093 684Q1113 684 1139 685T1173 686Q1207 686 1207 669Q1207 664 1204 652Q1199 631 1194 628T1164 624Q1113 622 1101 615Q1098 612 905 305Q715 -1 709 -7Q699 -17 673 -17Q645 -17 639 -8L581 441Q581 444 442 221Q331 44 314 18T288 -14Q279 -17 263 -17H254Q229 -17 227 -5Q225 2 186 311L147 620V624H111Z",style:{"stroke-width":"3"}})])])],-1)]))),t[121]||(t[121]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",{mathvariant:"bold-italic"},"W")])],-1))]),t[128]||(t[128]=T("共 ")),Q("strong",null,[Q("mjx-container",f1,[(l(),a("svg",y1,t[122]||(t[122]=[e("",1)]))),t[123]||(t[123]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n")])],-1))]),t[124]||(t[124]=T("个元素"))]),t[129]||(t[129]=T("，第i行j列元素")),Q("mjx-container",k1,[(l(),a("svg",V1,t[125]||(t[125]=[e("",1)]))),t[126]||(t[126]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"W"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])])])],-1))]),t[130]||(t[130]=T("计算过程"))]),Q("ul",null,[Q("li",null,[Q("mjx-container",M1,[(l(),a("svg",Z1,t[131]||(t[131]=[e("",1)]))),t[132]||(t[132]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"i")])])])])],-1))]),t[135]||(t[135]=T("：")),t[136]||(t[136]=Q("code",null,"第i列",-1)),t[137]||(t[137]=T("，")),t[138]||(t[138]=Q("code",null,"d个元素",-1)),t[139]||(t[139]=T("的")),t[140]||(t[140]=Q("code",null,"行向量",-1)),t[141]||(t[141]=T("，维度为 ")),Q("strong",null,[Q("mjx-container",b1,[(l(),a("svg",v1,t[133]||(t[133]=[e("",1)]))),t[134]||(t[134]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mn",null,"1"),Q("mo",null,"×"),Q("mi",null,"d")])],-1))])])]),Q("li",null,[Q("mjx-container",D1,[(l(),a("svg",_1,t[142]||(t[142]=[e("",1)]))),t[143]||(t[143]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msubsup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"j")])]),Q("mi",{mathvariant:"normal"},"⊤")])])],-1))]),t[146]||(t[146]=T("：")),t[147]||(t[147]=Q("code",null,"第j行",-1)),t[148]||(t[148]=T("，")),t[149]||(t[149]=Q("code",null,"d个元素",-1)),t[150]||(t[150]=T("的")),t[151]||(t[151]=Q("code",null,"列向量",-1)),t[152]||(t[152]=T("，维度为 ")),Q("strong",null,[Q("mjx-container",j1,[(l(),a("svg",A1,t[144]||(t[144]=[e("",1)]))),t[145]||(t[145]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mn",null,"1")])],-1))])])])]),Q("mjx-container",C1,[(l(),a("svg",S1,t[153]||(t[153]=[e("",1)]))),t[154]||(t[154]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"W"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"i")])])]),Q("mo",null,"⋅"),Q("msubsup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"j")])]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"="),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"l"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d")])]),Q("msub",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"l")])])]),Q("mo",null,"⋅"),Q("msubsup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"l"),Q("mo",null,","),Q("mi",null,"j")])]),Q("mi",{mathvariant:"normal"},"⊤")])])],-1))])]),Q("li",null,[Q("p",null,[t[163]||(t[163]=Q("code",null,"单个元素计算复杂度",-1)),t[164]||(t[164]=T("：")),Q("mjx-container",E1,[(l(),a("svg",R1,t[155]||(t[155]=[e("",1)]))),t[156]||(t[156]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d")]),Q("mo",{stretchy:"false"},")")])],-1))]),t[165]||(t[165]=T("，")),Q("strong",null,[Q("mjx-container",O1,[(l(),a("svg",P1,t[157]||(t[157]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),t[158]||(t[158]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d")])],-1))]),t[159]||(t[159]=T("次乘法"))]),t[166]||(t[166]=T("、")),Q("strong",null,[Q("mjx-container",B1,[(l(),a("svg",I1,t[160]||(t[160]=[e("",1)]))),t[161]||(t[161]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d"),Q("mo",null,"−"),Q("mn",null,"1")])],-1))]),t[162]||(t[162]=T("次加法"))])])]),Q("li",null,[Q("p",null,[t[171]||(t[171]=Q("code",null,"整体复杂度",-1)),t[172]||(t[172]=T("：有")),Q("mjx-container",N1,[(l(),a("svg",z1,t[167]||(t[167]=[e("",1)]))),t[168]||(t[168]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")])])],-1))]),t[173]||(t[173]=T("个元素，共")),Q("mjx-container",X1,[(l(),a("svg",G1,t[169]||(t[169]=[e("",1)]))),t[170]||(t[170]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mtext",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))])])])])])]),t[238]||(t[238]=Q("p",null,[Q("strong",null,"线性注意力时间复杂度例子")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[Q("mjx-container",J1,[(l(),a("svg",q1,t[174]||(t[174]=[e("",1)]))),t[175]||(t[175]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")])])],-1))]),t[176]||(t[176]=T("矩阵乘法 (线性注意力)"))]),Q("mjx-container",K1,[(l(),a("svg",F1,t[177]||(t[177]=[e("",1)]))),t[178]||(t[178]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"n")])])])])]),Q("mo",null,"×"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mo",null,"="),Q("mi",{mathvariant:"bold-italic"},"W"),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"d")])])])])],-1))]),Q("ul",null,[Q("li",null,[Q("p",null,[t[186]||(t[186]=T("结果矩阵")),Q("mjx-container",W1,[(l(),a("svg",U1,t[179]||(t[179]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D47E",d:"M111 624Q109 624 102 624T91 623Q61 623 61 640Q61 660 70 678Q78 686 98 686Q140 684 239 684Q277 684 309 684T360 685T383 686H385Q407 686 407 668Q404 634 391 626Q387 624 348 624Q307 624 307 622Q307 618 332 409Q359 198 359 195L570 532L564 576L558 622V624H522H504Q472 624 472 641Q475 678 488 684L493 686L529 685Q551 684 645 684Q716 684 753 685T795 686Q818 686 818 669Q815 632 802 626Q798 624 759 624Q718 624 718 622Q718 615 743 410Q770 199 770 196Q770 195 806 253T903 406Q1035 618 1035 619Q1025 624 968 624Q943 624 943 641Q943 648 946 659Q950 675 952 679T963 686L998 685Q1020 684 1093 684Q1113 684 1139 685T1173 686Q1207 686 1207 669Q1207 664 1204 652Q1199 631 1194 628T1164 624Q1113 622 1101 615Q1098 612 905 305Q715 -1 709 -7Q699 -17 673 -17Q645 -17 639 -8L581 441Q581 444 442 221Q331 44 314 18T288 -14Q279 -17 263 -17H254Q229 -17 227 -5Q225 2 186 311L147 620V624H111Z",style:{"stroke-width":"3"}})])])],-1)]))),t[180]||(t[180]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",{mathvariant:"bold-italic"},"W")])],-1))]),t[187]||(t[187]=T("共 ")),Q("strong",null,[Q("mjx-container",$1,[(l(),a("svg",Y1,t[181]||(t[181]=[e("",1)]))),t[182]||(t[182]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"d")])],-1))]),t[183]||(t[183]=T("个元素"))]),t[188]||(t[188]=T("，第i行j列元素")),Q("mjx-container",Q2,[(l(),a("svg",t2,t[184]||(t[184]=[e("",1)]))),t[185]||(t[185]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"W"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])])])],-1))]),t[189]||(t[189]=T("计算过程"))]),Q("ul",null,[Q("li",null,[Q("mjx-container",T2,[(l(),a("svg",a2,t[190]||(t[190]=[e("",1)]))),t[191]||(t[191]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msubsup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"i")])]),Q("mi",{mathvariant:"normal"},"⊤")])])],-1))]),t[194]||(t[194]=T("：")),t[195]||(t[195]=Q("code",null,"第i行",-1)),t[196]||(t[196]=T("，")),t[197]||(t[197]=Q("code",null,"n个元素",-1)),t[198]||(t[198]=T("的")),t[199]||(t[199]=Q("code",null,"行向量",-1)),t[200]||(t[200]=T("，维度为 ")),Q("strong",null,[Q("mjx-container",l2,[(l(),a("svg",e2,t[192]||(t[192]=[e("",1)]))),t[193]||(t[193]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mn",null,"1"),Q("mo",null,"×"),Q("mi",null,"n")])],-1))])])]),Q("li",null,[Q("mjx-container",s2,[(l(),a("svg",m2,t[201]||(t[201]=[e("",1)]))),t[202]||(t[202]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"j")])])])])],-1))]),t[205]||(t[205]=T("：")),t[206]||(t[206]=Q("code",null,"第j列",-1)),t[207]||(t[207]=T("，")),t[208]||(t[208]=Q("code",null,"n个元素",-1)),t[209]||(t[209]=T("的")),t[210]||(t[210]=Q("code",null,"列向量",-1)),t[211]||(t[211]=T("，维度为 ")),Q("strong",null,[Q("mjx-container",o2,[(l(),a("svg",d2,t[203]||(t[203]=[e("",1)]))),t[204]||(t[204]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mn",null,"1")])],-1))])])])]),Q("mjx-container",n2,[(l(),a("svg",r2,t[212]||(t[212]=[e("",1)]))),t[213]||(t[213]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"W"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])]),Q("mo",null,"="),Q("msubsup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"i")])]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"⋅"),Q("msub",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"j")])])]),Q("mo",null,"="),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"l"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n")])]),Q("msubsup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"l")])]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mo",null,"⋅"),Q("msub",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"l"),Q("mo",null,","),Q("mi",null,"i")])])])])],-1))])]),Q("li",null,[Q("p",null,[t[222]||(t[222]=Q("code",null,"单个元素计算复杂度",-1)),t[223]||(t[223]=T("：")),Q("mjx-container",i2,[(l(),a("svg",h2,t[214]||(t[214]=[e("",1)]))),t[215]||(t[215]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n")]),Q("mo",{stretchy:"false"},")")])],-1))]),t[224]||(t[224]=T("，")),Q("strong",null,[Q("mjx-container",g2,[(l(),a("svg",p2,t[216]||(t[216]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),t[217]||(t[217]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"n")])],-1))]),t[218]||(t[218]=T("次乘法"))]),t[225]||(t[225]=T("、")),Q("strong",null,[Q("mjx-container",H2,[(l(),a("svg",u2,t[219]||(t[219]=[e("",1)]))),t[220]||(t[220]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"n"),Q("mo",null,"−"),Q("mn",null,"1")])],-1))]),t[221]||(t[221]=T("次加法"))])])]),Q("li",null,[Q("p",null,[t[230]||(t[230]=Q("code",null,"整体复杂度",-1)),t[231]||(t[231]=T("：有")),Q("mjx-container",L2,[(l(),a("svg",c2,t[226]||(t[226]=[e("",1)]))),t[227]||(t[227]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")])])],-1))]),t[232]||(t[232]=T("个元素，共")),Q("mjx-container",w2,[(l(),a("svg",x2,t[228]||(t[228]=[e("",1)]))),t[229]||(t[229]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mtext",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))]),t[233]||(t[233]=T("，")),t[234]||(t[234]=Q("code",null,"复杂度线性依赖于n",-1))])])])])])]),t[846]||(t[846]=Q("h4",{id:"attention-概念",tabindex:"-1"},[T("Attention 概念 "),Q("a",{class:"header-anchor",href:"#attention-概念","aria-label":'Permalink to "Attention 概念"'},"​")],-1)),Q("div",f2,[t[258]||(t[258]=Q("div",{class:"custom-block-title"},"Attention 概念",-1)),Q("ul",null,[t[248]||(t[248]=e("",2)),Q("li",null,[t[247]||(t[247]=Q("p",null,[Q("strong",null,"注意力权重")],-1)),Q("ul",null,[Q("li",null,[Q("strong",null,[Q("mjx-container",y2,[(l(),a("svg",k2,t[239]||(t[239]=[e("",1)]))),t[240]||(t[240]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mtext",null,"softmax"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,"∗"),Q("mi",null,"K"),Q("mo",{stretchy:"false"},")")])],-1))])]),t[243]||(t[243]=T("： 即")),t[244]||(t[244]=Q("code",null,"当前query对各个位置的注意力权重",-1)),Q("mjx-container",V2,[(l(),a("svg",M2,t[241]||(t[241]=[e("",1)]))),t[242]||(t[242]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"α"),Q("mn",null,"1")]),Q("mo",null,","),Q("mo",null,"⋯"),Q("mo",null,","),Q("msub",null,[Q("mi",null,"α"),Q("mi",null,"l")])])])],-1))]),t[245]||(t[245]=T("。"))]),t[246]||(t[246]=Q("li",null,[T("早期QK有 "),Q("code",null,"dot/concat/w"),T(" 这3种"),Q("a",{href:"https://plmsmile.github.io/posts/olds/nlp/Attention-based-NMT.html#global-attention",target:"_blank",rel:"noreferrer"},"score计算的3种方式")],-1))])]),t[249]||(t[249]=Q("li",null,[Q("p",null,[Q("strong",null,"加权求和")]),Q("ul",null,[Q("li",null,"利用注意力权重对各位置Value加权求和，就得到输出")])],-1))]),Q("mjx-container",Z2,[(l(),a("svg",b2,t[250]||(t[250]=[e("",1)]))),t[251]||(t[251]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mtext",null,"Attention"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"softmax")]),Q("mo",{stretchy:"false"},"("),Q("mfrac",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"Q"),Q("msup",null,[Q("mi",null,"K"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mstyle",{mathcolor:"blue"},[Q("msqrt",null,[Q("msub",null,[Q("mi",null,"d"),Q("mi",null,"k")])])])]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"⋅"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"V")])])],-1))]),Q("ul",null,[Q("li",null,[t[254]||(t[254]=T("除以")),Q("mjx-container",v2,[(l(),a("svg",D2,t[252]||(t[252]=[e("",1)]))),t[253]||(t[253]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msqrt",null,[Q("msub",null,[Q("mi",null,"d"),Q("mi",null,"k")])])])],-1))]),t[255]||(t[255]=T("进行缩放，")),t[256]||(t[256]=Q("strong",null,"防止梯度爆炸",-1)),t[257]||(t[257]=T(","))])])]),t[847]||(t[847]=e("",8)),Q("div",_2,[t[327]||(t[327]=Q("div",{class:"custom-block-title"},"Attention 推导",-1)),t[328]||(t[328]=Q("p",null,[Q("strong",null,"符号定义")],-1)),Q("ul",null,[Q("li",null,[t[261]||(t[261]=T("假设dim=")),Q("mjx-container",j2,[(l(),a("svg",A2,t[259]||(t[259]=[e("",1)]))),t[260]||(t[260]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"d"),Q("mi",null,"k")])])],-1))]),t[262]||(t[262]=T("，部分公式")),t[263]||(t[263]=Q("strong",null,"省略缩放、softmax、向量转置等",-1)),t[264]||(t[264]=T("。"))]),Q("li",null,[Q("mjx-container",C2,[(l(),a("svg",S2,t[265]||(t[265]=[e("",1)]))),t[266]||(t[266]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mtext",null,"Attn"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"s"),Q("mi",null,"t"),Q("mi",null,"e"),Q("mi",null,"p"),Q("mi",null,"i")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")])])],-1))]),t[267]||(t[267]=T("：")),t[268]||(t[268]=Q("code",null,"第i步的完整Attention矩阵",-1))]),Q("li",null,[Q("mjx-container",E2,[(l(),a("svg",R2,t[269]||(t[269]=[e("",1)]))),t[270]||(t[270]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mtext",null,"Attn"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")])])],-1))]),t[271]||(t[271]=T("：")),t[272]||(t[272]=Q("code",null,"attention矩阵的第i行",-1))])]),t[329]||(t[329]=Q("p",null,[Q("strong",null,"Step=1，共1行")],-1)),Q("ul",null,[Q("li",null,[t[275]||(t[275]=Q("code",null,"第1行",-1)),t[276]||(t[276]=T("：")),Q("strong",null,[Q("mjx-container",O2,[(l(),a("svg",P2,t[273]||(t[273]=[e("",1)]))),t[274]||(t[274]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mtext",null,"softmaxted"),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"V"),Q("mo",{stretchy:"false"},"→")])]),Q("mn",null,"1")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"V"),Q("mo",{stretchy:"false"},"→")])]),Q("mn",null,"1")])])],-1))])])])]),Q("mjx-container",B2,[(l(),a("svg",I2,t[277]||(t[277]=[e("",1)]))),t[278]||(t[278]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("mstyle",null,[Q("msub",null,[Q("mtext",null,"Attn"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"s"),Q("mi",null,"t"),Q("mi",null,"e"),Q("mi",null,"p"),Q("mn",null,"1")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")])]),Q("mtd",null,[Q("mo",null,"="),Q("mtext",null,"softmax"),Q("mo",{stretchy:"false"},"("),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("mi",null,"K"),Q("msup",null,[Q("mn",null,"1"),Q("mi",null,"T")])]),Q("msqrt",null,[Q("msub",null,[Q("mi",null,"d"),Q("mi",null,"k")])])]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"×"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",{mathvariant:"normal"},"⊤")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),Q("mstyle",null,[Q("mtext",null,"softmax"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")")])]),Q("mo",null,"×"),Q("mstyle",{mathcolor:"red"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},"→")])])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mtext",null,"Attn"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])])])])])],-1))]),t[330]||(t[330]=Q("p",null,[Q("strong",null,"Step=2，共2行")],-1)),Q("ul",null,[Q("li",null,[t[281]||(t[281]=Q("code",null,"第1行",-1)),t[282]||(t[282]=T("：")),Q("strong",null,[Q("mjx-container",N2,[(l(),a("svg",z2,t[279]||(t[279]=[e("",1)]))),t[280]||(t[280]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"V"),Q("mo",{stretchy:"false"},"→")])]),Q("mn",null,"1")])])],-1))])]),t[283]||(t[283]=T("，")),t[284]||(t[284]=Q("code",null,"step1已算过",-1))]),Q("li",null,[t[287]||(t[287]=Q("code",null,"第2行",-1)),t[288]||(t[288]=T("：")),Q("strong",null,[Q("mjx-container",X2,[(l(),a("svg",G2,t[285]||(t[285]=[e("",1)]))),t[286]||(t[286]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"V"),Q("mo",{stretchy:"false"},"→")])]),Q("mn",null,"1")]),Q("mo",null,"+"),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"V"),Q("mo",{stretchy:"false"},"→")])]),Q("mn",null,"2")])])],-1))])])])]),Q("mjx-container",J2,[(l(),a("svg",q2,t[289]||(t[289]=[e("",1)]))),t[290]||(t[290]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"s"),Q("mi",null,"t"),Q("mi",null,"e"),Q("mi",null,"p"),Q("mn",null,"2")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")])]),Q("mtd",null,[Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"1")])]),Q("mtd",null,[Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")])]),Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",null,"T")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"Q"),Q("mn",null,"1"),Q("mi",{mathvariant:"normal"},"不"),Q("mi",{mathvariant:"normal"},"能"),Q("mi",{mathvariant:"normal"},"看"),Q("mi",{mathvariant:"normal"},"见"),Q("mi",null,"K"),Q("mn",null,"2")])])])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")])]),Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",null,"T")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"="),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")])]),Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"∞")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")])]),Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",null,"T")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"normal"},"被"),Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"s"),Q("mi",null,"k"),Q("mi",{mathvariant:"normal"},"掉"),Q("mi",null,"，"),Q("mi",null,"s"),Q("mi",null,"o"),Q("mi",null,"f"),Q("mi",null,"t"),Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"x"),Q("mi",{mathvariant:"normal"},"为"),Q("mi",{mathvariant:"normal"},"负"),Q("mi",{mathvariant:"normal"},"无"),Q("mi",{mathvariant:"normal"},"穷")])])]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"1")])]),Q("mtd",null,[Q("mstyle",null,[Q("mn",null,"0")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"1")])]),Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"normal"},"过"),Q("mi",{mathvariant:"normal"},"了"),Q("mi",null,"s"),Q("mi",null,"o"),Q("mi",null,"f"),Q("mi",null,"t"),Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"x"),Q("mi",{mathvariant:"normal"},"和"),Q("mi",{mathvariant:"normal"},"缩"),Q("mi",{mathvariant:"normal"},"放"),Q("mi",null,"，"),Q("mi",{mathvariant:"normal"},"简"),Q("mi",{mathvariant:"normal"},"写")])])]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"1")]),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"K"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"["),Q("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"1")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")])])])]),Q("mtr",null,[Q("mtd",null,[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},"]")])])])])])])],-1))]),t[331]||(t[331]=Q("p",null,[Q("strong",null,"Step=3, 共3行")],-1)),Q("ul",null,[Q("li",null,[t[293]||(t[293]=Q("code",null,"第1行",-1)),t[294]||(t[294]=T("：")),Q("mjx-container",K2,[(l(),a("svg",F2,t[291]||(t[291]=[e("",1)]))),t[292]||(t[292]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"1")])]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")])])])],-1))]),t[295]||(t[295]=T("，")),t[296]||(t[296]=Q("code",null,"第1步已算过",-1))]),Q("li",null,[t[299]||(t[299]=Q("code",null,"第2行",-1)),t[300]||(t[300]=T("：")),Q("mjx-container",W2,[(l(),a("svg",U2,t[297]||(t[297]=[e("",1)]))),t[298]||(t[298]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")])]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"2")])]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")])])])],-1))]),t[301]||(t[301]=T("，")),t[302]||(t[302]=Q("code",null,"第2步已算过",-1))]),Q("li",null,[t[305]||(t[305]=Q("code",null,"第3行",-1)),t[306]||(t[306]=T("：")),Q("mjx-container",$2,[(l(),a("svg",Y2,t[303]||(t[303]=[e("",1)]))),t[304]||(t[304]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"A"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"n"),Q("mn",null,"3")]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Q"),Q("mo",null,","),Q("mi",null,"K"),Q("mo",null,","),Q("mi",null,"V"),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"3")])]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"1"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"3")])]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"2"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"2")]),Q("mo",null,"+"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"Q"),Q("mn",null,"3")])]),Q("msubsup",null,[Q("mi",null,"K"),Q("mn",null,"3"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"V"),Q("mn",null,"3")])])],-1))]),t[307]||(t[307]=T("，")),t[308]||(t[308]=Q("code",null,"第3步算第3行",-1))])]),t[332]||(t[332]=Q("p",null,[Q("strong",null,"结论")],-1)),Q("ul",null,[t[326]||(t[326]=Q("li",null,[Q("p",null,[T("每一步都"),Q("code",null,"存在大量冗余"),T("，"),Q("code",null,"第i步"),T("，只需要"),Q("code",null,"计算第i行"),T("即可，"),Q("code",null,"前i-1行都已经计算过")])],-1)),Q("li",null,[Q("p",null,[t[311]||(t[311]=T("矩阵中，第k行只和")),Q("mjx-container",Q3,[(l(),a("svg",t3,t[309]||(t[309]=[e("",1)]))),t[310]||(t[310]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"Q"),Q("mi",null,"k")])])],-1))]),t[312]||(t[312]=T("相关，和其余位置的Q无关。"))]),Q("ul",null,[Q("li",null,[Q("mjx-container",T3,[(l(),a("svg",a3,t[313]||(t[313]=[e("",1)]))),t[314]||(t[314]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"Q"),Q("mi",null,"k")])])],-1))]),t[317]||(t[317]=T("会和前面的每一对")),Q("mjx-container",l3,[(l(),a("svg",e3,t[315]||(t[315]=[e("",1)]))),t[316]||(t[316]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"K"),Q("mi",null,"i")]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"V"),Q("mi",null,"i")])])],-1))]),t[318]||(t[318]=T("做attention计算，来计算当前行。"))])])]),Q("li",null,[Q("p",null,[t[323]||(t[323]=T("解码")),Q("mjx-container",s3,[(l(),a("svg",m3,t[319]||(t[319]=[e("",1)]))),t[320]||(t[320]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"k")])])],-1))]),t[324]||(t[324]=T("，只需输入字符")),Q("mjx-container",o3,[(l(),a("svg",d3,t[321]||(t[321]=[e("",1)]))),t[322]||(t[322]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"x"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"k"),Q("mo",null,"−"),Q("mn",null,"1")])])])],-1))]),t[325]||(t[325]=T("即可。"))])])])]),t[848]||(t[848]=Q("h4",{id:"几个重点思考-降维-dk等",tabindex:"-1"},[T("几个重点思考(降维/dk等) "),Q("a",{class:"header-anchor",href:"#几个重点思考-降维-dk等","aria-label":'Permalink to "几个重点思考(降维/dk等)"'},"​")],-1)),Q("div",n3,[t[402]||(t[402]=Q("div",{class:"custom-block-title"},"重要思考",-1)),t[403]||(t[403]=Q("p",null,[Q("strong",null,"1、Self-Attention Padding 做 Mask")],-1)),Q("ul",null,[Q("li",null,[Q("mjx-container",r3,[(l(),a("svg",i3,t[333]||(t[333]=[e("",1)]))),t[334]||(t[334]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Q"),Q("mo",null,"⋅"),Q("mi",null,"K")])],-1))]),t[337]||(t[337]=T(" ，需要对padding部分置为")),Q("mjx-container",h3,[(l(),a("svg",g3,t[335]||(t[335]=[e("",1)]))),t[336]||(t[336]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"∞")])],-1))]),t[338]||(t[338]=T("负无穷，再过Softmax才会为0。"))])]),t[404]||(t[404]=Q("p",null,[Q("strong",null,"2、Transformer Multi-Head Attention 要对head 进行降维")],-1)),Q("ul",null,[Q("li",null,[t[343]||(t[343]=T("输入向量维度为")),Q("mjx-container",p3,[(l(),a("svg",H3,t[339]||(t[339]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),t[340]||(t[340]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d")])],-1))]),t[344]||(t[344]=T("，需要降维到 ")),Q("mjx-container",u3,[(l(),a("svg",L3,t[341]||(t[341]=[e("",1)]))),t[342]||(t[342]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"d"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{"data-mjx-alternate":"1"},"′")])])])],-1))]),t[345]||(t[345]=T("（远小于d），主要是为了")),t[346]||(t[346]=Q("mark",null,"降低计算复杂度",-1))]),Q("li",null,[t[349]||(t[349]=T("时间复杂度：")),Q("mjx-container",c3,[(l(),a("svg",w3,t[347]||(t[347]=[e("",1)]))),t[348]||(t[348]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"o"),Q("mo",{stretchy:"false"},"("),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"、")]),Q("mi",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"h"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mo",{stretchy:"false"},"→"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mi",null,"o"),Q("mo",{stretchy:"false"},"("),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mi",null,"d"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{"data-mjx-alternate":"1"},"′")])])]),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"、")]),Q("mi",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"h"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mi",null,"d"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{"data-mjx-alternate":"1"},"′")])])]),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])],-1))])])]),t[405]||(t[405]=Q("p",null,[Q("strong",null,"3、维度和点击的关系")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[Q("mjx-container",x3,[(l(),a("svg",f3,t[350]||(t[350]=[e("",1)]))),t[351]||(t[351]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"k")])],-1))]),t[356]||(t[356]=T("向量 维度d越大，点积值")),Q("mjx-container",y3,[(l(),a("svg",k3,t[352]||(t[352]=[e("",1)]))),t[353]||(t[353]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k")])],-1))]),t[357]||(t[357]=T("越大，点积属于均值0、方差")),Q("mjx-container",V3,[(l(),a("svg",M3,t[354]||(t[354]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),t[355]||(t[355]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d")])],-1))]),t[358]||(t[358]=T("的正态分布。"))]),Q("mjx-container",Z3,[(l(),a("svg",b3,t[359]||(t[359]=[e("",1)]))),t[360]||(t[360]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"E"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mn",null,"0"),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mi",null,"d")])],-1))])]),Q("li",null,[t[363]||(t[363]=Q("p",null,"方差的性质",-1)),Q("mjx-container",v3,[(l(),a("svg",D3,t[361]||(t[361]=[e("",1)]))),t[362]||(t[362]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"c"),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("msup",null,[Q("mi",null,"c"),Q("mn",null,"2")]),Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"c"),Q("mo",null,"+"),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"。")]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mi",null,"c"),Q("mi",{mathvariant:"normal"},"为"),Q("mi",{mathvariant:"normal"},"常"),Q("mi",{mathvariant:"normal"},"数")])],-1))])])]),Q("p",null,[Q("strong",null,[t[366]||(t[366]=T("3、深入理解")),Q("mjx-container",_3,[(l(),a("svg",j3,t[364]||(t[364]=[e("",1)]))),t[365]||(t[365]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msqrt",null,[Q("msub",null,[Q("mi",null,"d"),Q("mi",null,"k")])])])],-1))]),t[367]||(t[367]=T("缓解梯度爆炸问题"))])]),Q("ul",null,[Q("li",null,[Q("p",null,[t[372]||(t[372]=T("Attention计算过程：内积")),Q("mjx-container",A3,[(l(),a("svg",C3,t[368]||(t[368]=[e("",1)]))),t[369]||(t[369]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Q"),Q("mi",null,"K")])],-1))]),t[373]||(t[373]=T("后 -> softmax。softmax主要入参是")),Q("mjx-container",S3,[(l(),a("svg",E3,t[370]||(t[370]=[e("",1)]))),t[371]||(t[371]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"q"),Q("mi",null,"k")])])])],-1))]),t[374]||(t[374]=T("。"))])]),Q("li",null,[t[381]||(t[381]=Q("p",null,[Q("strong",null,"如果不进行缩放"),T("：")],-1)),Q("ul",null,[Q("li",null,[t[377]||(t[377]=T("softmax入参在")),Q("mjx-container",R3,[(l(),a("svg",O3,t[375]||(t[375]=[e("",1)]))),t[376]||(t[376]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mo",{stretchy:"false"},"["),Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"−"),Q("mn",null,"3"),Q("msqrt",null,[Q("mi",null,"d")])])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"0.278em"})]),Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"3"),Q("msqrt",null,[Q("mi",null,"d")])])]),Q("mo",{stretchy:"false"},"]")])])],-1))]),t[378]||(t[378]=T("之间，")),t[379]||(t[379]=Q("code",null,"会很大或很小",-1)),t[380]||(t[380]=Q("ul",null,[Q("li",null,[T("导致"),Q("code",null,"注意力权重"),T(" 接近"),Q("code",null,"one-hot分布")]),Q("li",null,[Q("strong",null,"饱和区梯度消失"),T("："),Q("code",null,"x值继续变大，y几乎不变")])],-1))])])]),Q("li",null,[Q("p",null,[t[385]||(t[385]=T("因此：")),Q("strong",null,[t[384]||(t[384]=T("QK后才除以")),Q("mjx-container",P3,[(l(),a("svg",B3,t[382]||(t[382]=[e("",1)]))),t[383]||(t[383]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msqrt",null,[Q("msub",null,[Q("mi",null,"d"),Q("mi",null,"k")])])])],-1))])])]),Q("ul",null,[Q("li",null,[Q("mark",null,[t[388]||(t[388]=T("使得softmax入参在")),Q("mjx-container",I3,[(l(),a("svg",N3,t[386]||(t[386]=[e("",1)]))),t[387]||(t[387]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mo",{stretchy:"false"},"["),Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"−"),Q("mn",null,"3")])]),Q("mo",null,","),Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"3")])]),Q("mo",{stretchy:"false"},"]")])],-1))]),t[389]||(t[389]=T("之间，不大也不小"))])])])]),Q("li",null,[t[400]||(t[400]=Q("p",null,"数学思路",-1)),Q("ul",null,[Q("li",null,[Q("mjx-container",z3,[(l(),a("svg",X3,t[390]||(t[390]=[e("",1)]))),t[391]||(t[391]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k")])],-1))]),t[394]||(t[394]=T(" 除以")),Q("mjx-container",G3,[(l(),a("svg",J3,t[392]||(t[392]=[e("",1)]))),t[393]||(t[393]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msqrt",null,[Q("mi",null,"d")])])],-1))]),t[395]||(t[395]=T("，抵消掉，由0-d正态分布，")),t[396]||(t[396]=Q("strong",null,"又回到0-1正态分布",-1)),t[397]||(t[397]=T("。"))])]),Q("mjx-container",q3,[(l(),a("svg",K3,t[398]||(t[398]=[e("",1)]))),t[399]||(t[399]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"E"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mn",null,"0"),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mi",null,"d"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mo",{stretchy:"false"},"⇒"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mi",null,"D"),Q("mo",{stretchy:"false"},"("),Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k")]),Q("msqrt",null,[Q("mi",null,"d")])]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k")]),Q("mrow",null,[Q("mo",{stretchy:"false"},"("),Q("msqrt",null,[Q("mi",null,"d")]),Q("msup",null,[Q("mo",{stretchy:"false"},")"),Q("mn",null,"2")])])]),Q("mo",null,"="),Q("mn",null,"1")])],-1))]),t[401]||(t[401]=Q("ul",null,[Q("li",null,"方差为1，有效控制点积结果发散，应对了梯度消失问题。")],-1))])])]),t[849]||(t[849]=e("",3)),Q("div",F3,[t[441]||(t[441]=Q("div",{class:"custom-block-title"},"线性注意力",-1)),t[442]||(t[442]=Q("p",null,[Q("strong",null,"线性注意力基本公式")],-1)),Q("ul",null,[Q("li",null,[t[410]||(t[410]=Q("code",null,"交换位置",-1)),t[411]||(t[411]=T("，")),t[412]||(t[412]=Q("code",null,"时间复杂度",-1)),t[413]||(t[413]=T("由")),Q("mjx-container",W3,[(l(),a("svg",U3,t[406]||(t[406]=[e("",1)]))),t[407]||(t[407]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("mtext",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"d"),Q("msup",null,[Q("mi",null,"n"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))]),t[414]||(t[414]=T("变为")),Q("mjx-container",$3,[(l(),a("svg",Y3,t[408]||(t[408]=[e("",1)]))),t[409]||(t[409]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"o"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"n"),Q("msup",null,[Q("mi",null,"d"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])],-1))]),t[415]||(t[415]=T("，")),t[416]||(t[416]=Q("code",null,"线性依赖于n",-1)),t[417]||(t[417]=T("。 ")),t[418]||(t[418]=Q("ul",null,[Q("li",null,[T("复杂度例子见上文 "),Q("a",{href:"http://plmsmile.github.io/posts/llm/basic/02-llm-components.html#softmax%E5%92%8Clinear%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6",target:"_blank",rel:"noreferrer"},"Softmax和Linear时间复杂度")])],-1))])]),Q("mjx-container",Q4,[(l(),a("svg",t4,t[419]||(t[419]=[e("",1)]))),t[420]||(t[420]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"O")]),Q("mo",null,"="),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"n")])])])])]),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("mo",{stretchy:"false"},"⟹"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"Q")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"n"),Q("mo",null,"×"),Q("mi",null,"d")])])])])]),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("msup",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"K")]),Q("mi",{mathvariant:"normal"},"⊤")]),Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"bold-italic"},"V")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"d")])])])])])])],-1))]),Q("ul",null,[Q("li",null,[t[426]||(t[426]=Q("p",null,"分量形式",-1)),Q("mjx-container",T4,[(l(),a("svg",a4,t[421]||(t[421]=[e("",1)]))),t[422]||(t[422]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"normal"},"向"),Q("mi",{mathvariant:"normal"},"量")])]),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"normal"},"标"),Q("mi",{mathvariant:"normal"},"量")])]),Q("mo",null,"="),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mo",{stretchy:"false"},")"),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"q")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])])],-1))]),Q("ul",null,[Q("li",null,[t[425]||(t[425]=T("各元素维度")),Q("mjx-container",l4,[(l(),a("svg",e4,t[423]||(t[423]=[e("",1)]))),t[424]||(t[424]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mn",null,"1")])])]),Q("mi",null,"，"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"0.278em"})]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mn",null,"1"),Q("mo",null,"×"),Q("mi",null,"d")])])]),Q("mi",null,"，"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"0.278em"})]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"q")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mn",null,"1")])])]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mo",{stretchy:"false"},"→"),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")]),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"1"),Q("mo",null,"×"),Q("mn",null,"1")])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"d")])])])])],-1))])])])])]),t[443]||(t[443]=Q("p",null,[Q("strong",null,"状态公式")],-1)),Q("ul",null,[Q("li",null,[t[433]||(t[433]=T("记括号部分为")),Q("mjx-container",s4,[(l(),a("svg",m4,t[427]||(t[427]=[e("",1)]))),t[428]||(t[428]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])])],-1))]),t[434]||(t[434]=T("，Casual形式的Attention可写成")),t[435]||(t[435]=Q("strong",null,"以",-1)),Q("mjx-container",o4,[(l(),a("svg",d4,t[429]||(t[429]=[e("",1)]))),t[430]||(t[430]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])])],-1))]),t[436]||(t[436]=Q("strong",null,"为状态",-1)),t[437]||(t[437]=T("的")),t[438]||(t[438]=Q("code",null,"线性RNN",-1)),Q("mjx-container",n4,[(l(),a("svg",r4,t[431]||(t[431]=[e("",1)]))),t[432]||(t[432]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"q")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t"),Q("mo",null,"−"),Q("mn",null,"1")])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"t")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"t"),Q("mi",{mathvariant:"normal"},"⊤")])])])],-1))])])]),Q("mjx-container",i4,[(l(),a("svg",h4,t[439]||(t[439]=[e("",1)]))),t[440]||(t[440]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"="),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"j")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"j"),Q("mi",{mathvariant:"normal"},"⊤")])])])],-1))]),t[444]||(t[444]=Q("ul",null,[Q("li",null,[Q("code",null,"线性Attention"),T("：本质是一个"),Q("code",null,"cumsum"),T("，将"),Q("code",null,"所有历史信息"),T(),Q("code",null,"等权地叠加"),T("。")])],-1))]),t[850]||(t[850]=Q("h4",{id:"记忆遗忘及解决方法-retnet-minimax-01",tabindex:"-1"},[T("记忆遗忘及解决方法(RetNet/Minimax-01) "),Q("a",{class:"header-anchor",href:"#记忆遗忘及解决方法-retnet-minimax-01","aria-label":'Permalink to "记忆遗忘及解决方法(RetNet/Minimax-01)"'},"​")],-1)),Q("div",g4,[t[473]||(t[473]=Q("div",{class:"custom-block-title"},"提示",-1)),t[474]||(t[474]=Q("p",null,[Q("strong",null,"现行Attention 记忆遗忘缺点")],-1)),Q("ul",null,[t[455]||(t[455]=Q("li",null,[T("本质是"),Q("code",null,"cumsum"),T("，各历史信息"),Q("code",null,"同等权重叠加"),T("。")],-1)),t[456]||(t[456]=Q("li",null,[T("当叠加"),Q("code",null,"token足够多时"),T("，"),Q("code",null,"每个token的信息占比"),T("会变得"),Q("code",null,"很小"),T("。")],-1)),Q("li",null,[t[447]||(t[447]=T("仅靠")),t[448]||(t[448]=Q("code",null,"固定大小矩阵",-1)),t[449]||(t[449]=T()),Q("mjx-container",p4,[(l(),a("svg",H4,t[445]||(t[445]=[e("",1)]))),t[446]||(t[446]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"∈"),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"double-struck"},"R")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"d"),Q("mo",null,"×"),Q("mi",null,"d")])])])])],-1))]),t[450]||(t[450]=T("难以准确重建任意token，")),t[451]||(t[451]=Q("code",null,"每个token的记忆",-1)),t[452]||(t[452]=T("会变得")),t[453]||(t[453]=Q("code",null,"模糊不清",-1)),t[454]||(t[454]=T("。"))])]),t[475]||(t[475]=Q("p",null,[Q("strong",null,"RetNet/MiniMax-01：增加衰减因子")],-1)),Q("ul",null,[Q("li",null,[t[459]||(t[459]=Q("strong",null,"衰减因子",-1)),Q("mjx-container",u4,[(l(),a("svg",L4,t[457]||(t[457]=[e("",1)]))),t[458]||(t[458]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"red"},[Q("mi",null,"γ")])])],-1))]),t[460]||(t[460]=T("：模型倾向于")),t[461]||(t[461]=Q("code",null,"遗忘早期信息",-1)),t[462]||(t[462]=T("，就近原则"))])]),Q("mjx-container",c4,[(l(),a("svg",w4,t[463]||(t[463]=[e("",1)]))),t[464]||(t[464]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"q")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"γ")]),Q("mo",null,"⋅"),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t"),Q("mo",null,"−"),Q("mn",null,"1")])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"t")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"t"),Q("mi",{mathvariant:"normal"},"⊤")])])])],-1))]),t[476]||(t[476]=Q("p",null,[Q("strong",null,"DFW/Mamba/Mamba2")],-1)),Q("ul",null,[Q("li",null,[t[471]||(t[471]=T("把衰减因子")),Q("mjx-container",x4,[(l(),a("svg",f4,t[465]||(t[465]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D6FE",d:"M31 249Q11 249 11 258Q11 275 26 304T66 365T129 418T206 441Q233 441 239 440Q287 429 318 386T371 255Q385 195 385 170Q385 166 386 166L398 193Q418 244 443 300T486 391T508 430Q510 431 524 431H537Q543 425 543 422Q543 418 522 378T463 251T391 71Q385 55 378 6T357 -100Q341 -165 330 -190T303 -216Q286 -216 286 -188Q286 -138 340 32L346 51L347 69Q348 79 348 100Q348 257 291 317Q251 355 196 355Q148 355 108 329T51 260Q49 251 47 251Q45 249 31 249Z",style:{"stroke-width":"3"}})])])],-1)]))),t[466]||(t[466]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"γ")])],-1))]),t[472]||(t[472]=T("推广为位置t的函数")),Q("mjx-container",y4,[(l(),a("svg",k4,t[467]||(t[467]=[e("",1)]))),t[468]||(t[468]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"γ"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"t"),Q("mo",{stretchy:"false"},")")])],-1))]),Q("mjx-container",V4,[(l(),a("svg",M4,t[469]||(t[469]=[e("",1)]))),t[470]||(t[470]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"q")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"γ"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"t"),Q("mo",{stretchy:"false"},")")]),Q("mo",null,"⋅"),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t"),Q("mo",null,"−"),Q("mn",null,"1")])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"t")])]),Q("mstyle",{mathcolor:"blue"},[Q("msubsup",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"t"),Q("mi",{mathvariant:"normal"},"⊤")])])])],-1))])])])]),t[851]||(t[851]=Q("h4",{id:"testtimetraining",tabindex:"-1"},[T("TestTimeTraining "),Q("a",{class:"header-anchor",href:"#testtimetraining","aria-label":'Permalink to "TestTimeTraining"'},"​")],-1)),Q("div",Z4,[t[506]||(t[506]=Q("div",{class:"custom-block-title"},"提示",-1)),t[507]||(t[507]=Q("p",null,[Q("strong",null,"TTT 思想")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[t[482]||(t[482]=T("把**")),Q("mjx-container",b4,[(l(),a("svg",v4,t[477]||(t[477]=[e("",1)]))),t[478]||(t[478]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",{mathvariant:"bold-italic"},"K"),Q("mo",{mathvariant:"bold"},","),Q("mi",{mathvariant:"bold-italic"},"V")])],-1))]),t[483]||(t[483]=T("视作语料对**，根据语料训练模型，")),Q("strong",null,[Q("mjx-container",D4,[(l(),a("svg",_4,t[479]||(t[479]=[e("",1)]))),t[480]||(t[480]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"S"),Q("mi",{mathvariant:"bold-italic"},"t")])])],-1))]),t[481]||(t[481]=T("为模型参数"))])]),Q("mjx-container",j4,[(l(),a("svg",A4,t[484]||(t[484]=[e("",1)]))),t[485]||(t[485]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,","),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mn",null,"2")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,","),Q("mo",null,"⋯"),Q("mo",null,","),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"k"),Q("mi",null,"t")]),Q("mo",null,","),Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"v"),Q("mi",null,"t")]),Q("mo",{stretchy:"false"},")")])],-1))])]),Q("li",null,[t[488]||(t[488]=Q("p",null,"最后输出",-1)),Q("mjx-container",C4,[(l(),a("svg",S4,t[486]||(t[486]=[e("",1)]))),t[487]||(t[487]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"f")]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"S"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",{stretchy:"false"},")")])],-1))])])]),t[508]||(t[508]=Q("p",null,[Q("strong",null,"TTT 实现的RNN")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[t[496]||(t[496]=T("当前模型参数为$\\textcolor{blue}{\\boldsymbol{S}}")),Q("em",null,[t[493]||(t[493]=T("\\textcolor{red}{t-1} ")),Q("mjx-container",E4,[(l(),a("svg",R4,t[489]||(t[489]=[e("",1)]))),t[490]||(t[490]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"，"),Q("mi",{mathvariant:"normal"},"优"),Q("mi",{mathvariant:"normal"},"化"),Q("mi",{mathvariant:"normal"},"器"),Q("mi",{mathvariant:"normal"},"接"),Q("mi",{mathvariant:"normal"},"收"),Q("mi",{mathvariant:"normal"},"到"),Q("mi",{mathvariant:"normal"},"新"),Q("mi",{mathvariant:"normal"},"数"),Q("mi",{mathvariant:"normal"},"据")])],-1))]),t[494]||(t[494]=T("(k_t,v_t)")),Q("mjx-container",O4,[(l(),a("svg",P4,t[491]||(t[491]=[e("",1)]))),t[492]||(t[492]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"，"),Q("mi",{mathvariant:"normal"},"更"),Q("mi",{mathvariant:"normal"},"新"),Q("mi",{mathvariant:"normal"},"模"),Q("mi",{mathvariant:"normal"},"型"),Q("mi",{mathvariant:"normal"},"参"),Q("mi",{mathvariant:"normal"},"数"),Q("mi",{mathvariant:"normal"},"为")])],-1))]),t[495]||(t[495]=T("\\textcolor{blue}{\\boldsymbol{S}}"))]),t[497]||(t[497]=T("\\textcolor{red}{t}$"))]),Q("mjx-container",B4,[(l(),a("svg",I4,t[498]||(t[498]=[e("",1)]))),t[499]||(t[499]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"o"),Q("mi",null,"t")])]),Q("mo",null,"="),Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"S"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",{stretchy:"false"},")"),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])]),Q("mo",null,"="),Q("msub",null,[Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"S")]),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t"),Q("mo",null,"−"),Q("mn",null,"1")])]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"η"),Q("mi",null,"t")]),Q("msub",null,[Q("mi",{mathvariant:"normal"},"∇"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",null,"S"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"t"),Q("mo",null,"−"),Q("mn",null,"1")])])])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),Q("mstyle",{mathcolor:"blue"},[Q("mi",{mathvariant:"bold-italic"},"f")]),Q("mo",{stretchy:"false"},"("),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"S"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",null,","),Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",{mathvariant:"bold-italic"},"q"),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"t")])])]),Q("mo",{stretchy:"false"},")"),Q("mo",null,","),Q("msub",null,[Q("mi",null,"v"),Q("mi",null,"t")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))])]),t[505]||(t[505]=Q("li",null,[Q("p",null,"RNN：把历史数据有效压缩到一个固定大小的State中，而模型参数正好是固定大小的。")],-1)),Q("li",null,[t[504]||(t[504]=Q("p",null,"类比",-1)),Q("ul",null,[Q("li",null,[t[502]||(t[502]=T("压缩任务：RNN；解压器：模型")),Q("mjx-container",N4,[(l(),a("svg",z4,t[500]||(t[500]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})])])],-1)]))),t[501]||(t[501]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"f")])],-1))]),t[503]||(t[503]=T("；压缩包：权重；压缩算法：SGD；压缩率：损失L"))])])])])]),t[852]||(t[852]=e("",9)),Q("div",X4,[t[523]||(t[523]=Q("div",{class:"custom-block-title"},"Softmax Tiling",-1)),t[524]||(t[524]=Q("p",null,[T("参考文章："),Q("a",{href:"https://zhuanlan.zhihu.com/p/683191121",target:"_blank",rel:"noreferrer"},"FlashAttention中的softmax快分块计算详解")],-1)),Q("ul",null,[Q("li",null,[t[520]||(t[520]=Q("strong",null,"数值稳定",-1)),t[521]||(t[521]=T("：")),Q("mark",null,[t[513]||(t[513]=T("避免数值")),Q("mjx-container",G4,[(l(),a("svg",J4,t[509]||(t[509]=[e("",1)]))),t[510]||(t[510]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")])])])])],-1))]),t[514]||(t[514]=T("过大溢出，每个元素都减去最大值得")),Q("mjx-container",q4,[(l(),a("svg",K4,t[511]||(t[511]=[e("",1)]))),t[512]||(t[512]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",null,"−"),Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"x"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")")])])])],-1))])]),Q("ul",null,[Q("li",null,[Q("strong",null,[t[517]||(t[517]=T("改进后")),Q("mjx-container",F4,[(l(),a("svg",W4,t[515]||(t[515]=[e("",1)]))),t[516]||(t[516]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"e"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",null,"−"),Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"x"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")")])])])],-1))]),t[518]||(t[518]=T("落在[0,1]区间"))]),t[519]||(t[519]=T("。softmax结果和原softmax一致"))])])]),t[522]||(t[522]=e("",1))])]),t[853]||(t[853]=Q("p",null,[Q("strong",null,"3、Flash Attention 算法")],-1)),Q("div",U4,[t[536]||(t[536]=Q("div",{class:"custom-block-title"},"Flash Attention 算法",-1)),Q("ul",null,[t[533]||(t[533]=Q("li",null,"主要目标：避免从GPU-HBM中读取和写入注意力矩阵。",-1)),t[534]||(t[534]=Q("li",null,[Q("strong",null,"计算softmax不需要全局信息"),Q("ul",null,[Q("li",null,[T("把输入分块，以分块增量方式计算softmax，即 "),Q("code",null,"softmax tiling"),T("算法。")])])],-1)),Q("li",null,[Q("strong",null,[t[527]||(t[527]=T("反向传播不存储中间attention矩阵(")),Q("mjx-container",$4,[(l(),a("svg",Y4,t[525]||(t[525]=[e("",1)]))),t[526]||(t[526]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msup",null,[Q("mi",null,"N"),Q("mn",null,"2")])])],-1))]),t[528]||(t[528]=T(")"))]),t[529]||(t[529]=T("，")),t[530]||(t[530]=Q("strong",null,"只存储softmax归一化系数",-1)),t[531]||(t[531]=T("。 ")),t[532]||(t[532]=Q("ul",null,[Q("li",null,"标准Attention：需要把过程中的S、P写入HBM中，矩阵大小和输入序列长度有关，非常大"),Q("li",null,[Q("strong",null,"FlashAttention"),T("："),Q("strong",null,"不使用中间注意力矩阵"),T("，"),Q("mark",null,"通过存储归一化因子来减少HBM内存的消耗"),T("。")])],-1))]),t[535]||(t[535]=Q("li",null,[T("算法流程，具体见论文。 "),Q("ul",null,[Q("li",null,"简单讲：每次只计算一个block的只，通过多轮双for循环完成注意力计算。")])],-1))])]),t[854]||(t[854]=e("",6)),Q("div",Q6,[t[549]||(t[549]=Q("div",{class:"custom-block-title"},"Batch Normalization",-1)),t[550]||(t[550]=Q("p",null,[Q("strong",null,"BN定义")],-1)),Q("ul",null,[t[545]||(t[545]=Q("li",null,[T("范围："),Q("strong",null,"对一个Batch的样本"),T("，"),Q("strong",null,"为每个通道数据做归一化")],-1)),t[546]||(t[546]=Q("li",null,[Q("strong",null,"求均值、方差"),T("，"),Q("mark",null,"让数据标准化到(0, 1)正态分布"),T("，避免发生梯度消失")],-1)),Q("li",null,[Q("strong",null,[t[541]||(t[541]=T("加入缩放")),Q("mjx-container",t6,[(l(),a("svg",T6,t[537]||(t[537]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D6FE",d:"M31 249Q11 249 11 258Q11 275 26 304T66 365T129 418T206 441Q233 441 239 440Q287 429 318 386T371 255Q385 195 385 170Q385 166 386 166L398 193Q418 244 443 300T486 391T508 430Q510 431 524 431H537Q543 425 543 422Q543 418 522 378T463 251T391 71Q385 55 378 6T357 -100Q341 -165 330 -190T303 -216Q286 -216 286 -188Q286 -138 340 32L346 51L347 69Q348 79 348 100Q348 257 291 317Q251 355 196 355Q148 355 108 329T51 260Q49 251 47 251Q45 249 31 249Z",style:{"stroke-width":"3"}})])])],-1)]))),t[538]||(t[538]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"γ")])],-1))]),t[542]||(t[542]=T("和平移变量")),Q("mjx-container",a6,[(l(),a("svg",l6,t[539]||(t[539]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D6FD",d:"M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z",style:{"stroke-width":"3"}})])])],-1)]))),t[540]||(t[540]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"β")])],-1))])]),t[543]||(t[543]=T("：使数据在归一化后")),t[544]||(t[544]=Q("mark",null,"保留原有学习来的特征",-1))])]),Q("mjx-container",e6,[(l(),a("svg",s6,t[547]||(t[547]=[e("",1)]))),t[548]||(t[548]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"y"),Q("mo",null,"="),Q("mi",null,"γ"),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"x"),Q("mo",{stretchy:"false"},"^")])]),Q("mo",null,"+"),Q("mi",null,"β"),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("mi",null,"x"),Q("mo",{stretchy:"false"},"^")])]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"x"),Q("mo",null,"−"),Q("mi",null,"E"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")")]),Q("msqrt",null,[Q("mi",null,"V"),Q("mi",null,"a"),Q("mi",null,"r"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"+"),Q("mi",null,"ϵ")])])])],-1))]),t[551]||(t[551]=e("",4))]),t[855]||(t[855]=e("",8)),Q("div",m6,[t[561]||(t[561]=Q("div",{class:"custom-block-title"},"Deep Norm",-1)),t[562]||(t[562]=Q("p",null,[Q("strong",null,"定义")],-1)),Q("ul",null,[t[560]||(t[560]=Q("li",null,[T("范围：对Post-Layer Norm的改进。 "),Q("ul",null,[Q("li",null,"Post-LN问题：不稳定性来自梯度消失以及太大模型更新。")])],-1)),Q("li",null,[t[559]||(t[559]=T("算法： ")),Q("ul",null,[Q("li",null,[Q("strong",null,[t[554]||(t[554]=T("在LN之前，乘以")),Q("mjx-container",o6,[(l(),a("svg",d6,t[552]||(t[552]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D6FC",d:"M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z",style:{"stroke-width":"3"}})])])],-1)]))),t[553]||(t[553]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"α")])],-1))]),t[555]||(t[555]=T("扩大残差连接"))]),t[556]||(t[556]=T("。")),t[557]||(t[557]=Q("code",null,"LayerNorm(x * alpha + f(x))",-1))]),t[558]||(t[558]=Q("li",null,[T("以β减小部分参数的初始化范围，"),Q("a",{href:"https://plmsmile.github.io/posts/olds/dl/35-nerual-network-optim.html#xavier%E5%9D%87%E5%8C%80%E5%88%86%E5%B8%83%E5%88%9D%E5%A7%8B%E5%8C%96",target:"_blank",rel:"noreferrer"},"Xavier均匀分布初始化")],-1))])])]),t[563]||(t[563]=Q("p",null,[Q("strong",null,"优点")],-1)),t[564]||(t[564]=Q("ul",null,[Q("li",null,"具备Post-LN的好性能，且具有Pre-LN 的稳定训练")],-1))]),t[856]||(t[856]=Q("h3",{id:"rms-norm-2019-prms-norm",tabindex:"-1"},[T("RMS Norm(2019) & pRMS Norm "),Q("a",{class:"header-anchor",href:"#rms-norm-2019-prms-norm","aria-label":'Permalink to "RMS Norm(2019) & pRMS Norm"'},"​")],-1)),Q("div",n6,[t[575]||(t[575]=Q("div",{class:"custom-block-title"},"RMS Norm",-1)),t[576]||(t[576]=Q("p",null,[Q("strong",null,"RMS Norm")],-1)),Q("ul",null,[t[572]||(t[572]=Q("li",null,[Q("p",null,[T("针对LayerNorm改进，主要区别在于"),Q("mark",null,"去掉了减去均值的部分"),T("，采用"),Q("strong",null,"根均方"),T("。")])],-1)),Q("li",null,[Q("p",null,[t[567]||(t[567]=T("RMS 操作 (")),t[568]||(t[568]=Q("code",null,"Root Mean Squre",-1)),t[569]||(t[569]=T(")：")),Q("mjx-container",r6,[(l(),a("svg",i6,t[565]||(t[565]=[e("",1)]))),t[566]||(t[566]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"R"),Q("mi",null,"M"),Q("mi",null,"S"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("msqrt",null,[Q("mfrac",null,[Q("mn",null,"1"),Q("mi",null,"n")]),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mi",null,"n")]),Q("msubsup",null,[Q("mi",null,"x"),Q("mi",null,"i"),Q("mn",null,"2")])])])],-1))])]),Q("mjx-container",h6,[(l(),a("svg",g6,t[570]||(t[570]=[e("",1)]))),t[571]||(t[571]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mover",null,[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",{stretchy:"false"},"^")])]),Q("mo",null,"="),Q("mfrac",null,[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mrow",null,[Q("mi",null,"R"),Q("mi",null,"M"),Q("mi",null,"S"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")")])]),Q("mo",null,"⋅"),Q("mi",null,"γ"),Q("mo",null,"+"),Q("mi",null,"β"),Q("mo",null,"="),Q("mfrac",null,[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("msqrt",null,[Q("mfrac",null,[Q("mn",null,"1"),Q("mi",null,"n")]),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mi",null,"n")]),Q("msubsup",null,[Q("mi",null,"x"),Q("mi",null,"i"),Q("mn",null,"2")])])]),Q("mo",null,"⋅"),Q("mi",null,"γ"),Q("mo",null,"+"),Q("mi",null,"β")])],-1))])])]),t[577]||(t[577]=Q("p",null,[Q("strong",null,"pRMS Norm")],-1)),t[578]||(t[578]=Q("ul",null,[Q("li",null,"核心思想：用部分数据，代替全部的计算，p为前p%的数据")],-1)),Q("mjx-container",p6,[(l(),a("svg",H6,t[573]||(t[573]=[e("",1)]))),t[574]||(t[574]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"R"),Q("mi",null,"M"),Q("mi",null,"S"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("msqrt",null,[Q("mfrac",null,[Q("mn",null,"1"),Q("mi",null,"k")]),Q("munderover",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,"="),Q("mn",null,"1")]),Q("mi",null,"k")]),Q("msubsup",null,[Q("mi",null,"x"),Q("mi",null,"i"),Q("mn",null,"2")])])])],-1))])]),t[857]||(t[857]=e("",11)),Q("div",u6,[t[616]||(t[616]=Q("div",{class:"custom-block-title"},"绝对位置编码",-1)),Q("p",null,[t[583]||(t[583]=T("核心思想：")),Q("strong",null,[t[581]||(t[581]=T("直接为输入")),Q("mjx-container",L6,[(l(),a("svg",c6,t[579]||(t[579]=[e("",1)]))),t[580]||(t[580]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"k")])])],-1))]),t[582]||(t[582]=T("向量增加一个位置向量"))])]),Q("mjx-container",w6,[(l(),a("svg",x6,t[584]||(t[584]=[e("",1)]))),t[585]||(t[585]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"k")]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"k")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"k")]),Q("mo",null,",")]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"k")]),Q("mtext",null,"为位置编码，与位置k有关"),Q("mi",null,"，")])],-1))]),t[617]||(t[617]=Q("p",null,[Q("strong",null,"1. 可训练式")],-1)),Q("ul",null,[Q("li",null,[t[588]||(t[588]=T("定义：把位置向量作为可训练的参数，如")),Q("mjx-container",f6,[(l(),a("svg",y6,t[586]||(t[586]=[e("",1)]))),t[587]||(t[587]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"n"),Q("mo",null,"∗"),Q("mi",null,"d")])],-1))]),t[589]||(t[589]=T("维度。"))]),t[590]||(t[590]=Q("li",null,[T("缺点："),Q("strong",null,"没有外推性"),T("，难处理超过最大长度n的位置")],-1))]),t[618]||(t[618]=Q("p",null,[Q("strong",null,"2. 三角式")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[t[601]||(t[601]=T("定义：")),Q("mjx-container",k6,[(l(),a("svg",V6,t[591]||(t[591]=[e("",1)]))),t[592]||(t[592]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"k")])])],-1))]),t[602]||(t[602]=T("中")),Q("strong",null,[t[597]||(t[597]=T("第")),Q("mjx-container",M6,[(l(),a("svg",Z6,t[593]||(t[593]=[e("",1)]))),t[594]||(t[594]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mn",null,"2"),Q("mi",null,"i")])],-1))]),t[598]||(t[598]=T("和")),Q("mjx-container",b6,[(l(),a("svg",v6,t[595]||(t[595]=[e("",1)]))),t[596]||(t[596]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mn",null,"2"),Q("mi",null,"i"),Q("mo",null,"+"),Q("mn",null,"1")])],-1))]),t[599]||(t[599]=Q("strong",null,"各位置的值，分别",-1)),t[600]||(t[600]=T("由sin和cos函数来定义"))]),t[603]||(t[603]=T("。"))]),Q("mjx-container",D6,[(l(),a("svg",_6,t[604]||(t[604]=[e("",1)]))),t[605]||(t[605]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"k"),Q("mo",null,","),Q("mn",null,"2"),Q("mi",null,"i")])])]),Q("mtd",null,[Q("mo",null,"="),Q("mi",null,"sin"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mo",{stretchy:"false"},"("),Q("mfrac",null,[Q("mi",null,"k"),Q("msup",null,[Q("mn",null,"10000"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"2"),Q("mi",null,"i"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("mi",null,"d")])])]),Q("mo",{stretchy:"false"},")")])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"k"),Q("mo",null,","),Q("mn",null,"2"),Q("mi",null,"i"),Q("mo",null,"+"),Q("mn",null,"1")])])]),Q("mtd",null,[Q("mo",null,"="),Q("mi",null,"cos"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mo",{stretchy:"false"},"("),Q("mfrac",null,[Q("mi",null,"k"),Q("msup",null,[Q("mn",null,"10000"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"2"),Q("mi",null,"i"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("mi",null,"d")])])]),Q("mo",{stretchy:"false"},")")])])])])],-1))])]),t[606]||(t[606]=Q("li",null,[Q("p",null,[T("优点：三角函数有"),Q("strong",null,"一定外推性"),T("，不用训练。")])],-1)),t[607]||(t[607]=Q("li",null,[Q("p",null,"缺点：但现在很少看到这种绝对位置编码的工作。")],-1))]),t[619]||(t[619]=Q("p",null,[Q("strong",null,"3. 递归式")],-1)),Q("ul",null,[Q("li",null,[t[610]||(t[610]=T("定义：通过递归计算位置编码，")),Q("mjx-container",j6,[(l(),a("svg",A6,t[608]||(t[608]=[e("",1)]))),t[609]||(t[609]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"k"),Q("mo",null,"+"),Q("mn",null,"1")])]),Q("mo",null,"="),Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"k")]),Q("mo",{stretchy:"false"},")")])],-1))]),t[611]||(t[611]=T("，示例")),t[612]||(t[612]=Q("a",{href:"https://arxiv.org/abs/2003.09229",target:"_blank",rel:"noreferrer"},"论文",-1)),t[613]||(t[613]=T("。"))]),t[614]||(t[614]=Q("li",null,"优点：具有较好外推性",-1)),t[615]||(t[615]=Q("li",null,"缺点：牺牲并行性，计算不足",-1))])]),t[858]||(t[858]=Q("h3",{id:"相对位置编码",tabindex:"-1"},[T("相对位置编码 "),Q("a",{class:"header-anchor",href:"#相对位置编码","aria-label":'Permalink to "相对位置编码"'},"​")],-1)),t[859]||(t[859]=Q("p",null,[Q("strong",null,"核心思想")],-1)),t[860]||(t[860]=Q("ul",null,[Q("li",null,[T("不建模输入位置的全局信息，"),Q("strong",null,"在计算attention时，考虑当前位置和目标位置的相对距离")]),Q("li",null,[T("NLP任务更适合"),Q("strong",null,"相对位置编码"),T("👍。")])],-1)),Q("div",C6,[t[642]||(t[642]=Q("div",{class:"custom-block-title"},"绝对位置编码Attention 公式",-1)),Q("p",null,[t[629]||(t[629]=T("💥")),Q("strong",null,[t[624]||(t[624]=T("计算")),Q("mjx-container",S6,[(l(),a("svg",E6,t[620]||(t[620]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),t[621]||(t[621]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i")])],-1))]),t[625]||(t[625]=T("和")),Q("mjx-container",R6,[(l(),a("svg",O6,t[622]||(t[622]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D457",d:"M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z",style:{"stroke-width":"3"}})])])],-1)]))),t[623]||(t[623]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"j")])],-1))]),t[626]||(t[626]=T("的attention"))]),t[630]||(t[630]=T("，其中")),Q("mjx-container",P6,[(l(),a("svg",B6,t[627]||(t[627]=[e("",1)]))),t[628]||(t[628]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"q"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"、")]),Q("mi",null,"k"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"、")]),Q("mi",null,"v"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"、")]),Q("mi",null,"p")])],-1))]),t[631]||(t[631]=T("均为向量。"))]),Q("mjx-container",I6,[(l(),a("svg",N6,t[632]||(t[632]=[e("",1)]))),t[633]||(t[633]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"f"),Q("mi",null,"q")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",null,","),Q("mi",null,"i"),Q("mo",{stretchy:"false"},")")])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"k"),Q("mi",null,"j")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"j")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"K")]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"f"),Q("mi",null,"k")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,","),Q("mi",null,"j"),Q("mo",{stretchy:"false"},")")])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"v"),Q("mi",null,"j")]),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"j")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"V")]),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"f"),Q("mi",null,"v")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,","),Q("mi",null,"j"),Q("mo",{stretchy:"false"},")")])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"α"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])]),Q("mo",null,"="),Q("mtext",null,"softmax"),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("msubsup",null,[Q("mi",null,"k"),Q("mi",null,"j"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")")])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"o"),Q("mi",null,"i")]),Q("mo",null,"="),Q("munder",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"j")])]),Q("msub",null,[Q("mi",null,"α"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])]),Q("msub",null,[Q("mi",null,"v"),Q("mi",null,"j")])])])])])],-1))]),Q("p",null,[t[637]||(t[637]=T("⭐")),Q("strong",null,[Q("mjx-container",z6,[(l(),a("svg",X6,t[634]||(t[634]=[e("",1)]))),t[635]||(t[635]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("msubsup",null,[Q("mi",null,"k"),Q("mi",null,"j"),Q("mi",null,"T")])])],-1))]),t[636]||(t[636]=T("展开项"))]),t[638]||(t[638]=T("，")),t[639]||(t[639]=Q("strong",null,"后续相对位置编码都是基于此修改",-1))]),Q("mjx-container",G6,[(l(),a("svg",J6,t[640]||(t[640]=[e("",1)]))),t[641]||(t[641]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("msubsup",null,[Q("mi",null,"k"),Q("mi",null,"j"),Q("mi",null,"T")])]),Q("mtd",null,[Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"j")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"K")]),Q("msup",null,[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),Q("mi",null,"T")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")]),Q("mo",{stretchy:"false"},")"),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("mo",null,"⋅"),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"j")]),Q("msup",null,[Q("mo",{stretchy:"false"},")"),Q("mi",null,"T")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"⋅"),Q("mo",{stretchy:"false"},"("),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msubsup",null,[Q("mi",null,"x"),Q("mi",null,"j"),Q("mi",null,"T")]),Q("mo",null,"+"),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msubsup",null,[Q("mi",null,"p"),Q("mi",null,"j"),Q("mi",null,"T")]),Q("mo",{stretchy:"false"},")")])])]),Q("mtr",null,[Q("mtd"),Q("mtd",null,[Q("mo",null,"="),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msubsup",null,[Q("mi",null,"x"),Q("mi",null,"j"),Q("mi",null,"T")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"normal"},"输"),Q("mi",{mathvariant:"normal"},"入"),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"输"),Q("mi",{mathvariant:"normal"},"入"),Q("mi",null,"j")])])]),Q("mo",null,"+"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msubsup",null,[Q("mi",null,"p"),Q("mi",null,"j"),Q("mi",null,"T")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"normal"},"输"),Q("mi",{mathvariant:"normal"},"入"),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"位"),Q("mi",{mathvariant:"normal"},"置"),Q("mi",null,"j")])])]),Q("mo",null,"+"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msubsup",null,[Q("mi",null,"x"),Q("mi",null,"j"),Q("mi",null,"T")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mstyle",{mathcolor:"red"},[Q("mi",{mathvariant:"normal"},"位"),Q("mi",{mathvariant:"normal"},"置"),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"输"),Q("mi",{mathvariant:"normal"},"入"),Q("mi",null,"j")])])]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msubsup",null,[Q("mi",null,"p"),Q("mi",null,"j"),Q("mi",null,"T")])]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",{mathvariant:"normal"},"位"),Q("mi",{mathvariant:"normal"},"置"),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",{mathvariant:"normal"},"位"),Q("mi",{mathvariant:"normal"},"置"),Q("mi",null,"j")])])])])])])])])],-1))])]),Q("div",q6,[t[723]||(t[723]=Q("div",{class:"custom-block-title"},"相对位置编码",-1)),t[724]||(t[724]=Q("p",null,[T("🧠 ​"),Q("strong",null,"1、经典相对位置编码核心思想")],-1)),Q("ul",null,[Q("li",null,[t[652]||(t[652]=Q("p",null,[Q("strong",null,"核心")],-1)),Q("ul",null,[t[651]||(t[651]=Q("li",null,"从绝对位置attention公式出发",-1)),Q("li",null,[Q("mark",null,[t[647]||(t[647]=T("去掉")),Q("mjx-container",K6,[(l(),a("svg",F6,t[643]||(t[643]=[e("",1)]))),t[644]||(t[644]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"j")])])],-1))]),t[648]||(t[648]=T("及复杂内容, 由二元位置向量")),Q("mjx-container",W6,[(l(),a("svg",U6,t[645]||(t[645]=[e("",1)]))),t[646]||(t[646]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])])],-1))]),t[649]||(t[649]=T("来代替"))]),t[650]||(t[650]=T("，主要在softmax和v加权里变换。"))])])]),Q("li",null,[Q("p",null,[t[659]||(t[659]=T("💥")),Q("strong",null,[t[655]||(t[655]=T("相对位置")),Q("mjx-container",$6,[(l(),a("svg",Y6,t[653]||(t[653]=[e("",1)]))),t[654]||(t[654]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])])],-1))])]),t[660]||(t[660]=T(" ：")),Q("mark",null,[t[658]||(t[658]=T("只依赖相对距离")),Q("mjx-container",Q5,[(l(),a("svg",t5,t[656]||(t[656]=[e("",1)]))),t[657]||(t[657]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])],-1))])]),t[661]||(t[661]=T("，再进行截断，缩小至")),t[662]||(t[662]=Q("strong",null,"有限范围",-1)),t[663]||(t[663]=T(" ❤️。"))]),Q("ul",null,[t[667]||(t[667]=Q("li",null,"Clip裁切：把相对距离缩短至有限范围。",-1)),Q("li",null,[Q("mjx-container",T5,[(l(),a("svg",a5,t[664]||(t[664]=[e("",1)]))),t[665]||(t[665]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",{mathvariant:"bold"},"p"),Q("mi",{mathvariant:"bold"},"k")]),Q("mo",{mathvariant:"bold"},","),Q("msub",null,[Q("mi",{mathvariant:"bold"},"p"),Q("mi",{mathvariant:"bold"},"v")])])])],-1))]),t[666]||(t[666]=T("：位置向量"))])])])]),Q("mjx-container",l5,[(l(),a("svg",e5,t[668]||(t[668]=[e("",1)]))),t[669]||(t[669]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msubsup",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")]),Q("mi",null,"K")]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",{mathvariant:"bold"},"p"),Q("mi",{mathvariant:"bold"},"k")])]),Q("mo",{stretchy:"false"},"["),Q("mtext",null,"clip"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j"),Q("mo",null,","),Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"m"),Q("mi",null,"i"),Q("mi",null,"n")])]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"x")])]),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},"]")])]),Q("mtr",null,[Q("mtd",null,[Q("msubsup",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")]),Q("mi",null,"V")]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",{mathvariant:"bold"},"p"),Q("mi",{mathvariant:"bold"},"v")])]),Q("mo",{stretchy:"false"},"["),Q("mtext",null,"clip"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j"),Q("mo",null,","),Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"m"),Q("mi",null,"i"),Q("mi",null,"n")])]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"p"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"m"),Q("mi",null,"a"),Q("mi",null,"x")])]),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},"]")])])])])])],-1))]),t[725]||(t[725]=Q("ul",null,[Q("li",null,[Q("strong",null,"优点"),Q("ul",null,[Q("li",null,[Q("strong",null,"只需要有有限个位置向量，即可表示任意相对位置(因为进行了截断)"),T(" 👍")])])])],-1)),t[726]||(t[726]=Q("p",null,[Q("strong",null,"2、XLNet式相对位置编码")],-1)),Q("ul",null,[Q("li",null,[t[699]||(t[699]=Q("strong",null,"核心",-1)),Q("ul",null,[Q("li",null,[t[687]||(t[687]=T("从公式")),Q("mjx-container",s5,[(l(),a("svg",m5,t[670]||(t[670]=[e("",1)]))),t[671]||(t[671]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",{mathvariant:"bold"},"q"),Q("mi",{mathvariant:"bold"},"i")]),Q("msubsup",null,[Q("mi",{mathvariant:"bold"},"k"),Q("mi",{mathvariant:"bold"},"j"),Q("mi",{mathvariant:"bold"},"T")])])])],-1))]),t[688]||(t[688]=T("展开，")),Q("mark",null,[t[682]||(t[682]=T("把")),Q("mjx-container",o5,[(l(),a("svg",d5,t[672]||(t[672]=[e("",1)]))),t[673]||(t[673]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"j")])])],-1))]),t[683]||(t[683]=T(" 改成相对位置向量")),Q("mjx-container",n5,[(l(),a("svg",r5,t[674]||(t[674]=[e("",1)]))),t[675]||(t[675]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])])])],-1))]),t[684]||(t[684]=T("， 把2个")),Q("mjx-container",i5,[(l(),a("svg",h5,t[676]||(t[676]=[e("",1)]))),t[677]||(t[677]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"p"),Q("mi",null,"i")])])],-1))]),t[685]||(t[685]=T("替换为可训练向量")),Q("mjx-container",g5,[(l(),a("svg",p5,t[678]||(t[678]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D462",d:"M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),t[679]||(t[679]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"u")])],-1))]),t[686]||(t[686]=T("和")),Q("mjx-container",H5,[(l(),a("svg",u5,t[680]||(t[680]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D463",d:"M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z",style:{"stroke-width":"3"}})])])],-1)]))),t[681]||(t[681]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"v")])],-1))])])]),Q("li",null,[Q("mjx-container",L5,[(l(),a("svg",c5,t[689]||(t[689]=[e("",1)]))),t[690]||(t[690]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])])])],-1))]),t[691]||(t[691]=T("不做截断，用了Sinusoidal式的生成方案。"))]),Q("li",null,[Q("strong",null,[Q("mjx-container",w5,[(l(),a("svg",x5,t[692]||(t[692]=[e("",1)]))),t[693]||(t[693]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"v"),Q("mi",null,"j")])])],-1))]),t[694]||(t[694]=T("加权时不再需要位置偏置"))]),t[697]||(t[697]=T("，直接是")),Q("mjx-container",f5,[(l(),a("svg",y5,t[695]||(t[695]=[e("",1)]))),t[696]||(t[696]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"o"),Q("mi",null,"i")]),Q("mo",null,"="),Q("munder",null,[Q("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),Q("mi",null,"j")]),Q("msub",null,[Q("mi",null,"α"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])]),Q("mtext",null," "),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mtext",null," "),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"v")])])],-1))])]),t[698]||(t[698]=Q("li",null,[Q("mark",null,"后期工作相对位置只在attention权重上计算，不在v上了"),T("。")],-1))])])]),t[727]||(t[727]=Q("p",null,[Q("strong",null,"3、T5")],-1)),Q("ul",null,[Q("li",null,[Q("p",null,[t[702]||(t[702]=Q("strong",null,"核心",-1)),t[703]||(t[703]=T("：从")),Q("mjx-container",k5,[(l(),a("svg",V5,t[700]||(t[700]=[e("",1)]))),t[701]||(t[701]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("msub",null,[Q("mi",{mathvariant:"bold"},"q"),Q("mi",{mathvariant:"bold"},"i")]),Q("msubsup",null,[Q("mi",{mathvariant:"bold"},"k"),Q("mi",{mathvariant:"bold"},"j"),Q("mi",{mathvariant:"bold"},"T")])])])],-1))]),t[704]||(t[704]=T("展开出发做简化。认为输入和位置当解耦不做交互，直接删掉很多项，增加相对位置编码可训练参数"))]),Q("mjx-container",M5,[(l(),a("svg",Z5,t[705]||(t[705]=[e("",1)]))),t[706]||(t[706]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("msubsup",null,[Q("mi",null,"k"),Q("mi",null,"j"),Q("mi",null,"T")]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"i")]),Q("msub",null,[Q("mi",null,"W"),Q("mi",null,"Q")]),Q("msubsup",null,[Q("mi",null,"W"),Q("mi",null,"K"),Q("mi",null,"T")]),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"j")]),Q("mo",null,"+"),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"β"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])])])])],-1))])]),Q("li",null,[Q("p",null,[Q("mjx-container",b5,[(l(),a("svg",v5,t[707]||(t[707]=[e("",1)]))),t[708]||(t[708]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"β"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])])])],-1))]),t[715]||(t[715]=T("不做")),Q("mjx-container",D5,[(l(),a("svg",_5,t[709]||(t[709]=[e("",1)]))),t[710]||(t[710]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])],-1))]),t[716]||(t[716]=T("截断，做分桶处理，相对位置")),Q("mjx-container",j5,[(l(),a("svg",A5,t[711]||(t[711]=[e("",1)]))),t[712]||(t[712]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])],-1))]),t[717]||(t[717]=T("对应")),Q("mjx-container",C5,[(l(),a("svg",S5,t[713]||(t[713]=[e("",1)]))),t[714]||(t[714]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j"),Q("mo",{stretchy:"false"},")")])],-1))]),t[718]||(t[718]=T("。近的位置使用独立精细编码，越远越共用一个位置编码。"))])])]),t[728]||(t[728]=Q("p",null,[Q("strong",null,"4、Deberta式")],-1)),Q("ul",null,[Q("li",null,[t[721]||(t[721]=T("核心：从")),Q("mjx-container",E5,[(l(),a("svg",R5,t[719]||(t[719]=[e("",1)]))),t[720]||(t[720]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("msubsup",null,[Q("mi",null,"k"),Q("mi",null,"j"),Q("mi",null,"T")])])],-1))]),t[722]||(t[722]=T("出发，扔掉第4项，保留2、3项并改为相对位置编码。"))])])]),t[861]||(t[861]=e("",4)),Q("div",O5,[t[813]||(t[813]=Q("div",{class:"custom-block-title"},"RoPE",-1)),t[814]||(t[814]=Q("p",null,[T("🌟"),Q("strong",null,"核心思想")],-1)),Q("ul",null,[t[746]||(t[746]=Q("li",null,[Q("strong",null,"RoPE位置编码通过将一个向量旋转某个角度，为其赋予位置信息"),T("。")],-1)),t[747]||(t[747]=Q("li",null,[T("RoPE"),Q("strong",null,"通过绝对位置方式实现相对位置编码"),T("😍， 综合了绝对和相对的优点。")],-1)),Q("li",null,[t[741]||(t[741]=T("为")),Q("mjx-container",P5,[(l(),a("svg",B5,t[729]||(t[729]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D45E",d:"M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),t[730]||(t[730]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"q")])],-1))]),t[742]||(t[742]=T("、")),Q("mjx-container",I5,[(l(),a("svg",N5,t[731]||(t[731]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D458",d:"M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z",style:{"stroke-width":"3"}})])])],-1)]))),t[732]||(t[732]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"k")])],-1))]),t[743]||(t[743]=T("向量")),Q("strong",null,[t[737]||(t[737]=T("注入绝对位置信息")),Q("mjx-container",z5,[(l(),a("svg",X5,t[733]||(t[733]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),t[734]||(t[734]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i")])],-1))]),t[738]||(t[738]=T(",")),Q("mjx-container",G5,[(l(),a("svg",J5,t[735]||(t[735]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D457",d:"M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z",style:{"stroke-width":"3"}})])])],-1)]))),t[736]||(t[736]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"j")])],-1))])]),t[744]||(t[744]=T(" (注：很多文章使用的是m和n，这里为了保持和上文一致所以使用")),Q("mjx-container",q5,[(l(),a("svg",K5,t[739]||(t[739]=[e("",1)]))),t[740]||(t[740]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i"),Q("mo",null,","),Q("mi",null,"j")])],-1))]),t[745]||(t[745]=T(")"))])]),Q("mjx-container",F5,[(l(),a("svg",W5,t[748]||(t[748]=[e("",1)]))),t[749]||(t[749]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"f"),Q("mi",null,"q")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("mo",null,","),Q("mi",null,"i"),Q("mo",{stretchy:"false"},")"),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mi",null,"k"),Q("mi",null,"j")]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"f"),Q("mi",null,"k")]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"k"),Q("mi",null,"j")]),Q("mo",null,","),Q("mi",null,"j"),Q("mo",{stretchy:"false"},")")])],-1))]),Q("ul",null,[Q("li",null,[Q("strong",null,[Q("mjx-container",U5,[(l(),a("svg",$5,t[750]||(t[750]=[e("",1)]))),t[751]||(t[751]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")])])],-1))]),t[756]||(t[756]=T(" 和 ")),Q("mjx-container",Y5,[(l(),a("svg",Q0,t[752]||(t[752]=[e("",1)]))),t[753]||(t[753]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"k"),Q("mi",null,"j")])])],-1))]),t[757]||(t[757]=T(" 向量内积时，带上相对位置信息")),Q("mjx-container",t0,[(l(),a("svg",T0,t[754]||(t[754]=[e("",1)]))),t[755]||(t[755]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])],-1))])])])]),Q("mjx-container",a0,[(l(),a("svg",l0,t[758]||(t[758]=[e("",1)]))),t[759]||(t[759]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k"),Q("mo",null,"="),Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"i"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"⋅"),Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"k"),Q("mo",null,","),Q("mi",null,"j"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mi",null,"g"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"k"),Q("mo",null,","),Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j"),Q("mo",{stretchy:"false"},")")])])],-1))]),t[815]||(t[815]=Q("p",null,[Q("strong",null,"推导过程")],-1)),Q("ul",null,[Q("li",null,[t[796]||(t[796]=Q("p",null,"通过复数方程找到使等式成立的g函数，最终求解得到",-1)),Q("ul",null,[Q("li",null,[t[764]||(t[764]=T("💥")),Q("mjx-container",e0,[(l(),a("svg",s0,t[760]||(t[760]=[e("",1)]))),t[761]||(t[761]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"m"),Q("mo",{stretchy:"false"},")")])])],-1))]),t[765]||(t[765]=T("公式，")),t[766]||(t[766]=Q("strong",null,"绝对位置编码",-1)),t[767]||(t[767]=T(" (假设是q是二维向量, ")),Q("mjx-container",m0,[(l(),a("svg",o0,t[762]||(t[762]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D703",d:"M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z",style:{"stroke-width":"3"}})])])],-1)]))),t[763]||(t[763]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"θ")])],-1))]),t[768]||(t[768]=T("是常数)"))])]),Q("mjx-container",d0,[(l(),a("svg",n0,t[769]||(t[769]=[e("",1)]))),t[770]||(t[770]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"i"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mi",null,"f"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"m"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("msub",null,[Q("mi",null,"R"),Q("mi",null,"m")]),Q("mo",null,"⋅"),Q("mi",null,"q")]),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"("),Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("mi",null,"cos"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"m"),Q("mi",null,"θ")]),Q("mtd",null,[Q("mo",null,"−"),Q("mi",null,"sin"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"m"),Q("mi",null,"θ")])]),Q("mtr",null,[Q("mtd",null,[Q("mi",null,"sin"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"m"),Q("mi",null,"θ")]),Q("mtd",null,[Q("mo",null,"−"),Q("mi",null,"cos"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"m"),Q("mi",null,"θ")])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},")")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mtext",null,"旋转矩阵")])]),Q("mo",null,"⋅"),Q("munder",null,[Q("mrow",{"data-mjx-texclass":"OP"},[Q("munder",null,[Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"("),Q("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"0")])])]),Q("mtr",null,[Q("mtd",null,[Q("msub",null,[Q("mi",null,"q"),Q("mn",null,"1")])])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},")")]),Q("mo",null,"⏟")])]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"q"),Q("mi",{mathvariant:"normal"},"向"),Q("mi",{mathvariant:"normal"},"量")])])])])])],-1))]),Q("ul",null,[Q("li",null,[t[773]||(t[773]=T("💥 ")),Q("mjx-container",r0,[(l(),a("svg",i0,t[771]||(t[771]=[e("",1)]))),t[772]||(t[772]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"g"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"k"),Q("mo",null,","),Q("mi",null,"m"),Q("mo",null,"−"),Q("mi",null,"n"),Q("mo",{stretchy:"false"},")")])])],-1))]),t[774]||(t[774]=T(" 公式，")),t[775]||(t[775]=Q("strong",null,"相对位置融入",-1))])]),Q("mjx-container",h0,[(l(),a("svg",g0,t[776]||(t[776]=[e("",1)]))),t[777]||(t[777]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mstyle",{mathcolor:"blue"},[Q("mi",null,"q"),Q("mo",null,"⋅"),Q("mi",null,"k"),Q("mo",null,"="),Q("mi",null,"g"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"q"),Q("mo",null,","),Q("mi",null,"k"),Q("mo",null,","),Q("mi",null,"m"),Q("mo",null,"−"),Q("mi",null,"n"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"m")]),Q("mo",null,"⋅"),Q("msubsup",null,[Q("mi",null,"k"),Q("mi",null,"n"),Q("mi",null,"T")]),Q("mo",null,"="),Q("mo",null,"⋯"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("msup",null,[Q("mi",null,"q"),Q("mi",null,"T")]),Q("msub",null,[Q("mi",null,"R"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"m"),Q("mo",null,"−"),Q("mi",null,"n")])]),Q("mi",null,"k")])])])],-1))]),Q("ul",null,[t[795]||(t[795]=Q("li",null,"多维向量旋转：多维向量，两两一组，分别旋转，得到旋转公式。",-1)),Q("li",null,[t[792]||(t[792]=Q("strong",null,"远程衰减",-1)),t[793]||(t[793]=T("：")),Q("mjx-container",p0,[(l(),a("svg",H0,t[778]||(t[778]=[e("",1)]))),t[779]||(t[779]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"θ"),Q("mi",null,"i")]),Q("mo",null,"="),Q("msup",null,[Q("mn",null,"10000"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"−"),Q("mn",null,"2"),Q("mi",null,"i"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("mi",null,"d")])])])],-1))]),t[794]||(t[794]=T("。 ")),Q("ul",null,[Q("li",null,[t[789]||(t[789]=T("相反，如果")),Q("mjx-container",u0,[(l(),a("svg",L0,t[780]||(t[780]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D703",d:"M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z",style:{"stroke-width":"3"}})])])],-1)]))),t[781]||(t[781]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"θ")])],-1))]),t[790]||(t[790]=T("是1，")),Q("strong",null,[t[786]||(t[786]=T("随着")),Q("mjx-container",c0,[(l(),a("svg",w0,t[782]||(t[782]=[e("",1)]))),t[783]||(t[783]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"i"),Q("mo",null,"−"),Q("mi",null,"j")])],-1))]),t[787]||(t[787]=T("距离增加，")),Q("mjx-container",x0,[(l(),a("svg",f0,t[784]||(t[784]=[e("",1)]))),t[785]||(t[785]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"q"),Q("mi",null,"i")]),Q("mo",null,"⋅"),Q("msub",null,[Q("mi",null,"k"),Q("mi",null,"j")])])],-1))]),t[788]||(t[788]=T("内积会震荡不会远程衰减"))]),t[791]||(t[791]=T("，这就是问题。"))])])])])])]),t[816]||(t[816]=Q("p",null,[Q("strong",null,"旋转矩阵")],-1)),Q("ul",null,[Q("li",null,[t[805]||(t[805]=T("二维空间存在旋转矩阵")),Q("mjx-container",y0,[(l(),a("svg",k0,t[797]||(t[797]=[e("",1)]))),t[798]||(t[798]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"M"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"θ"),Q("mo",{stretchy:"false"},")")])],-1))]),t[806]||(t[806]=T("，二维向量左乘")),Q("mjx-container",V0,[(l(),a("svg",M0,t[799]||(t[799]=[e("",1)]))),t[800]||(t[800]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"M"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"θ"),Q("mo",{stretchy:"false"},")")])],-1))]),t[807]||(t[807]=T("，相当于")),Q("strong",null,[t[803]||(t[803]=T("逆时针旋转")),Q("mjx-container",Z0,[(l(),a("svg",b0,t[801]||(t[801]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D703",d:"M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z",style:{"stroke-width":"3"}})])])],-1)]))),t[802]||(t[802]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"θ")])],-1))]),t[804]||(t[804]=T("弧度"))]),t[808]||(t[808]=T("。")),t[809]||(t[809]=Q("code",null,"RoPE",-1)),t[810]||(t[810]=T("旋转编码名称的来源。"))])]),Q("mjx-container",v0,[(l(),a("svg",D0,t[811]||(t[811]=[e("",1)]))),t[812]||(t[812]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"M"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"θ"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"("),Q("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[Q("mtr",null,[Q("mtd",null,[Q("mi",null,"cos"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"θ")]),Q("mtd",null,[Q("mo",null,"−"),Q("mi",null,"sin"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"θ")])]),Q("mtr",null,[Q("mtd",null,[Q("mi",null,"sin"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"θ")]),Q("mtd",null,[Q("mo",null,"−"),Q("mi",null,"cos"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mi",null,"θ")])])]),Q("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1))]),t[817]||(t[817]=Q("ul",null,[Q("li",null,"只要对向量进行旋转，就能添加对应的位置信息，且具有周期性。")],-1))]),t[862]||(t[862]=Q("img",{src:"https://pic4.zhimg.com/v2-7a27119e4fe9272ce6c26450ad8070ad_1440w.jpg",style:{display:"block",margin:"auto"},width:"80%"},null,-1)),t[863]||(t[863]=Q("h3",{id:"alibi-attention-with-linear-bias",tabindex:"-1"},[T("ALiBi (Attention with Linear Bias) "),Q("a",{class:"header-anchor",href:"#alibi-attention-with-linear-bias","aria-label":'Permalink to "ALiBi (Attention with Linear Bias)"'},"​")],-1)),Q("div",_0,[t[828]||(t[828]=Q("div",{class:"custom-block-title"},"Attention with Linear Bias",-1)),t[829]||(t[829]=Q("p",null,[Q("strong",null,"核心")],-1)),Q("ul",null,[t[826]||(t[826]=Q("li",null,"目的：解决训练推理长度不一致的问题，如 训练 1024，推理 2048",-1)),Q("li",null,[t[822]||(t[822]=T("思想：")),Q("strong",null,[t[820]||(t[820]=T("在")),Q("mjx-container",j0,[(l(),a("svg",A0,t[818]||(t[818]=[e("",1)]))),t[819]||(t[819]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Q"),Q("msup",null,[Q("mi",null,"K"),Q("mi",null,"T")])])],-1))]),t[821]||(t[821]=T("计算时加一个阈值好的偏置"))]),t[823]||(t[823]=T("，偏置包括了Q和K的")),t[824]||(t[824]=Q("strong",null,"相对位置",-1)),t[825]||(t[825]=T("，相距越远贡献越低。不直接输入位置编码。"))]),t[827]||(t[827]=Q("li",null,"外推性会更好点。",-1))]),t[830]||(t[830]=Q("img",{src:"https://wdndev.github.io/llm_interview_note/02.%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84/3.%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81/image/image_B907xoFOlR.png",style:{display:"block",margin:"auto"},width:"80%"},null,-1))]),t[864]||(t[864]=e("",6)),Q("mjx-container",C0,[(l(),a("svg",S0,t[831]||(t[831]=[e("",1)]))),t[832]||(t[832]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"F"),Q("mi",null,"F"),Q("mi",null,"N"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mtext",null,"Linear"),Q("mo",{stretchy:"false"},"("),Q("mtext",null,"ReLU"),Q("mo",{stretchy:"false"},"("),Q("mtext",null,"Linear"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mstyle",{mathcolor:"red"},[Q("mtext",null,"ReLU"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("msub",null,[Q("mi",null,"W"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"b"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"⋅"),Q("msub",null,[Q("mi",null,"W"),Q("mn",null,"2")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"b"),Q("mn",null,"2")])])])],-1))]),t[865]||(t[865]=e("",4)),Q("mjx-container",E0,[(l(),a("svg",R0,t[833]||(t[833]=[e("",1)]))),t[834]||(t[834]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mtext",null,"GeLU"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mn",null,"0.5"),Q("mo",null,"⋅"),Q("mi",null,"x"),Q("mo",null,"⋅"),Q("mrow",{"data-mjx-texclass":"INNER"},[Q("mo",{"data-mjx-texclass":"OPEN"},"("),Q("mn",null,"1"),Q("mo",null,"+"),Q("mi",null,"tanh"),Q("mo",{"data-mjx-texclass":"NONE"},"⁡"),Q("mo",{stretchy:"false"},"("),Q("msqrt",null,[Q("mfrac",null,[Q("mn",null,"2"),Q("mi",null,"π")])]),Q("mo",null,"⋅"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",null,"+"),Q("mn",null,"0.044715"),Q("mo",null,"⋅"),Q("msup",null,[Q("mi",null,"x"),Q("mn",null,"3")]),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},")"),Q("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1))]),t[866]||(t[866]=Q("img",{src:"https://wdndev.github.io/llm_interview_note/02.%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84/6.%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/image/image_IPa0sZKGAr.png",style:{display:"block",margin:"auto"},width:"80%"},null,-1)),t[867]||(t[867]=Q("h3",{id:"swish",tabindex:"-1"},[T("Swish "),Q("a",{class:"header-anchor",href:"#swish","aria-label":'Permalink to "Swish"'},"​")],-1)),Q("ul",null,[t[839]||(t[839]=Q("li",null,"特点：接近0时，像线性函数；远离0时，具有非线性特性。",-1)),t[840]||(t[840]=Q("li",null,"优点：相比ReLU/Tanh等具有更好性能和收敛速度。",-1)),t[841]||(t[841]=Q("li",null,"缺点：计算使用sigmoid，开销大。",-1)),Q("li",null,[t[837]||(t[837]=T("公式如下，")),Q("mjx-container",O0,[(l(),a("svg",P0,t[835]||(t[835]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D6FD",d:"M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z",style:{"stroke-width":"3"}})])])],-1)]))),t[836]||(t[836]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"β")])],-1))]),t[838]||(t[838]=T("是可调节参数。"))])]),Q("mjx-container",B0,[(l(),a("svg",I0,t[842]||(t[842]=[e("",1)]))),t[843]||(t[843]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mtext",null,"Swish"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mi",null,"x"),Q("mo",null,"⋅"),Q("mtext",null,"sigmoid"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"β"),Q("mo",null,"⋅"),Q("mi",null,"x"),Q("mo",{stretchy:"false"},")")])],-1))]),t[868]||(t[868]=e("",17))])}const W0=s(m,[["render",N0]]);export{F0 as __pageData,W0 as default};

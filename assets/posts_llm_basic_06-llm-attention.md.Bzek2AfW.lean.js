import{_ as s,c as e,o as l,ah as a,j as t,a as T}from"./chunks/framework.CvbyeFFO.js";const J6=JSON.parse('{"title":"LLM Attention 系列","description":"","frontmatter":{"title":"LLM Attention 系列","date":"2025-11-14T15:32:02.000Z","create":"2025-11-14T15:32:02.000Z","categories":["llm-attention"],"tags":["softmax attention"]},"headers":[],"relativePath":"posts/llm/basic/06-llm-attention.md","filePath":"posts/llm/basic/06-llm-attention.md","lastUpdated":null}'),m={name:"posts/llm/basic/06-llm-attention.md"},o={class:"custom-block important"},d={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.64ex",height:"2.484ex",role:"img",focusable:"false",viewBox:"0 -903.7 8238.7 1097.7","aria-hidden":"true"},r={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},i={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-5.786ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.132ex",height:"12.703ex",role:"img",focusable:"false",viewBox:"0 -3057.5 13760.4 5614.9","aria-hidden":"true"},h={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.85ex",height:"2.029ex",role:"img",focusable:"false",viewBox:"0 -703 6121.9 897","aria-hidden":"true"},p={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.089ex",height:"1.38ex",role:"img",focusable:"false",viewBox:"0 -452 923.3 609.8","aria-hidden":"true"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.8ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.007ex",height:"2.39ex",role:"img",focusable:"false",viewBox:"0 -703 6191.3 1056.5","aria-hidden":"true"},c={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},w={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.692ex",height:"2.569ex",role:"img",focusable:"false",viewBox:"0 -885.3 14449.8 1135.3","aria-hidden":"true"},x={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.51ex",height:"1.697ex",role:"img",focusable:"false",viewBox:"0 -710.2 4645.2 750.2","aria-hidden":"true"},f={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},V={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.148ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.894ex",height:"5.428ex",role:"img",focusable:"false",viewBox:"0 -1449.5 7909 2399","aria-hidden":"true"},k={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.466ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.026ex",height:"2.036ex",role:"img",focusable:"false",viewBox:"0 -694 2663.7 900","aria-hidden":"true"},b={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.466ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.609ex",height:"2.036ex",role:"img",focusable:"false",viewBox:"0 -694 5131.2 900","aria-hidden":"true"},v={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.962ex"},xmlns:"http://www.w3.org/2000/svg",width:"23.978ex",height:"7.056ex",role:"img",focusable:"false",viewBox:"0 -1809.3 10598.3 3118.6","aria-hidden":"true"},_={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.577ex"},xmlns:"http://www.w3.org/2000/svg",width:"60.555ex",height:"4.676ex",role:"img",focusable:"false",viewBox:"0 -1370 26765.4 2067","aria-hidden":"true"},A={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.481ex",height:"1.136ex",role:"img",focusable:"false",viewBox:"0 -491 2422.4 502","aria-hidden":"true"},S={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.002ex",height:"2.456ex",role:"img",focusable:"false",viewBox:"0 -835.3 4862.7 1085.3","aria-hidden":"true"},O={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.345ex",height:"1.912ex",role:"img",focusable:"false",viewBox:"0 -833.9 1036.6 844.9","aria-hidden":"true"},P={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.963ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 22967.6 1234.8","aria-hidden":"true"},I={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.296ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 8970.7 1234.8","aria-hidden":"true"},N={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.651ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 12221.6 1234.8","aria-hidden":"true"},G={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},J={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.148ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.223ex",height:"5.428ex",role:"img",focusable:"false",viewBox:"0 -1449.5 15126.7 2399","aria-hidden":"true"},q={class:"custom-block danger"},K={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.654ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 9129.1 1000","aria-hidden":"true"},U={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},W={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.962ex"},xmlns:"http://www.w3.org/2000/svg",width:"37.285ex",height:"6.792ex",role:"img",focusable:"false",viewBox:"0 -1692.6 16480.2 3002","aria-hidden":"true"},$={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"25.482ex",height:"4.293ex",role:"img",focusable:"false",viewBox:"0 -1610.3 11263.2 1897.5","aria-hidden":"true"},t1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Q1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.692ex",height:"2.569ex",role:"img",focusable:"false",viewBox:"0 -885.3 14449.8 1135.3","aria-hidden":"true"},T1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.963ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 22967.6 1234.8","aria-hidden":"true"},e1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},l1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.296ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 8970.7 1234.8","aria-hidden":"true"},s1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},m1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.651ex",height:"2.794ex",role:"img",focusable:"false",viewBox:"0 -885.3 12221.6 1234.8","aria-hidden":"true"},o1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},d1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.148ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.223ex",height:"5.428ex",role:"img",focusable:"false",viewBox:"0 -1449.5 15126.7 2399","aria-hidden":"true"},n1={class:"custom-block important"},r1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},i1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.045ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.268ex",height:"6.048ex",role:"img",focusable:"false",viewBox:"0 -885.3 15146.6 2673.2","aria-hidden":"true"},h1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.934ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 10137 1083.9","aria-hidden":"true"},p1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.909ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5705.9 1000","aria-hidden":"true"},u1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.909ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5705.9 1000","aria-hidden":"true"},c1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.807ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 11848.7 1083.9","aria-hidden":"true"},x1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.345ex",height:"1.912ex",role:"img",focusable:"false",viewBox:"0 -833.9 1036.6 844.9","aria-hidden":"true"},f1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.753ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 10057 1083.9","aria-hidden":"true"},k1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.728ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5625.9 1000","aria-hidden":"true"},b1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.728ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5625.9 1000","aria-hidden":"true"},v1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},D1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.807ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 11848.7 1083.9","aria-hidden":"true"},_1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.164ex",height:"1.909ex",role:"img",focusable:"false",viewBox:"0 -833.9 956.6 843.9","aria-hidden":"true"},A1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.784ex",height:"2.329ex",role:"img",focusable:"false",viewBox:"0 -835.3 2556.7 1029.3","aria-hidden":"true"},S1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},R1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.693ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.41ex",height:"5.696ex",role:"img",focusable:"false",viewBox:"0 -885.3 10789.2 2517.7","aria-hidden":"true"},O1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.038ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.731ex",height:"1.59ex",role:"img",focusable:"false",viewBox:"0 -686 1207 703","aria-hidden":"true"},P1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.481ex",height:"1.136ex",role:"img",focusable:"false",viewBox:"0 -491 2422.4 502","aria-hidden":"true"},I1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.979ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1758.9 977.2","aria-hidden":"true"},N1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.706ex",height:"2.029ex",role:"img",focusable:"false",viewBox:"0 -703 1196 897","aria-hidden":"true"},G1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.073ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 2242.4 704","aria-hidden":"true"},q1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.97ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.818ex",height:"2.86ex",role:"img",focusable:"false",viewBox:"0 -835.3 1687.7 1264","aria-hidden":"true"},F1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.073ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 2242.4 704","aria-hidden":"true"},W1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},$1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.864ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.043ex",height:"6.802ex",role:"img",focusable:"false",viewBox:"0 -1740.7 13721.1 3006.4","aria-hidden":"true"},Y1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.034ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1783 1000","aria-hidden":"true"},Q3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},a3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.073ex",height:"1.756ex",role:"img",focusable:"false",viewBox:"0 -694 2242.4 776","aria-hidden":"true"},l3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.345ex",height:"1.912ex",role:"img",focusable:"false",viewBox:"0 -833.9 1036.6 844.9","aria-hidden":"true"},m3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},o3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},d3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.036ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.823ex",height:"1.926ex",role:"img",focusable:"false",viewBox:"0 -835.3 2573.7 851.3","aria-hidden":"true"},r3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},i3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.29ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.154ex",height:"5.335ex",role:"img",focusable:"false",viewBox:"0 -903.7 10676.1 2358.1","aria-hidden":"true"},h3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.038ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.731ex",height:"1.59ex",role:"img",focusable:"false",viewBox:"0 -686 1207 703","aria-hidden":"true"},p3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.119ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 2262.4 704","aria-hidden":"true"},u3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.979ex",height:"2.211ex",role:"img",focusable:"false",viewBox:"0 -683 1758.9 977.2","aria-hidden":"true"},c3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.661ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.818ex",height:"2.551ex",role:"img",focusable:"false",viewBox:"0 -835.3 1687.7 1127.5","aria-hidden":"true"},x3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.254ex",height:"1.532ex",role:"img",focusable:"false",viewBox:"0 -666 2322.4 677","aria-hidden":"true"},f3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.381ex",height:"2.218ex",role:"img",focusable:"false",viewBox:"0 -686 1052.3 980.2","aria-hidden":"true"},k3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.254ex",height:"1.532ex",role:"img",focusable:"false",viewBox:"0 -666 2322.4 677","aria-hidden":"true"},b3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Z3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.864ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.179ex",height:"6.399ex",role:"img",focusable:"false",viewBox:"0 -1562.5 13339.1 2828.3","aria-hidden":"true"},v3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},D3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.215ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1863 1000","aria-hidden":"true"},_3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.357ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 600 453","aria-hidden":"true"},A3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.254ex",height:"1.692ex",role:"img",focusable:"false",viewBox:"0 -666 2322.4 748","aria-hidden":"true"},S3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.164ex",height:"1.909ex",role:"img",focusable:"false",viewBox:"0 -833.9 956.6 843.9","aria-hidden":"true"},O3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},P3={class:"custom-block caution"},B3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.503ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6852.4 1000","aria-hidden":"true"},z3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.589ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 4238.3 636","aria-hidden":"true"},X3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},G3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.308ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.234ex",height:"5.727ex",role:"img",focusable:"false",viewBox:"0 -1511.3 18225.5 2531.3","aria-hidden":"true"},J3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.372ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.128ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -895.6 1824.4 1060","aria-hidden":"true"},K3={class:"custom-block warning"},F3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.198ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 971.4 851.8","aria-hidden":"true"},W3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.646ex",height:"2.347ex",role:"img",focusable:"false",viewBox:"0 -750 7799.4 1037.2","aria-hidden":"true"},Y3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},t2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.768ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6527.3 1000","aria-hidden":"true"},Q2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"52.545ex",height:"3.108ex",role:"img",focusable:"false",viewBox:"0 -1086 23224.8 1373.9","aria-hidden":"true"},a2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},e2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-7.647ex"},xmlns:"http://www.w3.org/2000/svg",width:"62.627ex",height:"16.425ex",role:"img",focusable:"false",viewBox:"0 -3879.9 27681.3 7259.9","aria-hidden":"true"},l2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.293ex",height:"3.108ex",role:"img",focusable:"false",viewBox:"0 -1086 12505.4 1373.9","aria-hidden":"true"},m2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},o2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.345ex",height:"3.108ex",role:"img",focusable:"false",viewBox:"0 -1086 18274.7 1373.9","aria-hidden":"true"},d2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-16.508ex"},xmlns:"http://www.w3.org/2000/svg",width:"81.565ex",height:"34.147ex",role:"img",focusable:"false",viewBox:"0 -7796.4 36051.9 15092.9","aria-hidden":"true"},r2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.293ex",height:"2.556ex",role:"img",focusable:"false",viewBox:"0 -841.7 12505.4 1129.6","aria-hidden":"true"},h2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.651ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.345ex",height:"2.556ex",role:"img",focusable:"false",viewBox:"0 -841.7 18274.7 1129.6","aria-hidden":"true"},p2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.685ex"},xmlns:"http://www.w3.org/2000/svg",width:"54.398ex",height:"2.589ex",role:"img",focusable:"false",viewBox:"0 -841.7 24044.1 1144.5","aria-hidden":"true"},u2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.811ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 1242.4 898","aria-hidden":"true"},c2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.811ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 1242.4 898","aria-hidden":"true"},x2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.725ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 2530.6 877","aria-hidden":"true"},f2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},V2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.315ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 1023.4 599.8","aria-hidden":"true"},k2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.471ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.36ex",height:"1.471ex",role:"img",focusable:"false",viewBox:"0 -442 1927.1 650","aria-hidden":"true"},b2={class:"custom-block danger"},Z2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.435ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 2402.4 898","aria-hidden":"true"},D2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.023ex",height:"1.505ex",role:"img",focusable:"false",viewBox:"0 -583 1778 665","aria-hidden":"true"},j2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},C2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.804ex",height:"1.74ex",role:"img",focusable:"false",viewBox:"0 -759 797.5 769","aria-hidden":"true"},R2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"36.517ex",height:"2.731ex",role:"img",focusable:"false",viewBox:"0 -957 16140.7 1207","aria-hidden":"true"},E2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.225ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 1425.7 888","aria-hidden":"true"},B2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.854ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 1703.4 888","aria-hidden":"true"},z2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.176ex",height:"1.593ex",role:"img",focusable:"false",viewBox:"0 -694 520 704","aria-hidden":"true"},X2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},G2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.44ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 11686.7 1000","aria-hidden":"true"},J2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},q2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.997ex",height:"2.565ex",role:"img",focusable:"false",viewBox:"0 -883.9 21214.8 1133.9","aria-hidden":"true"},K2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.372ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.128ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -895.6 1824.4 1060","aria-hidden":"true"},U2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},W2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.801ex",height:"2.032ex",role:"img",focusable:"false",viewBox:"0 -704 1680 898","aria-hidden":"true"},$2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.811ex",height:"1.956ex",role:"img",focusable:"false",viewBox:"0 -853.7 1242.7 864.7","aria-hidden":"true"},t4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Q4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.615ex",height:"2.938ex",role:"img",focusable:"false",viewBox:"0 -1048.5 5575.6 1298.5","aria-hidden":"true"},T4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.372ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.128ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -895.6 1824.4 1060","aria-hidden":"true"},e4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},l4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.593ex",height:"2.451ex",role:"img",focusable:"false",viewBox:"0 -833.2 3355.9 1083.2","aria-hidden":"true"},s4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.854ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 1703.4 888","aria-hidden":"true"},o4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.205ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.106ex",height:"2.398ex",role:"img",focusable:"false",viewBox:"0 -969.5 1373 1060","aria-hidden":"true"},n4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},r4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"56.983ex",height:"5.768ex",role:"img",focusable:"false",viewBox:"0 -1370 25186.3 2549.5","aria-hidden":"true"},i4={class:"custom-block tip"},h4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.042ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 3112.6 1083.9","aria-hidden":"true"},p4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.042ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 3112.6 1083.9","aria-hidden":"true"},u4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.832ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2577.6 1083.9","aria-hidden":"true"},c4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.844ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2141 1000","aria-hidden":"true"},x4={class:"custom-block tip"},y4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},V4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.413ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2834.6 1083.9","aria-hidden":"true"},M4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},b4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.045ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.771ex",height:"6.048ex",role:"img",focusable:"false",viewBox:"0 -885.3 14926.6 2673.2","aria-hidden":"true"},Z4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},v4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.412ex"},xmlns:"http://www.w3.org/2000/svg",width:"58.968ex",height:"8.241ex",role:"img",focusable:"false",viewBox:"0 -1692.6 26063.9 3642.7","aria-hidden":"true"},D4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},_4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.885ex"},xmlns:"http://www.w3.org/2000/svg",width:"76.403ex",height:"2.93ex",role:"img",focusable:"false",viewBox:"0 -903.7 33770.3 1295","aria-hidden":"true"},j4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.333ex",height:"1.947ex",role:"img",focusable:"false",viewBox:"0 -703 1031.3 860.8","aria-hidden":"true"},C4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.333ex",height:"1.947ex",role:"img",focusable:"false",viewBox:"0 -703 1031.3 860.8","aria-hidden":"true"},R4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},O4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.302ex",height:"2.579ex",role:"img",focusable:"false",viewBox:"0 -885.3 14277.6 1140.1","aria-hidden":"true"},E4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},P4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.014ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.923ex",height:"6.844ex",role:"img",focusable:"false",viewBox:"0 -1692.6 6153.9 3024.8","aria-hidden":"true"},B4={class:"custom-block tip"},I4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.829ex",height:"2.288ex",role:"img",focusable:"false",viewBox:"0 -853.7 4344.3 1011.5","aria-hidden":"true"},N4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.489ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.229ex",height:"1.486ex",role:"img",focusable:"false",viewBox:"0 -441 543 657","aria-hidden":"true"},G4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},J4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"35.165ex",height:"2.579ex",role:"img",focusable:"false",viewBox:"0 -885.3 15543.1 1140.1","aria-hidden":"true"},q4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.489ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.229ex",height:"1.486ex",role:"img",focusable:"false",viewBox:"0 -441 543 657","aria-hidden":"true"},F4={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.805ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1682 1000","aria-hidden":"true"},W4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},$4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"37.742ex",height:"2.579ex",role:"img",focusable:"false",viewBox:"0 -885.3 16682.1 1140.1","aria-hidden":"true"},Y4={class:"custom-block tip"},t6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Q6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.373ex",height:"1.991ex",role:"img",focusable:"false",viewBox:"0 -686 2374.7 880","aria-hidden":"true"},T6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.351ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.42ex",height:"1.941ex",role:"img",focusable:"false",viewBox:"0 -703 1069.4 857.9","aria-hidden":"true"},e6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},l6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.775ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 12276.4 1000","aria-hidden":"true"},s6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},m6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.609ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6015 1000","aria-hidden":"true"},o6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.471ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.378ex",height:"2.061ex",role:"img",focusable:"false",viewBox:"0 -703 1934.9 911","aria-hidden":"true"},n6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.573ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2905.2 1000","aria-hidden":"true"},i6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.333ex",height:"1.947ex",role:"img",focusable:"false",viewBox:"0 -703 1031.3 860.8","aria-hidden":"true"},g6={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},p6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.791ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.138ex",height:"2.713ex",role:"img",focusable:"false",viewBox:"0 -849.5 22602.9 1199","aria-hidden":"true"},H6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.244ex",height:"2.059ex",role:"img",focusable:"false",viewBox:"0 -705 550 910","aria-hidden":"true"},L6={class:"custom-block info"},c6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.379ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2819.6 1083.9","aria-hidden":"true"},x6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.218ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 4074.3 1000","aria-hidden":"true"},f6={class:"custom-block danger"},V6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.379ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 2819.6 1083.9","aria-hidden":"true"},M6={class:"custom-block important"},b6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.008ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 3097.6 1083.9","aria-hidden":"true"},v6={class:"custom-block important"},D6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.68ex",height:"1.553ex",role:"img",focusable:"false",viewBox:"0 -675.5 1184.7 686.5","aria-hidden":"true"},j6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.251ex",height:"2.046ex",role:"img",focusable:"false",viewBox:"0 -893.3 4088.7 904.3","aria-hidden":"true"},C6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.251ex",height:"2.046ex",role:"img",focusable:"false",viewBox:"0 -893.3 4088.7 904.3","aria-hidden":"true"},R6={class:"custom-block important"},O6={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E6={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.119ex",height:"1.887ex",role:"img",focusable:"false",viewBox:"0 -833.9 1378.8 833.9","aria-hidden":"true"};function P6(B6,Q,I6,z6,N6,X6){return l(),e("div",null,[Q[622]||(Q[622]=a("",5)),t("div",o,[Q[58]||(Q[58]=t("div",{class:"custom-block-title"},"标准 Softmax Attention",-1)),Q[59]||(Q[59]=t("p",null,[t("strong",null,"符号定义")],-1)),t("mjx-container",d,[(l(),e("svg",n,Q[0]||(Q[0]=[a("",1)]))),Q[1]||(Q[1]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mi",null,"i")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"i")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"i")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"i")])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mn",null,"1")])])])])],-1))]),t("mjx-container",r,[(l(),e("svg",i,Q[2]||(Q[2]=[a("",1)]))),Q[3]||(Q[3]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd"),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mo",null,"="),t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mn",null,"2")])]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mi",null,"n")])]),t("msup",null,[t("mo",{stretchy:"false"},"]"),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mo",null,"="),t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mn",null,"2")])]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"n")])]),t("msup",null,[t("mo",{stretchy:"false"},"]"),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"="),t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mn",null,"2")])]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"n")])]),t("msup",null,[t("mo",{stretchy:"false"},"]"),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mn",null,"2")])]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"n")])]),t("msup",null,[t("mo",{stretchy:"false"},"]"),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])])])])],-1))]),Q[60]||(Q[60]=t("ul",null,[t("li",null,"Q、K的维度和V、O的维度可以不相同，参考MLA。")],-1)),Q[61]||(Q[61]=t("p",null,[t("strong",null,"核心思想")],-1)),t("ul",null,[t("li",null,[t("p",null,[Q[6]||(Q[6]=T("注意力本质：")),t("mjx-container",h,[(l(),e("svg",g,Q[4]||(Q[4]=[a("",1)]))),Q[5]||(Q[5]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q"),t("mo",{mathvariant:"bold"},","),t("mi",{mathvariant:"bold-italic"},"K"),t("mo",{mathvariant:"bold"},","),t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",{stretchy:"false"},"→"),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")])])],-1))]),Q[7]||(Q[7]=T(" 映射。"))])]),t("li",null,[t("p",null,[Q[12]||(Q[12]=t("strong",null,"Causal场景",-1)),Q[13]||(Q[13]=T("：")),t("mjx-container",p,[(l(),e("svg",H,Q[8]||(Q[8]=[a("",1)]))),Q[9]||(Q[9]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])])])],-1))]),Q[14]||(Q[14]=T(" 至多和 ")),t("mjx-container",u,[(l(),e("svg",L,Q[10]||(Q[10]=[a("",1)]))),Q[11]||(Q[11]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"["),t("mo",null,":"),t("mi",null,"t"),t("mo",{stretchy:"false"},"]")])]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"K"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"["),t("mo",null,":"),t("mi",null,"t"),t("mo",{stretchy:"false"},"]")])]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"["),t("mo",null,":"),t("mi",null,"t"),t("mo",{stretchy:"false"},"]")])])])])],-1))]),Q[15]||(Q[15]=T()),Q[16]||(Q[16]=t("code",null,"有关",-1)),Q[17]||(Q[17]=T("。"))]),t("mjx-container",c,[(l(),e("svg",w,Q[18]||(Q[18]=[a("",1)]))),Q[19]||(Q[19]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"softmax")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q"),t("msup",null,[t("mi",{mathvariant:"bold-italic"},"K"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))])]),t("li",null,[t("p",null,[t("mjx-container",x,[(l(),e("svg",y,Q[20]||(Q[20]=[a("",1)]))),Q[21]||(Q[21]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n")])])])])],-1))]),Q[22]||(Q[22]=T("：")),Q[23]||(Q[23]=t("code",null,"掩码矩阵",-1)),Q[24]||(Q[24]=T("，下三角矩阵"))]),t("mjx-container",f,[(l(),e("svg",V,Q[25]||(Q[25]=[a("",1)]))),Q[26]||(Q[26]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"M"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"j")])])]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"{"),t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mn",null,"1")]),t("mo",null,",")]),t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"i"),t("mo",null,"≥"),t("mi",null,"j")])])]),t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mn",null,"0")]),t("mo",null,",")]),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",null,"i"),t("mo",null,"<"),t("mi",null,"j")])])])]),t("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])],-1))]),t("ul",null,[t("li",null,[t("mjx-container",k,[(l(),e("svg",M,Q[27]||(Q[27]=[a("",1)]))),Q[28]||(Q[28]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")])])],-1))]),Q[31]||(Q[31]=T("，对M的分量")),Q[32]||(Q[32]=t("code",null,"逐一取log",-1)),Q[33]||(Q[33]=T("，")),t("mjx-container",b,[(l(),e("svg",Z,Q[29]||(Q[29]=[a("",1)]))),Q[30]||(Q[30]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mstyle",{mathcolor:"blue"},[t("mn",{mathvariant:"bold"},"0")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mo",null,"−"),t("mi",{mathvariant:"normal"},"∞")])])],-1))])])])])]),Q[62]||(Q[62]=t("p",null,[t("strong",null,"Softmax Attention 分量形式")],-1)),Q[63]||(Q[63]=t("ul",null,[t("li",null,[T("分母："),t("code",null,"权重和"),T("，分子每项的"),t("code",null,"权重*值"),T("，再"),t("code",null,"求和"),T("。除以分母：保持数值稳定性")])],-1)),t("mjx-container",v,[(l(),e("svg",D,Q[34]||(Q[34]=[a("",1)]))),Q[35]||(Q[35]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"t")])]),t("mi",null,"exp"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mi",null,"t"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j")]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])])]),t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"t")])]),t("mi",null,"exp"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mi",null,"t"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j")]),t("mo",{stretchy:"false"},")")])])])])],-1))]),Q[64]||(Q[64]=t("ul",null,[t("li",null,"简单示例，多项V加权求和")],-1)),t("mjx-container",_,[(l(),e("svg",j,Q[36]||(Q[36]=[a("",1)]))),Q[37]||(Q[37]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"o"),t("mn",null,"5")])]),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"q"),t("mn",null,"5")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"k"),t("mn",null,"1")])])]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"sum")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"v"),t("mn",null,"1")])]),t("mo",null,"+"),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"q"),t("mn",null,"5")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"k"),t("mn",null,"2")])])]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"sum")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"v"),t("mn",null,"2")])]),t("mo",null,"+"),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"q"),t("mn",null,"5")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"k"),t("mn",null,"3")])])]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"sum")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"v"),t("mn",null,"3")])]),t("mo",null,"+"),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"q"),t("mn",null,"5")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"k"),t("mn",null,"4")])])]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"sum")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"v"),t("mn",null,"4")])]),t("mo",null,"+"),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"q"),t("mn",null,"5")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"k"),t("mn",null,"5")])])]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"sum")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"v"),t("mn",null,"5")])])])],-1))]),Q[65]||(Q[65]=t("p",null,[t("strong",null,"Softmax Attention 精简")],-1)),t("ul",null,[t("li",null,[t("p",null,[Q[44]||(Q[44]=T("最核心为分子，需把 ")),t("mjx-container",A,[(l(),e("svg",C,Q[38]||(Q[38]=[a("",1)]))),Q[39]||(Q[39]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n")])])],-1))]),Q[45]||(Q[45]=T("的矩阵")),t("mjx-container",S,[(l(),e("svg",R,Q[40]||(Q[40]=[a("",1)]))),Q[41]||(Q[41]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"exp")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[46]||(Q[46]=T("算出来，空间和时间复杂度，都正比于")),t("mjx-container",O,[(l(),e("svg",E,Q[42]||(Q[42]=[a("",1)]))),Q[43]||(Q[43]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msup",null,[t("mi",null,"n"),t("mn",null,"2")])])])],-1))])]),t("mjx-container",P,[(l(),e("svg",B,Q[47]||(Q[47]=[a("",1)]))),Q[48]||(Q[48]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"exp")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q"),t("msup",null,[t("mi",{mathvariant:"bold-italic"},"K"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"exp")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",{stretchy:"false"},")"),t("mo",null,"⊙"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))])]),t("li",null,[Q[51]||(Q[51]=t("p",null,[T("精简："),t("code",null,"去掉softmax")],-1)),t("mjx-container",I,[(l(),e("svg",z,Q[49]||(Q[49]=[a("",1)]))),Q[50]||(Q[50]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⊙"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))])]),t("li",null,[Q[54]||(Q[54]=t("p",null,[T("精简："),t("code",null,"去掉掩码"),T("，非causal")],-1)),t("mjx-container",N,[(l(),e("svg",X,Q[52]||(Q[52]=[a("",1)]))),Q[53]||(Q[53]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))])]),t("li",null,[Q[57]||(Q[57]=t("p",null,"增加归一化",-1)),t("mjx-container",G,[(l(),e("svg",J,Q[55]||(Q[55]=[a("",1)]))),Q[56]||(Q[56]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mtext",null,"RMSNorm"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⊙"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])])])]),Q[623]||(Q[623]=t("h3",{id:"注意力精简公式",tabindex:"-1"},[T("注意力精简公式 "),t("a",{class:"header-anchor",href:"#注意力精简公式","aria-label":'Permalink to "注意力精简公式"'},"​")],-1)),t("div",q,[Q[82]||(Q[82]=t("div",{class:"custom-block-title"},"注意力精简公式",-1)),Q[83]||(Q[83]=t("p",null,[t("strong",null,"Attention 精简公式")],-1)),t("mjx-container",K,[(l(),e("svg",F,Q[66]||(Q[66]=[a("",1)]))),Q[67]||(Q[67]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"Attn")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,":"),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,":"),t("mi",null,"t")])])]),t("mo",{stretchy:"false"},")")])],-1))]),t("mjx-container",U,[(l(),e("svg",W,Q[68]||(Q[68]=[a("",1)]))),Q[69]||(Q[69]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"Attn")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,":"),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,":"),t("mi",null,"t")])])]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"t")])]),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"α"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"t")]),t("mo",null,","),t("mi",null,"i")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"t")]),t("msub",null,[t("mi",null,"α"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,","),t("mi",null,"j")])])])])])],-1))]),t("mjx-container",$,[(l(),e("svg",Y,Q[70]||(Q[70]=[a("",1)]))),Q[71]||(Q[71]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"α"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"t")]),t("mo",null,","),t("mi",null,"i")])])]),t("mo",null,"="),t("msup",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"e")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",null,[t("mi",null,"t")]),t("mi",{mathvariant:"normal"},"⊤")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"i")])])]),t("mstyle",{mathcolor:"blue"},[t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])])])])]),t("mo",null,"="),t("msup",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"e")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",null,[t("mi",null,"t")]),t("mi",{mathvariant:"normal"},"⊤")])]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"i")])])])]),t("mo",null,"−"),t("msup",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"e")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])])])])])],-1))]),Q[84]||(Q[84]=t("p",null,[t("strong",null,"矩阵带掩码 公式")],-1)),t("mjx-container",t1,[(l(),e("svg",Q1,Q[72]||(Q[72]=[a("",1)]))),Q[73]||(Q[73]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"softmax")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q"),t("msup",null,[t("mi",{mathvariant:"bold-italic"},"K"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))]),t("mjx-container",T1,[(l(),e("svg",a1,Q[74]||(Q[74]=[a("",1)]))),Q[75]||(Q[75]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"exp")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q"),t("msup",null,[t("mi",{mathvariant:"bold-italic"},"K"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"exp")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",{stretchy:"false"},")"),t("mo",null,"⊙"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))]),Q[85]||(Q[85]=t("p",null,[t("strong",null,"矩阵精简公式")],-1)),t("mjx-container",e1,[(l(),e("svg",l1,Q[76]||(Q[76]=[a("",1)]))),Q[77]||(Q[77]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⊙"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))]),t("mjx-container",s1,[(l(),e("svg",m1,Q[78]||(Q[78]=[a("",1)]))),Q[79]||(Q[79]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))]),t("mjx-container",o1,[(l(),e("svg",d1,Q[80]||(Q[80]=[a("",1)]))),Q[81]||(Q[81]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("mtext",null,"RMSNorm"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⊙"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"M")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),Q[624]||(Q[624]=t("h3",{id:"softmax和linear时间复杂度",tabindex:"-1"},[T("Softmax和Linear时间复杂度 "),t("a",{class:"header-anchor",href:"#softmax和linear时间复杂度","aria-label":'Permalink to "Softmax和Linear时间复杂度"'},"​")],-1)),Q[625]||(Q[625]=t("img",{src:"https://picx.zhimg.com/v2-7f7213c71f3eed41174c60d2f044946a_r.jpg?source=1def8aca",style:{display:"block",margin:"auto"},width:"70%"},null,-1)),t("div",n1,[Q[255]||(Q[255]=t("div",{class:"custom-block-title"},"Softmax和线性注意力时间复杂度",-1)),Q[256]||(Q[256]=t("p",null,[t("strong",null,"Softmax和线性注意力")],-1)),t("mjx-container",r1,[(l(),e("svg",i1,Q[86]||(Q[86]=[a("",1)]))),Q[87]||(Q[87]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n")])])])])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mo",{stretchy:"false"},"⟺"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"d")])])])])])])],-1))]),t("ul",null,[t("li",null,[Q[108]||(Q[108]=T("左侧：")),Q[109]||(Q[109]=t("strong",null,"传统softmax注意力",-1)),t("ul",null,[t("li",null,[Q[99]||(Q[99]=t("strong",null,"时间复杂度",-1)),Q[100]||(Q[100]=T("：")),t("mjx-container",h1,[(l(),e("svg",g1,Q[88]||(Q[88]=[a("",1)]))),Q[89]||(Q[89]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),t("ul",null,[t("li",null,[Q[94]||(Q[94]=T("第一步：")),t("mjx-container",p1,[(l(),e("svg",H1,Q[90]||(Q[90]=[a("",1)]))),Q[91]||(Q[91]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[95]||(Q[95]=T("；第二步：")),t("mjx-container",u1,[(l(),e("svg",L1,Q[92]||(Q[92]=[a("",1)]))),Q[93]||(Q[93]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")]),t("mo",{stretchy:"false"},")")])],-1))])]),t("li",null,[Q[98]||(Q[98]=T("综合两步：")),t("mjx-container",c1,[(l(),e("svg",w1,Q[96]||(Q[96]=[a("",1)]))),Q[97]||(Q[97]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))])])])]),t("li",null,[Q[103]||(Q[103]=t("code",null,"当n很大时",-1)),Q[104]||(Q[104]=T("：由于 ")),t("strong",null,[t("mjx-container",x1,[(l(),e("svg",y1,Q[101]||(Q[101]=[a("",1)]))),Q[102]||(Q[102]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"n"),t("mn",null,"2")])])],-1))])]),Q[105]||(Q[105]=T("，")),Q[106]||(Q[106]=t("code",null,"计算成本非常高",-1))]),Q[107]||(Q[107]=t("li",null,[t("code",null,"Flash Attention"),T("降低了"),t("code",null,"空间需求"),T("，但"),t("code",null,"平方时间复杂度"),T("依然"),t("code",null,"无法避免"),T("。")],-1))])]),t("li",null,[Q[131]||(Q[131]=T("右侧：")),Q[132]||(Q[132]=t("strong",null,"线性注意力",-1)),Q[133]||(Q[133]=T("。 ")),t("ul",null,[t("li",null,[Q[121]||(Q[121]=t("strong",null,"时间复杂度",-1)),Q[122]||(Q[122]=T("：")),t("mjx-container",f1,[(l(),e("svg",V1,Q[110]||(Q[110]=[a("",1)]))),Q[111]||(Q[111]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),t("ul",null,[t("li",null,[Q[116]||(Q[116]=T("第一步：")),t("mjx-container",k1,[(l(),e("svg",M1,Q[112]||(Q[112]=[a("",1)]))),Q[113]||(Q[113]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[117]||(Q[117]=T("；第二步：")),t("mjx-container",b1,[(l(),e("svg",Z1,Q[114]||(Q[114]=[a("",1)]))),Q[115]||(Q[115]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")]),t("mo",{stretchy:"false"},")")])],-1))])]),t("li",null,[Q[120]||(Q[120]=T("综合两步：")),t("mjx-container",v1,[(l(),e("svg",D1,Q[118]||(Q[118]=[a("",1)]))),Q[119]||(Q[119]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))])])])]),t("li",null,[Q[125]||(Q[125]=t("code",null,"当n很大时",-1)),Q[126]||(Q[126]=T("，")),t("mjx-container",_1,[(l(),e("svg",j1,Q[123]||(Q[123]=[a("",1)]))),Q[124]||(Q[124]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"d"),t("mn",null,"2")])])],-1))]),Q[127]||(Q[127]=T("为常数，")),Q[128]||(Q[128]=t("code",null,"复杂度随n线性递增",-1)),Q[129]||(Q[129]=T("，")),Q[130]||(Q[130]=t("code",null,"计算成本低",-1))])])]),Q[134]||(Q[134]=t("li",null,[T("区别 "),t("ul",null,[t("li",null,[T("计算上："),t("code",null,"仅仅是交换了计算顺序")])])],-1))]),Q[257]||(Q[257]=t("p",null,[t("strong",null,"Softmax 时间复杂度例子")],-1)),t("ul",null,[t("li",null,[t("p",null,[t("mjx-container",A1,[(l(),e("svg",C1,Q[135]||(Q[135]=[a("",1)]))),Q[136]||(Q[136]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")])])],-1))]),Q[137]||(Q[137]=T("矩阵乘法 (传统softmax注意力)"))]),t("mjx-container",S1,[(l(),e("svg",R1,Q[138]||(Q[138]=[a("",1)]))),Q[139]||(Q[139]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mo",null,"×"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"n")])])])])]),t("mo",null,"="),t("mi",{mathvariant:"bold-italic"},"W"),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n")])])])])],-1))]),t("ul",null,[t("li",null,[t("p",null,[Q[147]||(Q[147]=T("结果矩阵")),t("mjx-container",O1,[(l(),e("svg",E1,Q[140]||(Q[140]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D47E",d:"M111 624Q109 624 102 624T91 623Q61 623 61 640Q61 660 70 678Q78 686 98 686Q140 684 239 684Q277 684 309 684T360 685T383 686H385Q407 686 407 668Q404 634 391 626Q387 624 348 624Q307 624 307 622Q307 618 332 409Q359 198 359 195L570 532L564 576L558 622V624H522H504Q472 624 472 641Q475 678 488 684L493 686L529 685Q551 684 645 684Q716 684 753 685T795 686Q818 686 818 669Q815 632 802 626Q798 624 759 624Q718 624 718 622Q718 615 743 410Q770 199 770 196Q770 195 806 253T903 406Q1035 618 1035 619Q1025 624 968 624Q943 624 943 641Q943 648 946 659Q950 675 952 679T963 686L998 685Q1020 684 1093 684Q1113 684 1139 685T1173 686Q1207 686 1207 669Q1207 664 1204 652Q1199 631 1194 628T1164 624Q1113 622 1101 615Q1098 612 905 305Q715 -1 709 -7Q699 -17 673 -17Q645 -17 639 -8L581 441Q581 444 442 221Q331 44 314 18T288 -14Q279 -17 263 -17H254Q229 -17 227 -5Q225 2 186 311L147 620V624H111Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[141]||(Q[141]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",{mathvariant:"bold-italic"},"W")])],-1))]),Q[148]||(Q[148]=T("共 ")),t("strong",null,[t("mjx-container",P1,[(l(),e("svg",B1,Q[142]||(Q[142]=[a("",1)]))),Q[143]||(Q[143]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n")])],-1))]),Q[144]||(Q[144]=T("个元素"))]),Q[149]||(Q[149]=T("，第i行j列元素")),t("mjx-container",I1,[(l(),e("svg",z1,Q[145]||(Q[145]=[a("",1)]))),Q[146]||(Q[146]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"W"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"j")])])])])],-1))]),Q[150]||(Q[150]=T("计算过程"))]),t("ul",null,[t("li",null,[t("mjx-container",N1,[(l(),e("svg",X1,Q[151]||(Q[151]=[a("",1)]))),Q[152]||(Q[152]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"i")])])])])],-1))]),Q[155]||(Q[155]=T("：")),Q[156]||(Q[156]=t("code",null,"第i列",-1)),Q[157]||(Q[157]=T("，")),Q[158]||(Q[158]=t("code",null,"d个元素",-1)),Q[159]||(Q[159]=T("的")),Q[160]||(Q[160]=t("code",null,"行向量",-1)),Q[161]||(Q[161]=T("，维度为 ")),t("strong",null,[t("mjx-container",G1,[(l(),e("svg",J1,Q[153]||(Q[153]=[a("",1)]))),Q[154]||(Q[154]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"1"),t("mo",null,"×"),t("mi",null,"d")])],-1))])])]),t("li",null,[t("mjx-container",q1,[(l(),e("svg",K1,Q[162]||(Q[162]=[a("",1)]))),Q[163]||(Q[163]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msubsup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"j")])]),t("mi",{mathvariant:"normal"},"⊤")])])],-1))]),Q[166]||(Q[166]=T("：")),Q[167]||(Q[167]=t("code",null,"第j行",-1)),Q[168]||(Q[168]=T("，")),Q[169]||(Q[169]=t("code",null,"d个元素",-1)),Q[170]||(Q[170]=T("的")),Q[171]||(Q[171]=t("code",null,"列向量",-1)),Q[172]||(Q[172]=T("，维度为 ")),t("strong",null,[t("mjx-container",F1,[(l(),e("svg",U1,Q[164]||(Q[164]=[a("",1)]))),Q[165]||(Q[165]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"d"),t("mo",null,"×"),t("mn",null,"1")])],-1))])])])]),t("mjx-container",W1,[(l(),e("svg",$1,Q[173]||(Q[173]=[a("",1)]))),Q[174]||(Q[174]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"W"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"j")])])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"i")])])]),t("mo",null,"⋅"),t("msubsup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"j")])]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"l"),t("mo",null,"="),t("mn",null,"1")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"d")])]),t("msub",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"l")])])]),t("mo",null,"⋅"),t("msubsup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"l"),t("mo",null,","),t("mi",null,"j")])]),t("mi",{mathvariant:"normal"},"⊤")])])],-1))])]),t("li",null,[t("p",null,[Q[183]||(Q[183]=t("code",null,"单个元素计算复杂度",-1)),Q[184]||(Q[184]=T("：")),t("mjx-container",Y1,[(l(),e("svg",t3,Q[175]||(Q[175]=[a("",1)]))),Q[176]||(Q[176]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mi",null,"d")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[185]||(Q[185]=T("，")),t("strong",null,[t("mjx-container",Q3,[(l(),e("svg",T3,Q[177]||(Q[177]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[178]||(Q[178]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"d")])],-1))]),Q[179]||(Q[179]=T("次乘法"))]),Q[186]||(Q[186]=T("、")),t("strong",null,[t("mjx-container",a3,[(l(),e("svg",e3,Q[180]||(Q[180]=[a("",1)]))),Q[181]||(Q[181]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"d"),t("mo",null,"−"),t("mn",null,"1")])],-1))]),Q[182]||(Q[182]=T("次加法"))])])]),t("li",null,[t("p",null,[Q[191]||(Q[191]=t("code",null,"整体复杂度",-1)),Q[192]||(Q[192]=T("：有")),t("mjx-container",l3,[(l(),e("svg",s3,Q[187]||(Q[187]=[a("",1)]))),Q[188]||(Q[188]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"n"),t("mn",null,"2")])])],-1))]),Q[193]||(Q[193]=T("个元素，共")),t("mjx-container",m3,[(l(),e("svg",o3,Q[189]||(Q[189]=[a("",1)]))),Q[190]||(Q[190]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"o"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))])])])])])]),Q[258]||(Q[258]=t("p",null,[t("strong",null,"线性注意力时间复杂度例子")],-1)),t("ul",null,[t("li",null,[t("p",null,[t("mjx-container",d3,[(l(),e("svg",n3,Q[194]||(Q[194]=[a("",1)]))),Q[195]||(Q[195]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")])])],-1))]),Q[196]||(Q[196]=T("矩阵乘法 (线性注意力)"))]),t("mjx-container",r3,[(l(),e("svg",i3,Q[197]||(Q[197]=[a("",1)]))),Q[198]||(Q[198]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"n")])])])])]),t("mo",null,"×"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mo",null,"="),t("mi",{mathvariant:"bold-italic"},"W"),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"d")])])])])],-1))]),t("ul",null,[t("li",null,[t("p",null,[Q[206]||(Q[206]=T("结果矩阵")),t("mjx-container",h3,[(l(),e("svg",g3,Q[199]||(Q[199]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D47E",d:"M111 624Q109 624 102 624T91 623Q61 623 61 640Q61 660 70 678Q78 686 98 686Q140 684 239 684Q277 684 309 684T360 685T383 686H385Q407 686 407 668Q404 634 391 626Q387 624 348 624Q307 624 307 622Q307 618 332 409Q359 198 359 195L570 532L564 576L558 622V624H522H504Q472 624 472 641Q475 678 488 684L493 686L529 685Q551 684 645 684Q716 684 753 685T795 686Q818 686 818 669Q815 632 802 626Q798 624 759 624Q718 624 718 622Q718 615 743 410Q770 199 770 196Q770 195 806 253T903 406Q1035 618 1035 619Q1025 624 968 624Q943 624 943 641Q943 648 946 659Q950 675 952 679T963 686L998 685Q1020 684 1093 684Q1113 684 1139 685T1173 686Q1207 686 1207 669Q1207 664 1204 652Q1199 631 1194 628T1164 624Q1113 622 1101 615Q1098 612 905 305Q715 -1 709 -7Q699 -17 673 -17Q645 -17 639 -8L581 441Q581 444 442 221Q331 44 314 18T288 -14Q279 -17 263 -17H254Q229 -17 227 -5Q225 2 186 311L147 620V624H111Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[200]||(Q[200]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",{mathvariant:"bold-italic"},"W")])],-1))]),Q[207]||(Q[207]=T("共 ")),t("strong",null,[t("mjx-container",p3,[(l(),e("svg",H3,Q[201]||(Q[201]=[a("",1)]))),Q[202]||(Q[202]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"d")])],-1))]),Q[203]||(Q[203]=T("个元素"))]),Q[208]||(Q[208]=T("，第i行j列元素")),t("mjx-container",u3,[(l(),e("svg",L3,Q[204]||(Q[204]=[a("",1)]))),Q[205]||(Q[205]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"W"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"j")])])])])],-1))]),Q[209]||(Q[209]=T("计算过程"))]),t("ul",null,[t("li",null,[t("mjx-container",c3,[(l(),e("svg",w3,Q[210]||(Q[210]=[a("",1)]))),Q[211]||(Q[211]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msubsup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"i")])]),t("mi",{mathvariant:"normal"},"⊤")])])],-1))]),Q[214]||(Q[214]=T("：")),Q[215]||(Q[215]=t("code",null,"第i行",-1)),Q[216]||(Q[216]=T("，")),Q[217]||(Q[217]=t("code",null,"n个元素",-1)),Q[218]||(Q[218]=T("的")),Q[219]||(Q[219]=t("code",null,"行向量",-1)),Q[220]||(Q[220]=T("，维度为 ")),t("strong",null,[t("mjx-container",x3,[(l(),e("svg",y3,Q[212]||(Q[212]=[a("",1)]))),Q[213]||(Q[213]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"1"),t("mo",null,"×"),t("mi",null,"n")])],-1))])])]),t("li",null,[t("mjx-container",f3,[(l(),e("svg",V3,Q[221]||(Q[221]=[a("",1)]))),Q[222]||(Q[222]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"j")])])])])],-1))]),Q[225]||(Q[225]=T("：")),Q[226]||(Q[226]=t("code",null,"第j列",-1)),Q[227]||(Q[227]=T("，")),Q[228]||(Q[228]=t("code",null,"n个元素",-1)),Q[229]||(Q[229]=T("的")),Q[230]||(Q[230]=t("code",null,"列向量",-1)),Q[231]||(Q[231]=T("，维度为 ")),t("strong",null,[t("mjx-container",k3,[(l(),e("svg",M3,Q[223]||(Q[223]=[a("",1)]))),Q[224]||(Q[224]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"n"),t("mo",null,"×"),t("mn",null,"1")])],-1))])])])]),t("mjx-container",b3,[(l(),e("svg",Z3,Q[232]||(Q[232]=[a("",1)]))),Q[233]||(Q[233]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"W"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"j")])])]),t("mo",null,"="),t("msubsup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"i")])]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⋅"),t("msub",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"j")])])]),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"l"),t("mo",null,"="),t("mn",null,"1")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"n")])]),t("msubsup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"l")])]),t("mi",{mathvariant:"normal"},"⊤")]),t("mo",null,"⋅"),t("msub",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"l"),t("mo",null,","),t("mi",null,"i")])])])])],-1))])]),t("li",null,[t("p",null,[Q[242]||(Q[242]=t("code",null,"单个元素计算复杂度",-1)),Q[243]||(Q[243]=T("：")),t("mjx-container",v3,[(l(),e("svg",D3,Q[234]||(Q[234]=[a("",1)]))),Q[235]||(Q[235]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mi",null,"n")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[244]||(Q[244]=T("，")),t("strong",null,[t("mjx-container",_3,[(l(),e("svg",j3,Q[236]||(Q[236]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[237]||(Q[237]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"n")])],-1))]),Q[238]||(Q[238]=T("次乘法"))]),Q[245]||(Q[245]=T("、")),t("strong",null,[t("mjx-container",A3,[(l(),e("svg",C3,Q[239]||(Q[239]=[a("",1)]))),Q[240]||(Q[240]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"n"),t("mo",null,"−"),t("mn",null,"1")])],-1))]),Q[241]||(Q[241]=T("次加法"))])])]),t("li",null,[t("p",null,[Q[250]||(Q[250]=t("code",null,"整体复杂度",-1)),Q[251]||(Q[251]=T("：有")),t("mjx-container",S3,[(l(),e("svg",R3,Q[246]||(Q[246]=[a("",1)]))),Q[247]||(Q[247]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"d"),t("mn",null,"2")])])],-1))]),Q[252]||(Q[252]=T("个元素，共")),t("mjx-container",O3,[(l(),e("svg",E3,Q[248]||(Q[248]=[a("",1)]))),Q[249]||(Q[249]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"o"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),Q[253]||(Q[253]=T("，")),Q[254]||(Q[254]=t("code",null,"复杂度线性依赖于n",-1))])])])])])]),Q[626]||(Q[626]=t("h3",{id:"attention-概念",tabindex:"-1"},[T("Attention 概念 "),t("a",{class:"header-anchor",href:"#attention-概念","aria-label":'Permalink to "Attention 概念"'},"​")],-1)),t("div",P3,[Q[278]||(Q[278]=t("div",{class:"custom-block-title"},"Attention 概念",-1)),t("ul",null,[Q[268]||(Q[268]=a("",2)),t("li",null,[Q[267]||(Q[267]=t("p",null,[t("strong",null,"注意力权重")],-1)),t("ul",null,[t("li",null,[t("strong",null,[t("mjx-container",B3,[(l(),e("svg",I3,Q[259]||(Q[259]=[a("",1)]))),Q[260]||(Q[260]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"softmax"),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,"∗"),t("mi",null,"K"),t("mo",{stretchy:"false"},")")])],-1))])]),Q[263]||(Q[263]=T("： 即")),Q[264]||(Q[264]=t("code",null,"当前query对各个位置的注意力权重",-1)),t("mjx-container",z3,[(l(),e("svg",N3,Q[261]||(Q[261]=[a("",1)]))),Q[262]||(Q[262]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"α"),t("mn",null,"1")]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("msub",null,[t("mi",null,"α"),t("mi",null,"l")])])])],-1))]),Q[265]||(Q[265]=T("。"))]),Q[266]||(Q[266]=t("li",null,[T("早期QK有 "),t("code",null,"dot/concat/w"),T(" 这3种"),t("a",{href:"https://plmsmile.github.io/posts/olds/nlp/Attention-based-NMT.html#global-attention",target:"_blank",rel:"noreferrer"},"score计算的3种方式")],-1))])]),Q[269]||(Q[269]=t("li",null,[t("p",null,[t("strong",null,"加权求和")]),t("ul",null,[t("li",null,"利用注意力权重对各位置Value加权求和，就得到输出")])],-1))]),t("mjx-container",X3,[(l(),e("svg",G3,Q[270]||(Q[270]=[a("",1)]))),Q[271]||(Q[271]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtext",null,"Attention"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V")]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"softmax")]),t("mo",{stretchy:"false"},"("),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("mi",null,"Q"),t("msup",null,[t("mi",null,"K"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mstyle",{mathcolor:"blue"},[t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])])]),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("mi",null,"V")])])],-1))]),t("ul",null,[t("li",null,[Q[274]||(Q[274]=T("除以")),t("mjx-container",J3,[(l(),e("svg",q3,Q[272]||(Q[272]=[a("",1)]))),Q[273]||(Q[273]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])])],-1))]),Q[275]||(Q[275]=T("进行缩放，")),Q[276]||(Q[276]=t("strong",null,"防止梯度爆炸",-1)),Q[277]||(Q[277]=T(","))])])]),Q[627]||(Q[627]=a("",8)),t("div",K3,[Q[347]||(Q[347]=t("div",{class:"custom-block-title"},"Attention 推导",-1)),Q[348]||(Q[348]=t("p",null,[t("strong",null,"符号定义")],-1)),t("ul",null,[t("li",null,[Q[281]||(Q[281]=T("假设dim=")),t("mjx-container",F3,[(l(),e("svg",U3,Q[279]||(Q[279]=[a("",1)]))),Q[280]||(Q[280]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])],-1))]),Q[282]||(Q[282]=T("，部分公式")),Q[283]||(Q[283]=t("strong",null,"省略缩放、softmax、向量转置等",-1)),Q[284]||(Q[284]=T("。"))]),t("li",null,[t("mjx-container",W3,[(l(),e("svg",$3,Q[285]||(Q[285]=[a("",1)]))),Q[286]||(Q[286]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mtext",null,"Attn"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"e"),t("mi",null,"p"),t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")])])],-1))]),Q[287]||(Q[287]=T("：")),Q[288]||(Q[288]=t("code",null,"第i步的完整Attention矩阵",-1))]),t("li",null,[t("mjx-container",Y3,[(l(),e("svg",t2,Q[289]||(Q[289]=[a("",1)]))),Q[290]||(Q[290]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mtext",null,"Attn"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")])])],-1))]),Q[291]||(Q[291]=T("：")),Q[292]||(Q[292]=t("code",null,"attention矩阵的第i行",-1))])]),Q[349]||(Q[349]=t("p",null,[t("strong",null,"Step=1，共1行")],-1)),t("ul",null,[t("li",null,[Q[295]||(Q[295]=t("code",null,"第1行",-1)),Q[296]||(Q[296]=T("：")),t("strong",null,[t("mjx-container",Q2,[(l(),e("svg",T2,Q[293]||(Q[293]=[a("",1)]))),Q[294]||(Q[294]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"1")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mtext",null,"softmaxted"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"V"),t("mo",{stretchy:"false"},"→")])]),t("mn",null,"1")]),t("mo",null,"="),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"V"),t("mo",{stretchy:"false"},"→")])]),t("mn",null,"1")])])],-1))])])])]),t("mjx-container",a2,[(l(),e("svg",e2,Q[297]||(Q[297]=[a("",1)]))),Q[298]||(Q[298]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",null,[t("msub",null,[t("mtext",null,"Attn"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"e"),t("mi",null,"p"),t("mn",null,"1")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")])]),t("mtd",null,[t("mo",null,"="),t("mtext",null,"softmax"),t("mo",{stretchy:"false"},"("),t("mfrac",null,[t("mrow",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("mi",null,"K"),t("msup",null,[t("mn",null,"1"),t("mi",null,"T")])]),t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])]),t("mo",{stretchy:"false"},")"),t("mo",null,"×"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",{mathvariant:"normal"},"⊤")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",null,[t("mtext",null,"softmax"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"×"),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")]),t("mo",{stretchy:"false"},"→")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mtext",null,"Attn"),t("mn",null,"1")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])])])])])],-1))]),Q[350]||(Q[350]=t("p",null,[t("strong",null,"Step=2，共2行")],-1)),t("ul",null,[t("li",null,[Q[301]||(Q[301]=t("code",null,"第1行",-1)),Q[302]||(Q[302]=T("：")),t("strong",null,[t("mjx-container",l2,[(l(),e("svg",s2,Q[299]||(Q[299]=[a("",1)]))),Q[300]||(Q[300]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"1")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"V"),t("mo",{stretchy:"false"},"→")])]),t("mn",null,"1")])])],-1))])]),Q[303]||(Q[303]=T("，")),Q[304]||(Q[304]=t("code",null,"step1已算过",-1))]),t("li",null,[Q[307]||(Q[307]=t("code",null,"第2行",-1)),Q[308]||(Q[308]=T("：")),t("strong",null,[t("mjx-container",m2,[(l(),e("svg",o2,Q[305]||(Q[305]=[a("",1)]))),Q[306]||(Q[306]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"V"),t("mo",{stretchy:"false"},"→")])]),t("mn",null,"1")]),t("mo",null,"+"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"V"),t("mo",{stretchy:"false"},"→")])]),t("mn",null,"2")])])],-1))])])])]),t("mjx-container",d2,[(l(),e("svg",n2,Q[309]||(Q[309]=[a("",1)]))),Q[310]||(Q[310]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"e"),t("mi",null,"p"),t("mn",null,"2")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")])]),t("mtd",null,[t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"K"),t("mn",null,"1")])]),t("mtd",null,[t("msub",null,[t("mi",null,"K"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")])]),t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",null,"T")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"Q"),t("mn",null,"1"),t("mi",{mathvariant:"normal"},"不"),t("mi",{mathvariant:"normal"},"能"),t("mi",{mathvariant:"normal"},"看"),t("mi",{mathvariant:"normal"},"见"),t("mi",null,"K"),t("mn",null,"2")])])])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")])]),t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",null,"T")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"="),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")])]),t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mo",null,"−"),t("mi",{mathvariant:"normal"},"∞")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")])]),t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",null,"T")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"normal"},"被"),t("mi",null,"m"),t("mi",null,"a"),t("mi",null,"s"),t("mi",null,"k"),t("mi",{mathvariant:"normal"},"掉"),t("mi",null,"，"),t("mi",null,"s"),t("mi",null,"o"),t("mi",null,"f"),t("mi",null,"t"),t("mi",null,"m"),t("mi",null,"a"),t("mi",null,"x"),t("mi",{mathvariant:"normal"},"为"),t("mi",{mathvariant:"normal"},"负"),t("mi",{mathvariant:"normal"},"无"),t("mi",{mathvariant:"normal"},"穷")])])]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msub",null,[t("mi",null,"K"),t("mn",null,"1")])]),t("mtd",null,[t("mstyle",null,[t("mn",null,"0")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msub",null,[t("mi",null,"K"),t("mn",null,"1")])]),t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msub",null,[t("mi",null,"K"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"过"),t("mi",{mathvariant:"normal"},"了"),t("mi",null,"s"),t("mi",null,"o"),t("mi",null,"f"),t("mi",null,"t"),t("mi",null,"m"),t("mi",null,"a"),t("mi",null,"x"),t("mi",{mathvariant:"normal"},"和"),t("mi",{mathvariant:"normal"},"缩"),t("mi",{mathvariant:"normal"},"放"),t("mi",null,"，"),t("mi",{mathvariant:"normal"},"简"),t("mi",{mathvariant:"normal"},"写")])])]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])])]),t("mtr",null,[t("mtd",null,[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msub",null,[t("mi",null,"K"),t("mn",null,"1")]),t("msub",null,[t("mi",null,"V"),t("mn",null,"1")]),t("mo",null,"+"),t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msub",null,[t("mi",null,"K"),t("mn",null,"2")]),t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"["),t("mtable",{columnalign:"center",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")])])])]),t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",{mathvariant:"normal"},"⊤")]),t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",{mathvariant:"normal"},"⊤")]),t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])])]),t("mo",{"data-mjx-texclass":"CLOSE"},"]")])])])])])])],-1))]),Q[351]||(Q[351]=t("p",null,[t("strong",null,"Step=3, 共3行")],-1)),t("ul",null,[t("li",null,[Q[313]||(Q[313]=t("code",null,"第1行",-1)),Q[314]||(Q[314]=T("：")),t("mjx-container",r2,[(l(),e("svg",i2,Q[311]||(Q[311]=[a("",1)]))),Q[312]||(Q[312]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"1")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"1")])]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",null,"V"),t("mn",null,"1")])])])],-1))]),Q[315]||(Q[315]=T("，")),Q[316]||(Q[316]=t("code",null,"第1步已算过",-1))]),t("li",null,[Q[319]||(Q[319]=t("code",null,"第2行",-1)),Q[320]||(Q[320]=T("：")),t("mjx-container",h2,[(l(),e("svg",g2,Q[317]||(Q[317]=[a("",1)]))),Q[318]||(Q[318]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")])]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",null,"V"),t("mn",null,"1")]),t("mo",null,"+"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"2")])]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",null,"V"),t("mn",null,"2")])])])],-1))]),Q[321]||(Q[321]=T("，")),Q[322]||(Q[322]=t("code",null,"第2步已算过",-1))]),t("li",null,[Q[325]||(Q[325]=t("code",null,"第3行",-1)),Q[326]||(Q[326]=T("：")),t("mjx-container",p2,[(l(),e("svg",H2,Q[323]||(Q[323]=[a("",1)]))),Q[324]||(Q[324]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"A"),t("mi",null,"t"),t("mi",null,"t"),t("msub",null,[t("mi",null,"n"),t("mn",null,"3")]),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"K"),t("mo",null,","),t("mi",null,"V"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"3")])]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"1"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",null,"V"),t("mn",null,"1")]),t("mo",null,"+"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"3")])]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"2"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",null,"V"),t("mn",null,"2")]),t("mo",null,"+"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mn",null,"3")])]),t("msubsup",null,[t("mi",null,"K"),t("mn",null,"3"),t("mi",null,"T")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",null,"V"),t("mn",null,"3")])])],-1))]),Q[327]||(Q[327]=T("，")),Q[328]||(Q[328]=t("code",null,"第3步算第3行",-1))])]),Q[352]||(Q[352]=t("p",null,[t("strong",null,"结论")],-1)),t("ul",null,[Q[346]||(Q[346]=t("li",null,[t("p",null,[T("每一步都"),t("code",null,"存在大量冗余"),T("，"),t("code",null,"第i步"),T("，只需要"),t("code",null,"计算第i行"),T("即可，"),t("code",null,"前i-1行都已经计算过")])],-1)),t("li",null,[t("p",null,[Q[331]||(Q[331]=T("矩阵中，第k行只和")),t("mjx-container",u2,[(l(),e("svg",L2,Q[329]||(Q[329]=[a("",1)]))),Q[330]||(Q[330]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"Q"),t("mi",null,"k")])])],-1))]),Q[332]||(Q[332]=T("相关，和其余位置的Q无关。"))]),t("ul",null,[t("li",null,[t("mjx-container",c2,[(l(),e("svg",w2,Q[333]||(Q[333]=[a("",1)]))),Q[334]||(Q[334]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"Q"),t("mi",null,"k")])])],-1))]),Q[337]||(Q[337]=T("会和前面的每一对")),t("mjx-container",x2,[(l(),e("svg",y2,Q[335]||(Q[335]=[a("",1)]))),Q[336]||(Q[336]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"K"),t("mi",null,"i")]),t("mo",null,","),t("msub",null,[t("mi",null,"V"),t("mi",null,"i")])])],-1))]),Q[338]||(Q[338]=T("做attention计算，来计算当前行。"))])])]),t("li",null,[t("p",null,[Q[343]||(Q[343]=T("解码")),t("mjx-container",f2,[(l(),e("svg",V2,Q[339]||(Q[339]=[a("",1)]))),Q[340]||(Q[340]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"x"),t("mi",null,"k")])])],-1))]),Q[344]||(Q[344]=T("，只需输入字符")),t("mjx-container",k2,[(l(),e("svg",M2,Q[341]||(Q[341]=[a("",1)]))),Q[342]||(Q[342]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"x"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"k"),t("mo",null,"−"),t("mn",null,"1")])])])],-1))]),Q[345]||(Q[345]=T("即可。"))])])])]),Q[628]||(Q[628]=t("h3",{id:"几个重点思考-降维-dk等",tabindex:"-1"},[T("几个重点思考(降维/dk等) "),t("a",{class:"header-anchor",href:"#几个重点思考-降维-dk等","aria-label":'Permalink to "几个重点思考(降维/dk等)"'},"​")],-1)),t("div",b2,[Q[425]||(Q[425]=t("div",{class:"custom-block-title"},"重要思考",-1)),Q[426]||(Q[426]=t("p",null,[t("strong",null,"1、Self-Attention Padding 做 Mask")],-1)),t("ul",null,[t("li",null,[t("mjx-container",Z2,[(l(),e("svg",v2,Q[353]||(Q[353]=[a("",1)]))),Q[354]||(Q[354]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"Q"),t("mo",null,"⋅"),t("mi",null,"K")])],-1))]),Q[357]||(Q[357]=T(" ，需要对padding部分置为")),t("mjx-container",D2,[(l(),e("svg",_2,Q[355]||(Q[355]=[a("",1)]))),Q[356]||(Q[356]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",null,"−"),t("mi",{mathvariant:"normal"},"∞")])],-1))]),Q[358]||(Q[358]=T("负无穷，再过Softmax才会为0。"))])]),Q[427]||(Q[427]=t("p",null,[t("strong",null,"2、Transformer Multi-Head Attention 要对head 进行降维")],-1)),t("ul",null,[t("li",null,[Q[363]||(Q[363]=T("输入向量维度为")),t("mjx-container",j2,[(l(),e("svg",A2,Q[359]||(Q[359]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[360]||(Q[360]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"d")])],-1))]),Q[364]||(Q[364]=T("，需要降维到 ")),t("mjx-container",C2,[(l(),e("svg",S2,Q[361]||(Q[361]=[a("",1)]))),Q[362]||(Q[362]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"d"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-alternate":"1"},"′")])])])],-1))]),Q[365]||(Q[365]=T("（远小于d），主要是为了")),Q[366]||(Q[366]=t("code",null,"降低计算复杂度",-1))]),t("li",null,[Q[369]||(Q[369]=T("时间复杂度：")),t("mjx-container",R2,[(l(),e("svg",O2,Q[367]||(Q[367]=[a("",1)]))),Q[368]||(Q[368]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"、")]),t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mi",null,"h"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mo",{stretchy:"false"},"→"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mi",null,"d"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-alternate":"1"},"′")])])]),t("mn",null,"2")]),t("mo",{stretchy:"false"},")"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"、")]),t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mi",null,"h"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mi",null,"d"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-alternate":"1"},"′")])])]),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])],-1))])])]),Q[428]||(Q[428]=t("p",null,[t("strong",null,"3、维度和点击的关系")],-1)),t("ul",null,[t("li",null,[t("p",null,[t("mjx-container",E2,[(l(),e("svg",P2,Q[370]||(Q[370]=[a("",1)]))),Q[371]||(Q[371]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"q"),t("mo",null,","),t("mi",null,"k")])],-1))]),Q[376]||(Q[376]=T("向量 维度d越大，点积值")),t("mjx-container",B2,[(l(),e("svg",I2,Q[372]||(Q[372]=[a("",1)]))),Q[373]||(Q[373]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k")])],-1))]),Q[377]||(Q[377]=T("越大，点积属于均值0、方差")),t("mjx-container",z2,[(l(),e("svg",N2,Q[374]||(Q[374]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[375]||(Q[375]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"d")])],-1))]),Q[378]||(Q[378]=T("的正态分布。"))]),t("mjx-container",X2,[(l(),e("svg",G2,Q[379]||(Q[379]=[a("",1)]))),Q[380]||(Q[380]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"E"),t("mo",{stretchy:"false"},"("),t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mn",null,"0"),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mi",null,"d")])],-1))])]),t("li",null,[Q[383]||(Q[383]=t("p",null,"方差的性质",-1)),t("mjx-container",J2,[(l(),e("svg",q2,Q[381]||(Q[381]=[a("",1)]))),Q[382]||(Q[382]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mi",null,"c"),t("mi",null,"x"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("msup",null,[t("mi",null,"c"),t("mn",null,"2")]),t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mi",null,"x"),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mi",null,"c"),t("mo",null,"+"),t("mi",null,"x"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mi",null,"x"),t("mo",{stretchy:"false"},")"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"。")]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",null,"c"),t("mi",{mathvariant:"normal"},"为"),t("mi",{mathvariant:"normal"},"常"),t("mi",{mathvariant:"normal"},"数")])],-1))])])]),t("p",null,[t("strong",null,[Q[386]||(Q[386]=T("3、深入理解")),t("mjx-container",K2,[(l(),e("svg",F2,Q[384]||(Q[384]=[a("",1)]))),Q[385]||(Q[385]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])])],-1))]),Q[387]||(Q[387]=T("缓解梯度爆炸问题"))])]),t("ul",null,[t("li",null,[t("p",null,[Q[392]||(Q[392]=T("Attention计算过程：内积")),t("mjx-container",U2,[(l(),e("svg",W2,Q[388]||(Q[388]=[a("",1)]))),Q[389]||(Q[389]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"Q"),t("mi",null,"K")])],-1))]),Q[393]||(Q[393]=T("后 -> softmax。softmax主要入参是")),t("mjx-container",$2,[(l(),e("svg",Y2,Q[390]||(Q[390]=[a("",1)]))),Q[391]||(Q[391]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"q"),t("mi",null,"k")])])])],-1))]),Q[394]||(Q[394]=T("。"))])]),t("li",null,[Q[401]||(Q[401]=t("p",null,[t("strong",null,"如果不进行缩放"),T("：")],-1)),t("ul",null,[t("li",null,[Q[397]||(Q[397]=T("softmax入参在")),t("mjx-container",t4,[(l(),e("svg",Q4,Q[395]||(Q[395]=[a("",1)]))),Q[396]||(Q[396]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mo",{stretchy:"false"},"["),t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"−"),t("mn",null,"3"),t("msqrt",null,[t("mi",null,"d")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"3"),t("msqrt",null,[t("mi",null,"d")])])]),t("mo",{stretchy:"false"},"]")])])],-1))]),Q[398]||(Q[398]=T("之间，")),Q[399]||(Q[399]=t("code",null,"会很大或很小",-1)),Q[400]||(Q[400]=t("ul",null,[t("li",null,[T("导致"),t("code",null,"注意力权重"),T(" 接近"),t("code",null,"one-hot分布")]),t("li",null,[t("strong",null,"饱和区梯度消失"),T("："),t("code",null,"x值继续变大，y几乎不变")])],-1))])])]),t("li",null,[t("p",null,[Q[405]||(Q[405]=T("因此：")),t("strong",null,[Q[404]||(Q[404]=T("QK后才除以")),t("mjx-container",T4,[(l(),e("svg",a4,Q[402]||(Q[402]=[a("",1)]))),Q[403]||(Q[403]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msqrt",null,[t("msub",null,[t("mi",null,"d"),t("mi",null,"k")])])])],-1))])])]),t("ul",null,[t("li",null,[Q[408]||(Q[408]=T("使得")),Q[409]||(Q[409]=t("code",null,"softmax入参",-1)),Q[410]||(Q[410]=T("在")),t("mjx-container",e4,[(l(),e("svg",l4,Q[406]||(Q[406]=[a("",1)]))),Q[407]||(Q[407]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"−"),t("mn",null,"3")])]),t("mo",null,","),t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"3")])]),t("mo",{stretchy:"false"},"]")])],-1))]),Q[411]||(Q[411]=T("之间，")),Q[412]||(Q[412]=t("code",null,"不大也不小",-1))])])]),t("li",null,[Q[423]||(Q[423]=t("p",null,"数学思路",-1)),t("ul",null,[t("li",null,[t("mjx-container",s4,[(l(),e("svg",m4,Q[413]||(Q[413]=[a("",1)]))),Q[414]||(Q[414]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k")])],-1))]),Q[417]||(Q[417]=T(" 除以")),t("mjx-container",o4,[(l(),e("svg",d4,Q[415]||(Q[415]=[a("",1)]))),Q[416]||(Q[416]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msqrt",null,[t("mi",null,"d")])])],-1))]),Q[418]||(Q[418]=T("，抵消掉，由0-d正态分布，")),Q[419]||(Q[419]=t("strong",null,"又回到0-1正态分布",-1)),Q[420]||(Q[420]=T("。"))])]),t("mjx-container",n4,[(l(),e("svg",r4,Q[421]||(Q[421]=[a("",1)]))),Q[422]||(Q[422]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"E"),t("mo",{stretchy:"false"},"("),t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mn",null,"0"),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mi",null,"d"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mo",{stretchy:"false"},"⇒"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",null,"D"),t("mo",{stretchy:"false"},"("),t("mfrac",null,[t("mrow",null,[t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k")]),t("msqrt",null,[t("mi",null,"d")])]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mi",null,"q"),t("mo",null,"⋅"),t("mi",null,"k")]),t("mrow",null,[t("mo",{stretchy:"false"},"("),t("msqrt",null,[t("mi",null,"d")]),t("msup",null,[t("mo",{stretchy:"false"},")"),t("mn",null,"2")])])]),t("mo",null,"="),t("mn",null,"1")])],-1))]),Q[424]||(Q[424]=t("ul",null,[t("li",null,"方差为1，有效控制点积结果发散，应对了梯度消失问题。")],-1))])])]),Q[629]||(Q[629]=a("",4)),t("div",i4,[Q[446]||(Q[446]=t("div",{class:"custom-block-title"},"线性注意力核心思想",-1)),Q[447]||(Q[447]=t("p",null,[t("strong",null,"背景")],-1)),t("ul",null,[t("li",null,[Q[437]||(Q[437]=T("把FullAttention 复杂度")),t("mjx-container",h4,[(l(),e("svg",g4,Q[429]||(Q[429]=[a("",1)]))),Q[430]||(Q[430]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),Q[438]||(Q[438]=T("变为")),t("mjx-container",p4,[(l(),e("svg",H4,Q[431]||(Q[431]=[a("",1)]))),Q[432]||(Q[432]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),Q[439]||(Q[439]=T("，")),t("mjx-container",u4,[(l(),e("svg",L4,Q[433]||(Q[433]=[a("",1)]))),Q[434]||(Q[434]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),Q[440]||(Q[440]=T(" 变成 ")),t("mjx-container",c4,[(l(),e("svg",w4,Q[435]||(Q[435]=[a("",1)]))),Q[436]||(Q[436]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("mo",{stretchy:"false"},")")])])],-1))]),Q[441]||(Q[441]=T("，即")),Q[442]||(Q[442]=t("code",null,"平方复杂度",-1)),Q[443]||(Q[443]=T("变成")),Q[444]||(Q[444]=t("code",null,"线性复杂度",-1)),Q[445]||(Q[445]=T("。"))])]),Q[448]||(Q[448]=a("",6))]),Q[630]||(Q[630]=t("h4",{id:"线性注意力基本公式",tabindex:"-1"},[T("线性注意力基本公式 "),t("a",{class:"header-anchor",href:"#线性注意力基本公式","aria-label":'Permalink to "线性注意力基本公式"'},"​")],-1)),t("div",x4,[Q[484]||(Q[484]=t("div",{class:"custom-block-title"},"线性注意力",-1)),Q[485]||(Q[485]=t("p",null,[t("strong",null,"线性注意力基本公式")],-1)),t("ul",null,[t("li",null,[Q[453]||(Q[453]=t("code",null,"交换位置",-1)),Q[454]||(Q[454]=T("，")),Q[455]||(Q[455]=t("code",null,"时间复杂度",-1)),Q[456]||(Q[456]=T("由")),t("mjx-container",y4,[(l(),e("svg",f4,Q[449]||(Q[449]=[a("",1)]))),Q[450]||(Q[450]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"o"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),Q[457]||(Q[457]=T("变为")),t("mjx-container",V4,[(l(),e("svg",k4,Q[451]||(Q[451]=[a("",1)]))),Q[452]||(Q[452]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"o"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("msup",null,[t("mi",null,"d"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])])],-1))]),Q[458]||(Q[458]=T("，")),Q[459]||(Q[459]=t("code",null,"线性依赖于n",-1)),Q[460]||(Q[460]=T("。 ")),Q[461]||(Q[461]=t("ul",null,[t("li",null,[T("复杂度例子见上文 "),t("a",{href:"http://plmsmile.github.io/posts/llm/basic/02-llm-components.html#softmax%E5%92%8Clinear%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6",target:"_blank",rel:"noreferrer"},"Softmax和Linear时间复杂度")])],-1))])]),t("mjx-container",M4,[(l(),e("svg",b4,Q[462]||(Q[462]=[a("",1)]))),Q[463]||(Q[463]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"O")]),t("mo",null,"="),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"n")])])])])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("mo",{stretchy:"false"},"⟹"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"Q")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"n"),t("mo",null,"×"),t("mi",null,"d")])])])])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msup",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"K")]),t("mi",{mathvariant:"normal"},"⊤")]),t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold-italic"},"V")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"d")])])])])])])],-1))]),t("ul",null,[t("li",null,[Q[469]||(Q[469]=t("p",null,"分量形式",-1)),t("mjx-container",Z4,[(l(),e("svg",v4,Q[464]||(Q[464]=[a("",1)]))),Q[465]||(Q[465]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"向"),t("mi",{mathvariant:"normal"},"量")])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")]),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"标"),t("mi",{mathvariant:"normal"},"量")])]),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",{stretchy:"false"},")"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"q")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])])],-1))]),t("ul",null,[t("li",null,[Q[468]||(Q[468]=T("各元素维度")),t("mjx-container",D4,[(l(),e("svg",_4,Q[466]||(Q[466]=[a("",1)]))),Q[467]||(Q[467]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mn",null,"1")])])]),t("mi",null,"，"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"×"),t("mi",null,"d")])])]),t("mi",null,"，"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"q")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mn",null,"1")])])]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mo",{stretchy:"false"},"→"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")]),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"1"),t("mo",null,"×"),t("mn",null,"1")])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"d")])])])])],-1))])])])])]),Q[486]||(Q[486]=t("p",null,[t("strong",null,"状态公式")],-1)),t("ul",null,[t("li",null,[Q[476]||(Q[476]=T("记括号部分为")),t("mjx-container",j4,[(l(),e("svg",A4,Q[470]||(Q[470]=[a("",1)]))),Q[471]||(Q[471]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])])],-1))]),Q[477]||(Q[477]=T("，Casual形式的Attention可写成")),Q[478]||(Q[478]=t("strong",null,"以",-1)),t("mjx-container",C4,[(l(),e("svg",S4,Q[472]||(Q[472]=[a("",1)]))),Q[473]||(Q[473]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])])],-1))]),Q[479]||(Q[479]=t("strong",null,"为状态",-1)),Q[480]||(Q[480]=T("的")),Q[481]||(Q[481]=t("code",null,"线性RNN",-1)),t("mjx-container",R4,[(l(),e("svg",O4,Q[474]||(Q[474]=[a("",1)]))),Q[475]||(Q[475]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"q")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t"),t("mo",null,"−"),t("mn",null,"1")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"t")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"t"),t("mi",{mathvariant:"normal"},"⊤")])])])],-1))])])]),t("mjx-container",E4,[(l(),e("svg",P4,Q[482]||(Q[482]=[a("",1)]))),Q[483]||(Q[483]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"j")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"j"),t("mi",{mathvariant:"normal"},"⊤")])])])],-1))]),Q[487]||(Q[487]=t("ul",null,[t("li",null,[t("code",null,"线性Attention"),T("：本质是一个"),t("code",null,"cumsum"),T("，将"),t("code",null,"所有历史信息"),T(),t("code",null,"等权地叠加"),T("。")])],-1))]),Q[631]||(Q[631]=t("h4",{id:"记忆遗忘及解决方法-retnet-minimax-01",tabindex:"-1"},[T("记忆遗忘及解决方法(RetNet/Minimax-01) "),t("a",{class:"header-anchor",href:"#记忆遗忘及解决方法-retnet-minimax-01","aria-label":'Permalink to "记忆遗忘及解决方法(RetNet/Minimax-01)"'},"​")],-1)),t("div",B4,[Q[516]||(Q[516]=t("div",{class:"custom-block-title"},"提示",-1)),Q[517]||(Q[517]=t("p",null,[t("strong",null,"现行Attention 记忆遗忘缺点")],-1)),t("ul",null,[Q[498]||(Q[498]=t("li",null,[T("本质是"),t("code",null,"cumsum"),T("，各历史信息"),t("code",null,"同等权重叠加"),T("。")],-1)),Q[499]||(Q[499]=t("li",null,[T("当叠加"),t("code",null,"token足够多时"),T("，"),t("code",null,"每个token的信息占比"),T("会变得"),t("code",null,"很小"),T("。")],-1)),t("li",null,[Q[490]||(Q[490]=T("仅靠")),Q[491]||(Q[491]=t("code",null,"固定大小矩阵",-1)),Q[492]||(Q[492]=T()),t("mjx-container",I4,[(l(),e("svg",z4,Q[488]||(Q[488]=[a("",1)]))),Q[489]||(Q[489]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"∈"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"R")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("mo",null,"×"),t("mi",null,"d")])])])])],-1))]),Q[493]||(Q[493]=T("难以准确重建任意token，")),Q[494]||(Q[494]=t("code",null,"每个token的记忆",-1)),Q[495]||(Q[495]=T("会变得")),Q[496]||(Q[496]=t("code",null,"模糊不清",-1)),Q[497]||(Q[497]=T("。"))])]),Q[518]||(Q[518]=t("p",null,[t("strong",null,"RetNet/MiniMax-01：增加衰减因子")],-1)),t("ul",null,[t("li",null,[Q[502]||(Q[502]=t("strong",null,"衰减因子",-1)),t("mjx-container",N4,[(l(),e("svg",X4,Q[500]||(Q[500]=[a("",1)]))),Q[501]||(Q[501]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"γ")])])],-1))]),Q[503]||(Q[503]=T("：模型倾向于")),Q[504]||(Q[504]=t("code",null,"遗忘早期信息",-1)),Q[505]||(Q[505]=T("，就近原则"))])]),t("mjx-container",G4,[(l(),e("svg",J4,Q[506]||(Q[506]=[a("",1)]))),Q[507]||(Q[507]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"q")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mi",null,"γ")]),t("mo",null,"⋅"),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t"),t("mo",null,"−"),t("mn",null,"1")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"t")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"t"),t("mi",{mathvariant:"normal"},"⊤")])])])],-1))]),Q[519]||(Q[519]=t("p",null,[t("strong",null,"DFW/Mamba/Mamba2")],-1)),t("ul",null,[t("li",null,[Q[514]||(Q[514]=T("把衰减因子")),t("mjx-container",q4,[(l(),e("svg",K4,Q[508]||(Q[508]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D6FE",d:"M31 249Q11 249 11 258Q11 275 26 304T66 365T129 418T206 441Q233 441 239 440Q287 429 318 386T371 255Q385 195 385 170Q385 166 386 166L398 193Q418 244 443 300T486 391T508 430Q510 431 524 431H537Q543 425 543 422Q543 418 522 378T463 251T391 71Q385 55 378 6T357 -100Q341 -165 330 -190T303 -216Q286 -216 286 -188Q286 -138 340 32L346 51L347 69Q348 79 348 100Q348 257 291 317Q251 355 196 355Q148 355 108 329T51 260Q49 251 47 251Q45 249 31 249Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[509]||(Q[509]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"γ")])],-1))]),Q[515]||(Q[515]=T("推广为位置t的函数")),t("mjx-container",F4,[(l(),e("svg",U4,Q[510]||(Q[510]=[a("",1)]))),Q[511]||(Q[511]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"γ"),t("mo",{stretchy:"false"},"("),t("mi",null,"t"),t("mo",{stretchy:"false"},")")])],-1))]),t("mjx-container",W4,[(l(),e("svg",$4,Q[512]||(Q[512]=[a("",1)]))),Q[513]||(Q[513]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"q")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mi",null,"γ"),t("mo",{stretchy:"false"},"("),t("mi",null,"t"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t"),t("mo",null,"−"),t("mn",null,"1")])]),t("mo",null,"+"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"t")])]),t("mstyle",{mathcolor:"blue"},[t("msubsup",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"t"),t("mi",{mathvariant:"normal"},"⊤")])])])],-1))])])])]),Q[632]||(Q[632]=t("h4",{id:"testtimetraining",tabindex:"-1"},[T("TestTimeTraining "),t("a",{class:"header-anchor",href:"#testtimetraining","aria-label":'Permalink to "TestTimeTraining"'},"​")],-1)),t("div",Y4,[Q[550]||(Q[550]=t("div",{class:"custom-block-title"},"Test Time Training",-1)),Q[551]||(Q[551]=t("p",null,[t("strong",null,"TTT 思想")],-1)),t("ul",null,[t("li",null,[t("p",null,[Q[526]||(Q[526]=T("把 ")),t("strong",null,[t("mjx-container",t6,[(l(),e("svg",Q6,Q[520]||(Q[520]=[a("",1)]))),Q[521]||(Q[521]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",{mathvariant:"bold-italic"},"K"),t("mo",{mathvariant:"bold"},","),t("mi",{mathvariant:"bold-italic"},"V")])],-1))]),Q[522]||(Q[522]=T("视作语料对"))]),Q[527]||(Q[527]=T("，根据语料训练模型，")),t("strong",null,[t("mjx-container",T6,[(l(),e("svg",a6,Q[523]||(Q[523]=[a("",1)]))),Q[524]||(Q[524]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"S"),t("mi",{mathvariant:"bold-italic"},"t")])])],-1))]),Q[525]||(Q[525]=T("为模型参数"))])]),t("mjx-container",e6,[(l(),e("svg",l6,Q[528]||(Q[528]=[a("",1)]))),Q[529]||(Q[529]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mn",null,"1")]),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mn",null,"2")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"k"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",{mathvariant:"bold-italic"},"v"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])],-1))])]),t("li",null,[Q[532]||(Q[532]=t("p",null,"最后输出",-1)),t("mjx-container",s6,[(l(),e("svg",m6,Q[530]||(Q[530]=[a("",1)]))),Q[531]||(Q[531]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"f")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"S"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",{stretchy:"false"},")")])],-1))])])]),Q[552]||(Q[552]=t("p",null,[t("strong",null,"TTT 实现的RNN")],-1)),t("ul",null,[t("li",null,[t("p",null,[Q[539]||(Q[539]=T("当前模型参数为")),t("mjx-container",o6,[(l(),e("svg",d6,Q[533]||(Q[533]=[a("",1)]))),Q[534]||(Q[534]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t"),t("mo",null,"−"),t("mn",null,"1")])])])],-1))]),Q[540]||(Q[540]=T("，优化器接收到新数据")),t("mjx-container",n6,[(l(),e("svg",r6,Q[535]||(Q[535]=[a("",1)]))),Q[536]||(Q[536]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"k"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"v"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[541]||(Q[541]=T("，更新模型参数为")),t("mjx-container",i6,[(l(),e("svg",h6,Q[537]||(Q[537]=[a("",1)]))),Q[538]||(Q[538]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])])],-1))])]),t("mjx-container",g6,[(l(),e("svg",p6,Q[542]||(Q[542]=[a("",1)]))),Q[543]||(Q[543]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"o"),t("mi",null,"t")])]),t("mo",null,"="),t("mi",null,"f"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"S"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"S")]),t("mstyle",{mathcolor:"red"},[t("mi",null,"t"),t("mo",null,"−"),t("mn",null,"1")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"η"),t("mi",null,"t")]),t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"S"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"−"),t("mn",null,"1")])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"bold-italic"},"f")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"S"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"bold-italic"},"q"),t("mstyle",{mathcolor:"red"},[t("mi",null,"t")])])]),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("msub",null,[t("mi",null,"v"),t("mi",null,"t")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))])]),Q[549]||(Q[549]=t("li",null,[t("p",null,"RNN：把历史数据有效压缩到一个固定大小的State中，而模型参数正好是固定大小的。")],-1)),t("li",null,[Q[548]||(Q[548]=t("p",null,"类比",-1)),t("ul",null,[t("li",null,[Q[546]||(Q[546]=T("压缩任务：RNN；解压器：模型")),t("mjx-container",H6,[(l(),e("svg",u6,Q[544]||(Q[544]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[545]||(Q[545]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"f")])],-1))]),Q[547]||(Q[547]=T("；压缩包：权重；压缩算法：SGD；压缩率：损失L"))])])])])]),Q[633]||(Q[633]=a("",5)),t("div",L6,[Q[562]||(Q[562]=t("div",{class:"custom-block-title"},"核心思想",-1)),Q[563]||(Q[563]=t("p",null,[t("strong",null,"背景")],-1)),t("ul",null,[t("li",null,[Q[555]||(Q[555]=T("传统Softmax Attention，时间复杂度")),Q[556]||(Q[556]=t("code",null,"随长度二次方增加",-1)),Q[557]||(Q[557]=T()),t("mjx-container",c6,[(l(),e("svg",w6,Q[553]||(Q[553]=[a("",1)]))),Q[554]||(Q[554]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")])]),t("mo",{stretchy:"false"},")")])],-1))]),Q[558]||(Q[558]=T("，不利于长度扩展。"))])]),Q[564]||(Q[564]=a("",3)),t("ul",null,[t("li",null,[Q[561]||(Q[561]=T("在性能和效率之间取得平衡，复杂度可降低到")),t("mjx-container",x6,[(l(),e("svg",y6,Q[559]||(Q[559]=[a("",1)]))),Q[560]||(Q[560]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mi",null,"n"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mi",null,"n"),t("mo",{stretchy:"false"},")")])])],-1))])])]),Q[565]||(Q[565]=t("p",null,[t("strong",null,"传统稀疏注意力的缺点")],-1)),Q[566]||(Q[566]=t("ul",null,[t("li",null,"实际效果并不好：加速不好、且缺乏预训练等。"),t("li",null,[T("具体见笔记 "),t("a",{href:"http://plmsmile.github.io/posts/llm/industry/mainllm/02-deepseek-series.html#%E7%A8%80%E7%96%8F%E6%B3%A8%E6%84%8F%E5%8A%9B%E5%AE%9E%E9%99%85%E6%95%88%E6%9E%9C%E5%B9%B6%E4%B8%8D%E5%A5%BD",target:"_blank",rel:"noreferrer"},"Native Sparse Attention ：稀疏注意力实际效果并不好")])],-1))]),Q[634]||(Q[634]=a("",6)),t("div",f6,[Q[576]||(Q[576]=t("div",{class:"custom-block-title"},"MHA + MQA + GQA + MLA",-1)),Q[577]||(Q[577]=t("p",null,[t("strong",null,"Multi-Head Attention")],-1)),Q[578]||(Q[578]=t("ul",null,[t("li",null,[T("并行计算"),t("code",null,"多个子空间QKV的注意力"),T("，"),t("code",null,"提升模型表达能力"),T("。")])],-1)),Q[579]||(Q[579]=t("p",null,[t("strong",null,"Multi-Query Attention")],-1)),t("ul",null,[t("li",null,[Q[569]||(Q[569]=t("code",null,"所有Query共享一对K和V",-1)),Q[570]||(Q[570]=T("，")),Q[571]||(Q[571]=t("code",null,"减少KV参数",-1)),Q[572]||(Q[572]=T("，提升")),Q[573]||(Q[573]=t("code",null,"推理速度",-1)),Q[574]||(Q[574]=T("，优化")),t("mjx-container",V6,[(l(),e("svg",k6,Q[567]||(Q[567]=[a("",1)]))),Q[568]||(Q[568]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mo",{stretchy:"false"},"("),t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[575]||(Q[575]=T("问题。"))])]),Q[580]||(Q[580]=a("",4))]),Q[635]||(Q[635]=a("",10)),t("div",M6,[Q[586]||(Q[586]=t("div",{class:"custom-block-title"},"Multi-Head Latent Attention",-1)),Q[587]||(Q[587]=t("p",null,[t("strong",null,"问题")],-1)),t("ul",null,[t("li",null,[Q[583]||(Q[583]=T("MHA计算复杂度高 ")),t("mjx-container",b6,[(l(),e("svg",Z6,Q[581]||(Q[581]=[a("",1)]))),Q[582]||(Q[582]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"O"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mi",null,"d"),t("msup",null,[t("mi",null,"n"),t("mn",null,"2")])]),t("mo",{stretchy:"false"},")")])],-1))]),Q[584]||(Q[584]=T("，"))]),Q[585]||(Q[585]=t("li",null,[T("MHA推理长序列时，"),t("code",null,"KV缓存高"),T("、"),t("code",null,"显存压力大"),T("。")],-1))]),Q[588]||(Q[588]=a("",4))]),Q[636]||(Q[636]=a("",8)),t("div",v6,[Q[609]||(Q[609]=t("div",{class:"custom-block-title"},"Softmax Tiling",-1)),t("ul",null,[t("li",null,[Q[607]||(Q[607]=t("p",null,[t("strong",null,"数值稳定")],-1)),t("ul",null,[t("li",null,[Q[591]||(Q[591]=T("背景：避免数值")),t("mjx-container",D6,[(l(),e("svg",_6,Q[589]||(Q[589]=[a("",1)]))),Q[590]||(Q[590]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"x"),t("mi",null,"i")])])])])],-1))]),Q[592]||(Q[592]=T()),Q[593]||(Q[593]=t("code",null,"过大溢出",-1)),Q[594]||(Q[594]=T("，"))]),t("li",null,[Q[597]||(Q[597]=T("方法：")),Q[598]||(Q[598]=t("code",null,"每个元素都减去最大值",-1)),Q[599]||(Q[599]=T("得")),t("mjx-container",j6,[(l(),e("svg",A6,Q[595]||(Q[595]=[a("",1)]))),Q[596]||(Q[596]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"x"),t("mi",null,"i")]),t("mo",null,"−"),t("mi",null,"m"),t("mi",null,"a"),t("mi",null,"x"),t("mo",{stretchy:"false"},"("),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])])],-1))])]),t("li",null,[Q[602]||(Q[602]=T("效果：")),t("mjx-container",C6,[(l(),e("svg",S6,Q[600]||(Q[600]=[a("",1)]))),Q[601]||(Q[601]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"x"),t("mi",null,"i")]),t("mo",null,"−"),t("mi",null,"m"),t("mi",null,"a"),t("mi",null,"x"),t("mo",{stretchy:"false"},"("),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])])],-1))]),Q[603]||(Q[603]=T()),Q[604]||(Q[604]=t("code",null,"在[0,1]区间",-1)),Q[605]||(Q[605]=T("。softmax")),Q[606]||(Q[606]=t("code",null,"结果和原softmax一致",-1))])])]),Q[608]||(Q[608]=a("",1))])]),Q[637]||(Q[637]=t("h4",{id:"flash-attention-算法",tabindex:"-1"},[T("Flash Attention 算法 "),t("a",{class:"header-anchor",href:"#flash-attention-算法","aria-label":'Permalink to "Flash Attention 算法"'},"​")],-1)),t("div",R6,[Q[621]||(Q[621]=t("div",{class:"custom-block-title"},"Flash Attention 算法",-1)),t("ul",null,[Q[618]||(Q[618]=t("li",null,"主要目标：避免从GPU-HBM中读取和写入注意力矩阵。",-1)),Q[619]||(Q[619]=t("li",null,[t("strong",null,"计算softmax不需要全局信息"),t("ul",null,[t("li",null,[T("把输入分块，以分块增量方式计算softmax，即 "),t("code",null,"softmax tiling"),T("算法。")])])],-1)),t("li",null,[t("strong",null,[Q[612]||(Q[612]=T("反向传播不存储中间attention矩阵(")),t("mjx-container",O6,[(l(),e("svg",E6,Q[610]||(Q[610]=[a("",1)]))),Q[611]||(Q[611]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"N"),t("mn",null,"2")])])],-1))]),Q[613]||(Q[613]=T(")"))]),Q[614]||(Q[614]=T("，")),Q[615]||(Q[615]=t("strong",null,"只存储softmax归一化系数",-1)),Q[616]||(Q[616]=T("。 ")),Q[617]||(Q[617]=t("ul",null,[t("li",null,"标准Attention：需要把过程中的S、P写入HBM中，矩阵大小和输入序列长度有关，非常大"),t("li",null,[t("strong",null,"FlashAttention"),T("："),t("strong",null,"不使用中间注意力矩阵"),T("，"),t("code",null,"通过存储归一化因子来减少HBM内存的消耗"),T("。")])],-1))]),Q[620]||(Q[620]=t("li",null,[T("算法流程，具体见论文。 "),t("ul",null,[t("li",null,"简单讲：每次只计算一个block的只，通过多轮双for循环完成注意力计算。")])],-1))])]),Q[638]||(Q[638]=t("img",{src:"https://wdndev.github.io/llm_interview_note/02.%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84/1.attention/image/image_bck1Jw3P5A.png",style:{display:"block",margin:"auto"},width:"80%"},null,-1))])}const q6=s(m,[["render",P6]]);export{J6 as __pageData,q6 as default};

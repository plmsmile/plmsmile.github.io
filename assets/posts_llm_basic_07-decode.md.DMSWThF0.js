import{_ as o,c as Q,o as e,ah as l,j as t,a as T}from"./chunks/framework.CvbyeFFO.js";const V=JSON.parse('{"title":"LLM 解码相关","description":"","frontmatter":{"title":"LLM 解码相关","date":"2025-11-14T23:38:44.000Z","create":"2025-11-14T23:38:44.000Z","categories":["llm-decode"],"tags":["topk","topp","Temperature","算术强度","预填充","解码"]},"headers":[],"relativePath":"posts/llm/basic/07-decode.md","filePath":"posts/llm/basic/07-decode.md","lastUpdated":null}'),s={name:"posts/llm/basic/07-decode.md"},r={class:"custom-block note"},i={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.462ex"},xmlns:"http://www.w3.org/2000/svg",width:"50.203ex",height:"2.158ex",role:"img",focusable:"false",viewBox:"0 -750 22189.8 954","aria-hidden":"true"};function d(m,a,c,p,h,u){return e(),Q("div",null,[a[7]||(a[7]=l('<h2 id="解码策略" tabindex="-1">解码策略 <a class="header-anchor" href="#解码策略" aria-label="Permalink to &quot;解码策略&quot;">​</a></h2><h3 id="采样方法" tabindex="-1">采样方法 <a class="header-anchor" href="#采样方法" aria-label="Permalink to &quot;采样方法&quot;">​</a></h3><div class="custom-block important"><div class="custom-block-title">采样方法</div><ul><li><strong>贪心解码</strong>：每次选择概率最高的单词。会导致文本单调和重复。</li><li><strong>随机采样</strong>：多样性好，但质量差。</li><li><a href="https://zhuanlan.zhihu.com/p/82829880" target="_blank" rel="noreferrer">Beam Search</a>： <ul><li>维护k个大小的序列，每一步选择概率最高的k个单词；从所有选择中，保留概率最高的k个序列。</li><li>平衡了质量和多样性。贪心解码是k=1的BeamSearch。</li></ul></li></ul><p>大模型常用的<strong>top-k和top-p介于贪心解码和随机采样之间</strong>。</p></div><h3 id="top-k" tabindex="-1">Top-k <a class="header-anchor" href="#top-k" aria-label="Permalink to &quot;Top-k&quot;">​</a></h3><div class="custom-block important"><div class="custom-block-title">Top-K 策略</div><ul><li>策略：每一步从概率最高的k个候选词中随机选一个。</li><li>优点：k越大多样性越好，但质量越低。</li><li>缺点： <ul><li><strong>top-k只考虑了单词概率，没有考虑语义和语法关系</strong>。</li><li><strong>可能导致生成文本不符合常识和逻辑</strong>，比如<code>我喜欢吃</code>，解码为<code>苹果</code>。但可能我并不喜欢吃，而且上下文提到了。</li><li><strong>k难以确定</strong>。</li></ul></li><li>通常和top-p一起使用。</li></ul></div><h3 id="top-p-核采样-nucleus采样" tabindex="-1">Top-p(核采样/Nucleus采样) <a class="header-anchor" href="#top-p-核采样-nucleus采样" aria-label="Permalink to &quot;Top-p(核采样/Nucleus采样)&quot;">​</a></h3><div class="custom-block important"><div class="custom-block-title">Top-P 策略</div><ul><li>策略：每一步从累计求和概率高于p的单词中进行随机采样，即只关心核心部分，忽略尾部部分。 <ul><li>如设置p=0.9，只考虑前90%的词</li></ul></li></ul></div><h3 id="temperature" tabindex="-1">Temperature <a class="header-anchor" href="#temperature" aria-label="Permalink to &quot;Temperature&quot;">​</a></h3><div class="custom-block important"><div class="custom-block-title">温度</div><ul><li>策略：和语言模型温度参数T类似，是一个概率缩放参数。温度越高，越趋近于均匀采样，温度越低，越倾向于概率越高的。</li><li>计算：使用logits来通过温度进行缩放，然后计算softmax概率。</li></ul></div><h3 id="联合采样" tabindex="-1">联合采样 <a class="header-anchor" href="#联合采样" aria-label="Permalink to &quot;联合采样&quot;">​</a></h3><p>优先级：top-k -&gt; top-p -&gt; Temperature</p><h2 id="解码操作" tabindex="-1">解码操作 <a class="header-anchor" href="#解码操作" aria-label="Permalink to &quot;解码操作&quot;">​</a></h2><h3 id="算术强度" tabindex="-1">算术强度 <a class="header-anchor" href="#算术强度" aria-label="Permalink to &quot;算术强度&quot;">​</a></h3><div class="custom-block note"><div class="custom-block-title">算术强度</div><p><strong>算术强度</strong></p><ul><li><code>计算操作次数</code>和<code>内存访问量</code>的比率，有一个临界值。</li><li>每个GPU都有一个<code>临界算术强度</code>。</li></ul><p><strong>计算密集型</strong></p><ul><li>任务的算术强度 &gt; 临界算术强度，计算 &gt; 内存访问。</li></ul><p><strong>内存密集型</strong></p><ul><li>任务的算术强度 &lt; 临界算术强度，计算 &lt; 内存访问。</li></ul></div><h3 id="预填充和解码" tabindex="-1">预填充和解码 <a class="header-anchor" href="#预填充和解码" aria-label="Permalink to &quot;预填充和解码&quot;">​</a></h3><div class="custom-block note"><div class="custom-block-title">预填充和解码阶段</div><p><strong>训练阶段 (计算密集型任务)</strong></p><ul><li>batch的矩阵乘法和注意力计算，具有很高的算术强度。</li><li>属于<code>计算密集型</code></li></ul><p><strong>预填充阶段/Prefilling (计算密集型任务)</strong></p><ul><li>核心 <ul><li><p><code>输入prompt做前向计算</code>，生成第一个token。</p></li><li><p>如：输入让总结一篇文章，模型需要<code>一次性处理完这篇文章</code>。</p></li></ul></li><li>特点 <ul><li><code>计算量大</code>、<code>内存访问相对集中</code>。<code>计算密集型任务</code>。</li></ul></li><li>指标 <ul><li><strong>TTFT</strong>：Time To First Token，<code>生成第1个token所需时间</code>。</li></ul></li></ul><p><strong>解码阶段/Decoding (内存密集型任务)</strong></p><ul><li>核心 <ul><li><code>逐词生成剩余token</code>：模型一个词一个词的生成回答，直到EOS或最大长度。</li></ul></li><li>特点 <ul><li><code>需回顾之前所有的上下文</code>：prompt + 已生成部分</li><li><code>内存访问量巨大</code>，需<code>反复读取KVCache</code>，是长文本生成的主要瓶颈。</li><li><code>内存密集型</code></li></ul></li><li>指标 <ul><li><strong>TPOT</strong>：Time Per Output Token，生成每个token的平均时间</li></ul></li></ul></div><h3 id="解码提升效率方法" tabindex="-1">解码提升效率方法 <a class="header-anchor" href="#解码提升效率方法" aria-label="Permalink to &quot;解码提升效率方法&quot;">​</a></h3>',17)),t("div",r,[a[5]||(a[5]=t("div",{class:"custom-block-title"},"解码提升效率方法",-1)),a[6]||(a[6]=t("p",null,[t("strong",null,"提高效率方法")],-1)),t("ul",null,[a[3]||(a[3]=t("li",null,[t("p",null,"批处理Batching"),t("ul",null,[t("li",null,[T("大批数据传到GPU，做一次处理，提高GPU利用率。 "),t("ul",null,[t("li",null,"静态批处理：等一批中最长的生成完成才结束，差异会有问题。")])]),t("li",null,"太大了会导致内存溢出，可以考虑KV Cache/LLM内存要求。")])],-1)),t("li",null,[a[2]||(a[2]=l("<p>KV 缓存</p><ul><li>生成新token，依赖<code>之前所有token的key/value</code>，<code>但这部分不用重新计算，可以缓存在GPU</code></li><li>如llama2-7B模型，<code>fp16精度，b=1，seq长度4096，32层，hsize4096</code><ul><li>KV缓存大小：<code>1*4096*2*32*4096*2=2GB</code>，其中</li></ul></li></ul>",2)),t("mjx-container",i,[(e(),Q("svg",n,a[0]||(a[0]=[l('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" fill="blue" stroke="blue"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">总</text><path data-c="4B" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H313Q235 637 233 620Q232 618 232 462L233 307L379 449Q425 494 479 546Q518 584 524 591T531 607V608Q531 630 503 636Q501 636 498 636T493 637H489V683H499Q517 680 630 680Q704 680 716 683H722V637H708Q633 633 589 597Q584 592 495 506T406 419T515 254T631 80Q644 60 662 54T715 46H736V0H728Q719 3 615 3Q493 3 472 0H461V46H469Q515 46 515 72Q515 78 512 84L336 351Q332 348 278 296L232 251V156Q232 62 235 58Q243 47 302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z" transform="translate(1000,0)" style="stroke-width:3;"></path><path data-c="56" d="M114 620Q113 621 110 624T107 627T103 630T98 632T91 634T80 635T67 636T48 637H19V683H28Q46 680 152 680Q273 680 294 683H305V637H284Q223 634 223 620Q223 618 313 372T404 126L490 358Q575 588 575 597Q575 616 554 626T508 637H503V683H512Q527 680 627 680Q718 680 724 683H730V637H723Q648 637 627 596Q627 595 515 291T401 -14Q396 -22 382 -22H374H367Q353 -22 348 -14Q346 -12 231 303Q114 617 114 620Z" transform="translate(1778,0)" style="stroke-width:3;"></path><text data-variant="normal" transform="translate(2528,0) scale(1,-1)" font-size="884px" font-family="serif">缓</text><text data-variant="normal" transform="translate(3528,0) scale(1,-1)" font-size="884px" font-family="serif">存</text><text data-variant="normal" transform="translate(4528,0) scale(1,-1)" font-size="884px" font-family="serif">大</text><text data-variant="normal" transform="translate(5528,0) scale(1,-1)" font-size="884px" font-family="serif">小</text></g><g data-mml-node="mo" transform="translate(6805.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(7861.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(8512.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(9235,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(9926.2,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(10648.4,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(11370.7,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z" style="stroke-width:3;"></path></g><g data-mml-node="mtext" transform="translate(12092.9,0)"><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" style="stroke-width:3;"></path><path data-c="5F" d="M0 -62V-25H499V-62H0Z" transform="translate(556,0)" style="stroke-width:3;"></path><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z" transform="translate(1056,0)" style="stroke-width:3;"></path><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(1334,0)" style="stroke-width:3;"></path><path data-c="79" d="M69 -66Q91 -66 104 -80T118 -116Q118 -134 109 -145T91 -160Q84 -163 97 -166Q104 -168 111 -168Q131 -168 148 -159T175 -138T197 -106T213 -75T225 -43L242 0L170 183Q150 233 125 297Q101 358 96 368T80 381Q79 382 78 382Q66 385 34 385H19V431H26L46 430Q65 430 88 429T122 428Q129 428 142 428T171 429T200 430T224 430L233 431H241V385H232Q183 385 185 366L286 112Q286 113 332 227L376 341V350Q376 365 366 373T348 383T334 385H331V431H337H344Q351 431 361 431T382 430T405 429T422 429Q477 429 503 431H508V385H497Q441 380 422 345Q420 343 378 235T289 9T227 -131Q180 -204 113 -204Q69 -204 44 -177T19 -116Q19 -89 35 -78T69 -66Z" transform="translate(1834,0)" style="stroke-width:3;"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(2362,0)" style="stroke-width:3;"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(2806,0)" style="stroke-width:3;"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(3198,0)" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(15907.1,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z" style="stroke-width:3;"></path></g><g data-mml-node="mtext" transform="translate(16629.3,0)"><path data-c="68" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 124T102 167T103 217T103 272T103 329Q103 366 103 407T103 482T102 542T102 586T102 603Q99 622 88 628T43 637H25V660Q25 683 27 683L37 684Q47 685 66 686T103 688Q120 689 140 690T170 693T181 694H184V367Q244 442 328 442Q451 442 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" style="stroke-width:3;"></path><path data-c="5F" d="M0 -62V-25H499V-62H0Z" transform="translate(556,0)" style="stroke-width:3;"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1056,0)" style="stroke-width:3;"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1450,0)" style="stroke-width:3;"></path><path data-c="7A" d="M42 263Q44 270 48 345T53 423V431H393Q399 425 399 415Q399 403 398 402L381 378Q364 355 331 309T265 220L134 41L182 40H206Q254 40 283 46T331 77Q352 105 359 185L361 201Q361 202 381 202H401V196Q401 195 393 103T384 6V0H209L34 1L31 3Q28 8 28 17Q28 30 29 31T160 210T294 394H236Q169 393 152 388Q127 382 113 367Q89 344 82 264V255H42V263Z" transform="translate(1728,0)" style="stroke-width:3;"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(2172,0)" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(19467.6,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(20189.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">精</text></g><g data-mml-node="mi" transform="translate(21189.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">度</text></g></g></g></g>',1)]))),a[1]||(a[1]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"总KV缓存大小"),t("mo",null,"="),t("mi",null,"b"),t("mo",null,"∗"),t("mi",null,"s"),t("mo",null,"∗"),t("mn",null,"2"),t("mo",null,"∗"),t("mtext",null,"n_layers"),t("mo",null,"∗"),t("mtext",null,"h_size"),t("mo",null,"∗"),t("mi",{mathvariant:"normal"},"精"),t("mi",{mathvariant:"normal"},"度")])])],-1))])]),a[4]||(a[4]=t("li",null,[t("p",null,"LLM 内存需求"),t("ul",null,[t("li",null,[T("权重："),t("code",null,"fp16，2m"),T(", "),t("code",null,"7B，14GB显存")]),t("li",null,"KV缓存")])],-1))])])])}const L=o(s,[["render",d]]);export{V as __pageData,L as default};

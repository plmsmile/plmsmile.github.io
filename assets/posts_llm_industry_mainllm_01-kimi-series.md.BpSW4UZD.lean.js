import{_ as r,c as s,o as e,ah as o,j as l,a as t}from"./chunks/framework.CvbyeFFO.js";const y=JSON.parse('{"title":"Kimi 系列","description":"","frontmatter":{"title":"Kimi 系列","date":"2025-07-15T19:53:37.000Z","create":"2025-07-15T19:53:37.000Z","categories":["kimi"],"tags":["Kimi K2","MLA","MuonClip","QK-Clip","Agent数据合成技术","Rewards Gym","Self-Critic Rubric Reward","Kimi Researcher","上下文管理","全异步rollouts","Reinforce","端到端RL学习","工具使用数据生成方法","Kimi1.5","上下文扩展","Partial Rollouts","改进Policy","Long2short"]},"headers":[],"relativePath":"posts/llm/industry/mainllm/01-kimi-series.md","filePath":"posts/llm/industry/mainllm/01-kimi-series.md","lastUpdated":1753200077000}'),n={name:"posts/llm/industry/mainllm/01-kimi-series.md"},a={class:"custom-block danger"},d={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.222ex",height:"2.195ex",role:"img",focusable:"false",viewBox:"0 -683 3192.3 970.2","aria-hidden":"true"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.029ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.17ex",height:"1.005ex",role:"img",focusable:"false",viewBox:"0 -431 517 444","aria-hidden":"true"},m={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.222ex",height:"2.195ex",role:"img",focusable:"false",viewBox:"0 -683 3192.3 970.2","aria-hidden":"true"},Q={class:"custom-block tip"},T={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.489ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.229ex",height:"1.486ex",role:"img",focusable:"false",viewBox:"0 -441 543 657","aria-hidden":"true"};function h(b,i,v,w,f,x){return e(),s("div",null,[i[41]||(i[41]=o("",7)),l("div",a,[i[31]||(i[31]=o("",4)),l("ul",null,[l("li",null,[i[11]||(i[11]=l("code",null,"Muon优化器 ",-1)),l("ul",null,[i[9]||(i[9]=l("li",null,[t("目的：在相同计算资源和参数的条件下，"),l("strong",null,"尽可能多"),t("的学到信息。")],-1)),i[10]||(i[10]=l("li",null,[t("优点："),l("strong",null,"token效率高"),t(" ⭐")],-1)),l("li",null,[i[8]||(i[8]=t("缺点： ")),l("ul",null,[i[7]||(i[7]=l("li",null,[l("strong",null,"训练不稳定"),t("，容易出现"),l("code",null,"注意力logits爆炸"),t("现象😓 "),l("ul",null,[l("li",null,[t("经常到1000+，导致"),l("code",null,"loss spike"),t(" (loss异常高)")])])],-1)),l("li",null,[i[2]||(i[2]=t("本质是")),i[3]||(i[3]=l("strong",null,"Query和Key",-1)),i[4]||(i[4]=t("的权")),l("mjx-container",d,[(e(),s("svg",g,i[0]||(i[0]=[o("",1)]))),i[1]||(i[1]=l("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("mstyle",{mathcolor:"blue"},[l("msub",null,[l("mi",null,"W"),l("mi",null,"q")]),l("mo",null,","),l("msub",null,[l("mi",null,"W"),l("mi",null,"k")])])])],-1))]),i[5]||(i[5]=l("strong",null,"增长过快",-1)),i[6]||(i[6]=t("导致的。"))])])])])]),l("li",null,[i[29]||(i[29]=l("code",null,"QK-Clip",-1)),l("ul",null,[l("li",null,[i[27]||(i[27]=t("核心 ")),l("ul",null,[l("li",null,[i[14]||(i[14]=t("实时监控")),i[15]||(i[15]=l("strong",null,"每个头的最大logit",-1)),i[16]||(i[16]=t("是否超过")),i[17]||(i[17]=l("strong",null,"阈值",-1)),l("mjx-container",u,[(e(),s("svg",c,i[12]||(i[12]=[l("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[l("g",{"data-mml-node":"math"},[l("g",{"data-mml-node":"mi"},[l("path",{"data-c":"1D70F",d:"M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z",style:{"stroke-width":"3"}})])])],-1)]))),i[13]||(i[13]=l("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("mi",null,"τ")])],-1))]),i[18]||(i[18]=t("(论文是100)"))]),l("li",null,[i[21]||(i[21]=l("code",null,"按比例轻量化缩小",-1)),i[22]||(i[22]=t("超过阈值注意力头的")),l("mjx-container",m,[(e(),s("svg",p,i[19]||(i[19]=[o("",1)]))),i[20]||(i[20]=l("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("mstyle",{mathcolor:"blue"},[l("msub",null,[l("mi",null,"W"),l("mi",null,"q")]),l("mo",null,","),l("msub",null,[l("mi",null,"W"),l("mi",null,"k")])])])],-1))]),i[23]||(i[23]=t(" 权重⭐ （")),i[24]||(i[24]=l("code",null,"query和key",-1)),i[25]||(i[25]=t("的权重矩阵）"))]),i[26]||(i[26]=l("li",null,[t("最小化"),l("strong",null,"per-head干预"),t("：只对超过的头采取，只有1小部分注意力头会爆炸💥")],-1))])]),i[28]||(i[28]=l("li",null,[t("优点：解决了"),l("code",null,"注意力logits爆炸问题")],-1))])]),i[30]||(i[30]=l("li",null,[t("整体效果🔑 "),l("ul",null,[l("li",null,[t("预训练数据"),l("code",null,"15.5T"),t(" tokens， 实现"),l("strong",null,"零loss spike"),t("，"),l("strong",null,"对收敛几乎无损"),t("(<0.1%) 👍")])])],-1))])]),i[42]||(i[42]=o("",23)),l("div",Q,[i[39]||(i[39]=l("div",{class:"custom-block-title"},"稳健RL训练",-1)),i[40]||(i[40]=l("p",null,[l("code",null,"Reinforce算法"),t("+"),l("code",null,"关键策略"),t("来保证训练稳定性")],-1)),l("ul",null,[i[36]||(i[36]=l("li",null,"严格的on-policy训练：",-1)),i[37]||(i[37]=l("li",null,"负样本控制：负样本降低模型输出概率可能导致熵崩溃，策略丢弃部分负样本，使模型能在长周期训练。",-1)),i[38]||(i[38]=l("li",null,"结果导向的奖励机制：格式奖励+正确性奖励。",-1)),l("li",null,[i[34]||(i[34]=t("效率激励：使用奖励衰减因子")),l("mjx-container",T,[(e(),s("svg",k,i[32]||(i[32]=[l("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[l("g",{"data-mml-node":"math"},[l("g",{"data-mml-node":"mi"},[l("path",{"data-c":"1D6FE",d:"M31 249Q11 249 11 258Q11 275 26 304T66 365T129 418T206 441Q233 441 239 440Q287 429 318 386T371 255Q385 195 385 170Q385 166 386 166L398 193Q418 244 443 300T486 391T508 430Q510 431 524 431H537Q543 425 543 422Q543 418 522 378T463 251T391 71Q385 55 378 6T357 -100Q341 -165 330 -190T303 -216Q286 -216 286 -188Q286 -138 340 32L346 51L347 69Q348 79 348 100Q348 257 291 317Q251 355 196 355Q148 355 108 329T51 260Q49 251 47 251Q45 249 31 249Z",style:{"stroke-width":"3"}})])])],-1)]))),i[33]||(i[33]=l("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("mi",null,"γ")])],-1))]),i[35]||(i[35]=t("，鼓励模型探索短且高效的路径。"))])])]),i[43]||(i[43]=o("",29))])}const R=r(n,[["render",h]]);export{y as __pageData,R as default};

import{_ as e,c as s,o as l,j as t,ah as T,a as Q}from"./chunks/framework.CvbyeFFO.js";const Q3=JSON.parse('{"title":"Actor-Critic 算法","description":"","frontmatter":{"title":"Actor-Critic 算法","date":"2025-08-31T15:16:54.000Z","create":"2025-08-31T15:16:54.000Z","categories":["rl-theory"],"tags":["Actor","Critic","Q Actor-Critic","A2C","A3C","Advantage","Actor loss","Critic Loss","GAE","λ-return","单步TD","MC估计"]},"headers":[],"relativePath":"posts/llm/rl/theory/07-actor-critic.md","filePath":"posts/llm/rl/theory/07-actor-critic.md","lastUpdated":null}'),n={name:"posts/llm/rl/theory/07-actor-critic.md"},m={class:"custom-block caution"},r={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.147ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3601 1000","aria-hidden":"true"},o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.618ex",role:"img",focusable:"false",viewBox:"0 -705 469 715","aria-hidden":"true"},h={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.62ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 716 454","aria-hidden":"true"},g={class:"custom-block caution"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.132ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3594.2 1000","aria-hidden":"true"},c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.474ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2419.3 1000","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.147ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3601 1000","aria-hidden":"true"},x={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.024ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2220.7 1000","aria-hidden":"true"},w={class:"custom-block tip"},b={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.486ex",height:"2.364ex",role:"img",focusable:"false",viewBox:"0 -750 4192.6 1045","aria-hidden":"true"},E={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.544ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -705 1124.3 862.8","aria-hidden":"true"},V={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.286ex"},xmlns:"http://www.w3.org/2000/svg",width:"45.254ex",height:"7.704ex",role:"img",focusable:"false",viewBox:"0 -1952.5 20002.5 3405","aria-hidden":"true"},v={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.544ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -705 1124.3 862.8","aria-hidden":"true"},C={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},_={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.264ex"},xmlns:"http://www.w3.org/2000/svg",width:"39.841ex",height:"7.659ex",role:"img",focusable:"false",viewBox:"0 -1942.6 17609.9 3385.2","aria-hidden":"true"},F={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.628ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7791.4 1000","aria-hidden":"true"},B={class:"custom-block danger"},R={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.708ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2081 1000","aria-hidden":"true"},S={class:"custom-block tip"},P={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.647ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2054 1000","aria-hidden":"true"},X={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.024ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2220.7 1000","aria-hidden":"true"},N={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.005ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2654.3 1000","aria-hidden":"true"},J={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},q={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.583ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 13517.8 1000","aria-hidden":"true"},$={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.77ex",height:"1.979ex",role:"img",focusable:"false",viewBox:"0 -717 782.3 874.8","aria-hidden":"true"},K={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},W={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.77ex",height:"1.979ex",role:"img",focusable:"false",viewBox:"0 -717 782.3 874.8","aria-hidden":"true"},Y={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},t1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.092ex"},xmlns:"http://www.w3.org/2000/svg",width:"41.8ex",height:"5.789ex",role:"img",focusable:"false",viewBox:"0 -750 18475.8 2558.8","aria-hidden":"true"},a1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Q1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"50.213ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 22194.1 1000","aria-hidden":"true"},T1={class:"custom-block info"},s1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},l1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.264ex"},xmlns:"http://www.w3.org/2000/svg",width:"45.885ex",height:"7.659ex",role:"img",focusable:"false",viewBox:"0 -1942.6 20281.1 3385.2","aria-hidden":"true"},e1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.348ex"},xmlns:"http://www.w3.org/2000/svg",width:"57.203ex",height:"7.827ex",role:"img",focusable:"false",viewBox:"0 -1979.8 25283.9 3459.5","aria-hidden":"true"},m1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},r1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.353ex"},xmlns:"http://www.w3.org/2000/svg",width:"61.207ex",height:"7.836ex",role:"img",focusable:"false",viewBox:"0 -1981.9 27053.3 3463.7","aria-hidden":"true"},d1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},o1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.628ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7791.4 1000","aria-hidden":"true"},i1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.205ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 13792.7 1000","aria-hidden":"true"},p1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.169ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.021ex",height:"5.448ex",role:"img",focusable:"false",viewBox:"0 -1449.5 20783.4 2408","aria-hidden":"true"},u1={class:"custom-block danger"},k1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},c1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.583ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 13517.8 1000","aria-hidden":"true"},H1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.351ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 4133.2 1000","aria-hidden":"true"},f1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.826ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 807.3 599.8","aria-hidden":"true"},L1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.185ex",height:"2.142ex",role:"img",focusable:"false",viewBox:"0 -691.8 965.6 946.6","aria-hidden":"true"},b1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.095ex",height:"2.273ex",role:"img",focusable:"false",viewBox:"0 -750 5787.9 1004.8","aria-hidden":"true"},E1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.02ex"},xmlns:"http://www.w3.org/2000/svg",width:"46.042ex",height:"5.169ex",role:"img",focusable:"false",viewBox:"0 -950 20350.6 2284.9","aria-hidden":"true"},V1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.579ex",height:"2.273ex",role:"img",focusable:"false",viewBox:"0 -750 15283.9 1004.8","aria-hidden":"true"},v1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.576ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.185ex",height:"2.142ex",role:"img",focusable:"false",viewBox:"0 -691.8 965.6 946.6","aria-hidden":"true"},C1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.277ex",height:"1.59ex",role:"img",focusable:"false",viewBox:"0 -691.8 1006.6 702.8","aria-hidden":"true"},F1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.117ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 1377.7 840.8","aria-hidden":"true"},B1={class:"custom-block info"},R1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.29ex",height:"1ex",role:"img",focusable:"false",viewBox:"0 -431 570 442","aria-hidden":"true"},S1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},P1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.353ex"},xmlns:"http://www.w3.org/2000/svg",width:"61.207ex",height:"7.836ex",role:"img",focusable:"false",viewBox:"0 -1981.9 27053.3 3463.7","aria-hidden":"true"},z1={class:"custom-block info"},X1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.111ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1817 1000","aria-hidden":"true"},N1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.24ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2316.1 1000","aria-hidden":"true"},J1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.111ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 1817 1000","aria-hidden":"true"};function $1(U1,a,K1,W1,Y1,t3){return l(),s("div",null,[a[247]||(a[247]=t("h2",{id:"actor-critic-算法",tabindex:"-1"},[Q("Actor-Critic 算法 "),t("a",{class:"header-anchor",href:"#actor-critic-算法","aria-label":'Permalink to "Actor-Critic 算法"'},"​")],-1)),a[248]||(a[248]=t("h3",{id:"actor-critic-架构",tabindex:"-1"},[Q("Actor-Critic 架构 "),t("a",{class:"header-anchor",href:"#actor-critic-架构","aria-label":'Permalink to "Actor-Critic 架构"'},"​")],-1)),t("div",m,[a[26]||(a[26]=t("div",{class:"custom-block-title"},"Actor-Critic",-1)),a[27]||(a[27]=t("p",null,[t("strong",null,"整体流程")],-1)),t("ul",null,[a[25]||(a[25]=t("li",null,[t("strong",null,"演员"),Q("：根据舞台状态"),t("code",null,"做出动作")],-1)),t("li",null,[a[2]||(a[2]=t("strong",null,"评委",-1)),a[3]||(a[3]=Q("：根据舞台状态、演员动作，进行")),a[4]||(a[4]=t("code",null,"打分",-1)),a[5]||(a[5]=Q()),t("mjx-container",r,[(l(),s("svg",d,a[0]||(a[0]=[T("",1)]))),a[1]||(a[1]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"Q"),t("mi",null,"w")]),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",null,","),t("mi",null,"a"),t("mo",{stretchy:"false"},")")])],-1))])]),t("li",null,[a[8]||(a[8]=t("strong",null,"演员",-1)),a[9]||(a[9]=Q("：根据")),a[10]||(a[10]=t("strong",null,"评委打分",-1)),a[11]||(a[11]=t("code",null,"调整策略",-1)),a[12]||(a[12]=Q("，更新参数")),t("mjx-container",o,[(l(),s("svg",i,a[6]||(a[6]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D703",d:"M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z",style:{"stroke-width":"3"}})])])],-1)]))),a[7]||(a[7]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"θ")])],-1))]),a[13]||(a[13]=Q("，")),a[14]||(a[14]=t("code",null,"争取下次做的更好",-1))]),t("li",null,[a[17]||(a[17]=t("strong",null,"评委",-1)),a[18]||(a[18]=Q("：根据观众反馈/")),a[19]||(a[19]=t("strong",null,"环境反馈",-1)),a[20]||(a[20]=Q("，")),a[21]||(a[21]=t("code",null,"调整打分策略",-1)),a[22]||(a[22]=Q("，更新参数")),t("mjx-container",h,[(l(),s("svg",p,a[15]||(a[15]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D464",d:"M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z",style:{"stroke-width":"3"}})])])],-1)]))),a[16]||(a[16]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"w")])],-1))]),a[23]||(a[23]=Q("，")),a[24]||(a[24]=t("code",null,"让评的更准",-1))])]),a[28]||(a[28]=T("",2))]),a[249]||(a[249]=t("img",{src:"https://datawhalechina.github.io/easy-rl/img/ch12/12.6.png",style:{display:"block",margin:"auto"},width:"70%"},null,-1)),a[250]||(a[250]=t("h3",{id:"核心思想",tabindex:"-1"},[Q("核心思想 "),t("a",{class:"header-anchor",href:"#核心思想","aria-label":'Permalink to "核心思想"'},"​")],-1)),t("div",g,[a[48]||(a[48]=T("",6)),t("ul",null,[t("li",null,[a[31]||(a[31]=t("strong",null,"演员",-1)),a[32]||(a[32]=Q("：策略")),t("mjx-container",u,[(l(),s("svg",k,a[29]||(a[29]=[T("",1)]))),a[30]||(a[30]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"a"),t("mo",null,"∣"),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])],-1))]),a[33]||(a[33]=Q("； ")),a[34]||(a[34]=t("ul",null,[t("li",null,[Q("目标：根据Critic结果，"),t("code",null,"学习好的策略，尽可能获得高回报"),Q("。")]),t("li",null,"会和环境交互采样")],-1))]),t("li",null,[a[44]||(a[44]=t("strong",null,"评论员",-1)),a[45]||(a[45]=Q("：价值网络 ")),t("mjx-container",c,[(l(),s("svg",H,a[35]||(a[35]=[T("",1)]))),a[36]||(a[36]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"w")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])],-1))]),a[46]||(a[46]=Q("、")),t("mjx-container",y,[(l(),s("svg",f,a[37]||(a[37]=[T("",1)]))),a[38]||(a[38]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"Q"),t("mi",null,"w")]),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",null,","),t("mi",null,"a"),t("mo",{stretchy:"false"},")")])],-1))]),t("ul",null,[a[43]||(a[43]=t("li",null,[Q("目标："),t("code",null,"准确评估当前策略的好坏")],-1)),t("li",null,[t("strong",null,[a[41]||(a[41]=Q("评估当前")),t("mjx-container",x,[(l(),s("svg",L,a[39]||(a[39]=[T("",1)]))),a[40]||(a[40]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",null,","),t("mi",null,"a"),t("mo",{stretchy:"false"},")")])],-1))]),a[42]||(a[42]=Q("的价值"))])])])]),a[47]||(a[47]=t("li",null,[t("code",null,"相互博弈思想")],-1))]),a[49]||(a[49]=T("",2))]),a[251]||(a[251]=t("img",{src:"https://datawhalechina.github.io/joyrl-book/figs/ch10/actor_critic_architecture.png",style:{display:"block",margin:"auto"},width:"60%"},null,-1)),a[252]||(a[252]=t("h3",{id:"qac-最简单的ac算法-q-actor-critic",tabindex:"-1"},[Q("QAC：最简单的AC算法 Q Actor-Critic "),t("a",{class:"header-anchor",href:"#qac-最简单的ac算法-q-actor-critic","aria-label":'Permalink to "QAC：最简单的AC算法 Q Actor-Critic"'},"​")],-1)),t("div",w,[a[70]||(a[70]=t("div",{class:"custom-block-title"},"Q Actor-Critic",-1)),a[71]||(a[71]=t("p",null,[t("strong",null,"核心思想")],-1)),t("ul",null,[t("li",null,[a[56]||(a[56]=t("code",null,"Critic",-1)),a[57]||(a[57]=Q("：")),t("strong",null,[a[52]||(a[52]=Q("Q函数")),t("mjx-container",b,[(l(),s("svg",M,a[50]||(a[50]=[T("",1)]))),a[51]||(a[51]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"ϕ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])],-1))]),a[53]||(a[53]=Q("，作为策略梯度里的权重"))]),a[58]||(a[58]=Q("，代替MC策略梯度里的累计回报")),t("mjx-container",E,[(l(),s("svg",Z,a[54]||(a[54]=[T("",1)]))),a[55]||(a[55]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"G"),t("mi",null,"t")])])],-1))])])]),t("mjx-container",V,[(l(),s("svg",D,a[59]||(a[59]=[T("",1)]))),a[60]||(a[60]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"N")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"n"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"N")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"0")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"n")])])]),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"ϕ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"权"),t("mi",{mathvariant:"normal"},"重")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"∣"),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"动"),t("mi",{mathvariant:"normal"},"作"),t("mi",null,"a"),t("mi",{mathvariant:"normal"},"的"),t("mi",{mathvariant:"normal"},"梯"),t("mi",{mathvariant:"normal"},"度")])])])])])])])],-1))]),t("ul",null,[t("li",null,[a[63]||(a[63]=t("code",null,"MC策略梯度",-1)),a[64]||(a[64]=Q("使用累计回报")),t("mjx-container",v,[(l(),s("svg",A,a[61]||(a[61]=[T("",1)]))),a[62]||(a[62]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"G"),t("mi",null,"t")])])],-1))]),a[65]||(a[65]=Q("来作为权重"))])]),t("mjx-container",C,[(l(),s("svg",_,a[66]||(a[66]=[T("",1)]))),a[67]||(a[67]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"N")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"n"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"N")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"0")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"n")])])]),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("msubsup",null,[t("mi",null,"G"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"权"),t("mi",{mathvariant:"normal"},"重")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"∣"),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"动"),t("mi",{mathvariant:"normal"},"作"),t("mi",null,"a"),t("mi",{mathvariant:"normal"},"的"),t("mi",{mathvariant:"normal"},"梯"),t("mi",{mathvariant:"normal"},"度")])])])])])])])],-1))]),a[72]||(a[72]=t("p",null,[t("strong",null,"参数更新过程")],-1)),a[73]||(a[73]=t("ul",null,[t("li",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E5%8F%82%E6%95%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B",target:"_blank",rel:"noreferrer"},"策略梯度参数更新过程")])],-1)),t("mjx-container",F,[(l(),s("svg",j,a[68]||(a[68]=[T("",1)]))),a[69]||(a[69]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},"←"),t("mstyle",{mathcolor:"blue"},[t("mi",null,"θ")]),t("mstyle",{mathcolor:"red"},[t("mo",null,"+")]),t("mi",null,"α"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])])],-1))])]),a[253]||(a[253]=t("h3",{id:"a2c-优势ac算法-advantage-actor-crictic",tabindex:"-1"},[Q("A2C: 优势AC算法 / Advantage Actor Crictic "),t("a",{class:"header-anchor",href:"#a2c-优势ac算法-advantage-actor-crictic","aria-label":'Permalink to "A2C: 优势AC算法 / Advantage Actor Crictic"'},"​")],-1)),a[254]||(a[254]=t("h4",{id:"pg和ac存在的问题",tabindex:"-1"},[Q("PG和AC存在的问题 "),t("a",{class:"header-anchor",href:"#pg和ac存在的问题","aria-label":'Permalink to "PG和AC存在的问题"'},"​")],-1)),t("div",B,[a[81]||(a[81]=t("div",{class:"custom-block-title"},"PG和AC存在的问题",-1)),a[82]||(a[82]=t("p",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E6%9C%B4%E7%B4%A0pg%E6%9D%83%E9%87%8D%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98",target:"_blank",rel:"noreferrer"},"朴素PG存在的问题")],-1)),t("ul",null,[t("li",null,[t("strong",null,[a[76]||(a[76]=Q("权重")),t("mjx-container",R,[(l(),s("svg",O,a[74]||(a[74]=[T("",1)]))),a[75]||(a[75]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"G"),t("mo",{stretchy:"false"},"("),t("mi",null,"τ"),t("mo",{stretchy:"false"},")")])],-1))])]),a[77]||(a[77]=t("code",null,"恒大于0",-1)),a[78]||(a[78]=Q("、")),a[79]||(a[79]=t("code",null,"方差较大",-1))]),a[80]||(a[80]=t("li",null,[Q("一条轨迹内"),t("code",null,"所有动作权重都相同")],-1))]),a[83]||(a[83]=T("",2))]),a[255]||(a[255]=t("h4",{id:"核心思想-1",tabindex:"-1"},[Q("核心思想 "),t("a",{class:"header-anchor",href:"#核心思想-1","aria-label":'Permalink to "核心思想"'},"​")],-1)),a[256]||(a[256]=t("ul",null,[t("li",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E6%B7%BB%E5%8A%A0%E5%9F%BA%E7%BA%BF-%E4%BC%98%E5%8A%BF%E5%87%BD%E6%95%B0",target:"_blank",rel:"noreferrer"},"PG减去基线作为优势函数")]),t("li",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E5%88%86%E9%85%8D%E5%90%88%E9%80%82%E7%9A%84%E5%88%86%E6%95%B0",target:"_blank",rel:"noreferrer"},"为轨迹线不同动作分配合适的分数")])],-1)),t("div",S,[a[129]||(a[129]=t("div",{class:"custom-block-title"},"A2C",-1)),a[130]||(a[130]=t("p",null,[t("strong",null,"背景")],-1)),t("ul",null,[t("li",null,[a[88]||(a[88]=Q("减去基线作为优势，")),t("strong",null,[a[86]||(a[86]=Q("解决权重")),t("mjx-container",P,[(l(),s("svg",z,a[84]||(a[84]=[T("",1)]))),a[85]||(a[85]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"R"),t("mo",{stretchy:"false"},"("),t("mi",null,"τ"),t("mo",{stretchy:"false"},")")])],-1))]),a[87]||(a[87]=Q("恒大于0带来的问题"))]),a[89]||(a[89]=t("ul",null,[t("li",null,[t("code",null,"方差大")]),t("li",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E6%9C%B4%E7%B4%A0pg%E6%9D%83%E9%87%8D%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98",target:"_blank",rel:"noreferrer"},"未采样到的动作，概率被更新"),Q("(下降)")])],-1))]),a[90]||(a[90]=t("li",null,[Q("使用优势，解决 "),t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E5%88%86%E9%85%8D%E5%90%88%E9%80%82%E7%9A%84%E5%88%86%E6%95%B0",target:"_blank",rel:"noreferrer"},"轨迹线上所有动作权重都相同的问题")],-1))]),a[131]||(a[131]=t("p",null,[t("strong",null,"核心思想")],-1)),t("ul",null,[t("li",null,[a[101]||(a[101]=Q("引入")),a[102]||(a[102]=t("code",null,"优势函数=Q-V",-1)),a[103]||(a[103]=Q("作为权重，动作是Q，基线是V ")),t("ul",null,[t("li",null,[a[95]||(a[95]=Q("优势表示")),t("strong",null,[a[93]||(a[93]=Q("当前")),t("mjx-container",X,[(l(),s("svg",I,a[91]||(a[91]=[T("",1)]))),a[92]||(a[92]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",null,","),t("mi",null,"a"),t("mo",{stretchy:"false"},")")])],-1))]),a[94]||(a[94]=Q("相比其他动作平均水平的优势"))])]),t("li",null,[t("strong",null,[t("mjx-container",N,[(l(),s("svg",G,a[96]||(a[96]=[T("",1)]))),a[97]||(a[97]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])],-1))])]),a[98]||(a[98]=Q(" 是")),a[99]||(a[99]=t("code",null,"同一状态下的基线",-1)),a[100]||(a[100]=Q("， 而非所有状态的均值"))])])])]),t("mjx-container",J,[(l(),s("svg",q,a[104]||(a[104]=[T("",1)]))),a[105]||(a[105]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"A"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])])],-1))]),a[132]||(a[132]=t("ul",null,[t("li",null,"同策略算法"),t("li",null,[Q("缺点："),t("em",null,"需要额外引入Q网络，增加了复杂性"),Q("。")])],-1)),a[133]||(a[133]=t("p",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/04-model-free-prediction-control.html#%E4%B8%80%E6%AD%A5%E6%97%B6%E5%BA%8F%E5%B7%AE%E5%88%86",target:"_blank",rel:"noreferrer"},"TD Error"),Q(),t("strong",null,"作为优势函数")],-1)),t("ul",null,[t("li",null,[a[118]||(a[118]=t("code",null,"避免Q网络",-1)),a[119]||(a[119]=Q("，")),a[120]||(a[120]=t("code",null,"只需V",-1)),a[121]||(a[121]=Q("，直接使用 ")),t("strong",null,[t("mjx-container",$,[(l(),s("svg",U,a[106]||(a[106]=[T("",1)]))),a[107]||(a[107]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"δ"),t("mi",null,"t")])])],-1))]),a[108]||(a[108]=Q("来估计优势函数"))]),a[122]||(a[122]=Q("。虽")),a[123]||(a[123]=t("em",null,"不精确",-1)),a[124]||(a[124]=Q("，但实践效果不错。 ")),t("ul",null,[t("li",null,[t("mjx-container",K,[(l(),s("svg",W,a[109]||(a[109]=[T("",1)]))),a[110]||(a[110]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"δ"),t("mi",null,"t")])])],-1))]),a[111]||(a[111]=Q("：当前状态的")),a[112]||(a[112]=t("strong",null,"实际回报",-1)),a[113]||(a[113]=Q("和")),a[114]||(a[114]=t("strong",null,"预期回报",-1)),a[115]||(a[115]=Q("之间的")),a[116]||(a[116]=t("strong",null,"差值",-1)),a[117]||(a[117]=Q("。"))])])])]),t("mjx-container",Y,[(l(),s("svg",t1,a[125]||(a[125]=[T("",1)]))),a[126]||(a[126]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"A"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"δ"),t("mi",null,"t")])]),t("mo",null,"="),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",null,"+"),t("mi",null,"γ"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",{stretchy:"false"},")")]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"T"),t("mi",null,"D"),t("mi",{mathvariant:"normal"},"误"),t("mi",{mathvariant:"normal"},"差")])])])],-1))]),a[134]||(a[134]=t("ul",null,[t("li",null,[Q("也可以这么理解 "),t("ul",null,[t("li",null,[t("strong",null,"Q：由V+TD估计得到"),Q("，"),t("code",null,"去掉了期望值"),Q("， 因为论文实验其"),t("code",null,"效果好")])])])],-1)),t("mjx-container",a1,[(l(),s("svg",Q1,a[127]||(a[127]=[T("",1)]))),a[128]||(a[128]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mi",null,"E")]),t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",null,"+"),t("mi",null,"γ"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",{stretchy:"false"},")")]),t("mo",{stretchy:"false"},"]"),t("mstyle",{mathcolor:"brown"},[t("mo",null,"≈")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",null,"+"),t("mi",null,"γ"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",{stretchy:"false"},")")])])],-1))]),a[135]||(a[135]=T("",3))]),a[257]||(a[257]=T("",2)),t("div",T1,[a[148]||(a[148]=t("div",{class:"custom-block-title"},"优势策略梯度及Loss",-1)),a[149]||(a[149]=t("p",null,[t("strong",null,"策略梯度")],-1)),t("mjx-container",s1,[(l(),s("svg",l1,a[136]||(a[136]=[T("",1)]))),a[137]||(a[137]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"N")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"n"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"N")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"0")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"n")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("msub",null,[t("mi",null,"A"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,","),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"权"),t("mi",{mathvariant:"normal"},"重"),t("mo",null,","),t("mi",{mathvariant:"normal"},"优"),t("mi",{mathvariant:"normal"},"势"),t("mi",{mathvariant:"normal"},"值")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"∣"),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"动"),t("mi",{mathvariant:"normal"},"作"),t("mi",null,"a"),t("mi",{mathvariant:"normal"},"的"),t("mi",{mathvariant:"normal"},"梯"),t("mi",{mathvariant:"normal"},"度")])])])])])])])],-1))]),t("mjx-container",e1,[(l(),s("svg",n1,a[138]||(a[138]=[T("",1)]))),a[139]||(a[139]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"N")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"n"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"N")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"0")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"n")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,","),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")"),t("mo",null,"−"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"权"),t("mi",{mathvariant:"normal"},"重"),t("mo",null,","),t("mi",{mathvariant:"normal"},"优"),t("mi",{mathvariant:"normal"},"势"),t("mi",{mathvariant:"normal"},"值")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"∣"),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"动"),t("mi",{mathvariant:"normal"},"作"),t("mi",null,"a"),t("mi",{mathvariant:"normal"},"的"),t("mi",{mathvariant:"normal"},"梯"),t("mi",{mathvariant:"normal"},"度")])])])])])])])],-1))]),t("mjx-container",m1,[(l(),s("svg",r1,a[140]||(a[140]=[T("",1)]))),a[141]||(a[141]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"N")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"n"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"N")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"0")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"n")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msubsup",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")]),t("mi",null,"n")]),t("mo",null,"+"),t("mi",null,"γ"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")]),t("mi",null,"n")]),t("mo",{stretchy:"false"},")"),t("mo",null,"−"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"权"),t("mi",{mathvariant:"normal"},"重"),t("mo",null,","),t("mi",{mathvariant:"normal"},"优"),t("mi",{mathvariant:"normal"},"势"),t("mi",{mathvariant:"normal"},"值")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"∣"),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"动"),t("mi",{mathvariant:"normal"},"作"),t("mi",null,"a"),t("mi",{mathvariant:"normal"},"的"),t("mi",{mathvariant:"normal"},"梯"),t("mi",{mathvariant:"normal"},"度")])])])])])])])],-1))]),a[150]||(a[150]=t("p",null,[t("strong",null,"参数更新过程")],-1)),a[151]||(a[151]=t("ul",null,[t("li",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E5%8F%82%E6%95%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B",target:"_blank",rel:"noreferrer"},"策略梯度参数更新过程")])],-1)),t("mjx-container",d1,[(l(),s("svg",o1,a[142]||(a[142]=[T("",1)]))),a[143]||(a[143]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},"←"),t("mstyle",{mathcolor:"blue"},[t("mi",null,"θ")]),t("mstyle",{mathcolor:"red"},[t("mo",null,"+")]),t("mi",null,"α"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])])],-1))]),a[152]||(a[152]=T("",2)),t("mjx-container",i1,[(l(),s("svg",h1,a[144]||(a[144]=[T("",1)]))),a[145]||(a[145]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"l"),t("mi",{mathvariant:"normal"},"o"),t("mi",{mathvariant:"normal"},"s"),t("mi",{mathvariant:"normal"},"s")])]),t("mo",null,"="),t("mo",null,"−"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"A"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])])],-1))]),a[153]||(a[153]=T("",1)),t("mjx-container",p1,[(l(),s("svg",g1,a[146]||(a[146]=[T("",1)]))),a[147]||(a[147]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"arg"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("munder",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"ϕ")])])])])]),t("mi",null,"L"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"ϕ")])]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",null,"+"),t("mi",null,"γ"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"ϕ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")])]),t("mo",{stretchy:"false"},")")]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"ϕ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mn",null,"2")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),a[154]||(a[154]=t("p",null,[t("strong",null,"优点")],-1)),a[155]||(a[155]=t("ul",null,[t("li",null,[t("code",null,"减去基线，降低了方差"),Q("，详见"),t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#%E6%B7%BB%E5%8A%A0%E5%9F%BA%E7%BA%BF-%E4%BC%98%E5%8A%BF%E5%87%BD%E6%95%B0",target:"_blank",rel:"noreferrer"},"降低方差数学推导过程")])],-1))]),a[258]||(a[258]=T("",3)),t("div",u1,[a[210]||(a[210]=T("",3)),t("mjx-container",k1,[(l(),s("svg",c1,a[156]||(a[156]=[T("",1)]))),a[157]||(a[157]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"A"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"−"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])])],-1))]),t("ul",null,[t("li",null,[t("mjx-container",H1,[(l(),s("svg",y1,a[158]||(a[158]=[T("",1)]))),a[159]||(a[159]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"A"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])])],-1))]),a[160]||(a[160]=t("code",null,"优势越大",-1)),a[161]||(a[161]=Q("，说明该动作")),a[162]||(a[162]=t("code",null,"比其他动作更好",-1)),a[163]||(a[163]=Q("，应该")),a[164]||(a[164]=t("strong",null,"提升该动作的概率",-1)),a[165]||(a[165]=Q(" 。按此方式去更新策略。"))])]),a[211]||(a[211]=t("p",null,[t("a",{href:"https://zhuanlan.zhihu.com/p/7461863937",target:"_blank",rel:"noreferrer"},"优势趋于0的时候")],-1)),t("ul",null,[t("li",null,[a[171]||(a[171]=Q("假设策略走到")),t("mjx-container",f1,[(l(),s("svg",x1,a[166]||(a[166]=[T("",1)]))),a[167]||(a[167]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"t")])])],-1))]),a[172]||(a[172]=Q("时，")),t("strong",null,[a[170]||(a[170]=Q("存在最优动作")),t("mjx-container",L1,[(l(),s("svg",w1,a[168]||(a[168]=[T("",1)]))),a[169]||(a[169]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mo",null,"∗")])])],-1))])]),a[173]||(a[173]=Q(" ，此时")),a[174]||(a[174]=t("strong",null,"策略",-1)),a[175]||(a[175]=Q("产出")),a[176]||(a[176]=t("code",null,"该动作的概率已是1",-1)),a[177]||(a[177]=Q("或最大。"))])]),t("mjx-container",b1,[(l(),s("svg",M1,a[178]||(a[178]=[T("",1)]))),a[179]||(a[179]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"π"),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mo",null,"∗")])]),t("mo",null,"∣"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mn",null,"1")])])],-1))]),a[212]||(a[212]=t("ul",null,[t("li",null,[Q("此刻，"),t("strong",null,"最优动作概率为1"),Q("，"),t("strong",null,"其余动作概率为0"),Q("。"),t("code",null,"Q已经接近V"),Q("，从而 "),t("code",null,"A 趋近于0"),Q("。")])],-1)),t("mjx-container",E1,[(l(),s("svg",Z1,a[180]||(a[180]=[T("",1)]))),a[181]||(a[181]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("munder",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",null,"∈"),t("mi",null,"A")])]),t("mstyle",{mathcolor:"blue"},[t("mi",null,"π"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},"↔"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mo",null,"∗")]),t("mo",{stretchy:"false"},")")])])],-1))]),t("mjx-container",V1,[(l(),s("svg",D1,a[182]||(a[182]=[T("",1)]))),a[183]||(a[183]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"A"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mo",null,"∗")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"Q"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",null,","),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mo",null,"∗")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mo",{stretchy:"false"},"↔"),t("mstyle",{mathcolor:"red"},[t("mn",null,"0")])])],-1))]),t("ul",null,[t("li",null,[a[188]||(a[188]=t("strong",null,"并非所有动作区分不出好坏",-1)),a[189]||(a[189]=Q("，而是")),a[190]||(a[190]=t("code",null,"此时策略已经趋于最优",-1)),a[191]||(a[191]=Q("，")),t("strong",null,[a[186]||(a[186]=Q("产出最优")),t("mjx-container",v1,[(l(),s("svg",A1,a[184]||(a[184]=[T("",1)]))),a[185]||(a[185]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"∗")])])])],-1))]),a[187]||(a[187]=Q("的概率"))]),a[192]||(a[192]=Q("就是")),a[193]||(a[193]=t("code",null,"最大的",-1)),a[194]||(a[194]=Q("。"))]),t("li",null,[a[209]||(a[209]=t("strong",null,"Critic Loss /优势趋于0 的意义",-1)),t("ul",null,[t("li",null,[a[199]||(a[199]=Q("对actor来说，")),a[200]||(a[200]=t("code",null,"推动它找到某个状态下最佳的动作",-1)),a[201]||(a[201]=Q("，")),t("strong",null,[a[197]||(a[197]=Q("逐步向")),t("mjx-container",C1,[(l(),s("svg",_1,a[195]||(a[195]=[T("",1)]))),a[196]||(a[196]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msup",null,[t("mi",null,"π"),t("mo",null,"∗")])])],-1))]),a[198]||(a[198]=Q("拟合"))])]),t("li",null,[a[206]||(a[206]=Q("对critic来说，")),a[207]||(a[207]=t("code",null,"推动它准确衡量当前策略的价值",-1)),a[208]||(a[208]=Q("，")),t("strong",null,[a[204]||(a[204]=Q("逐步向")),t("mjx-container",F1,[(l(),s("svg",j1,a[202]||(a[202]=[T("",1)]))),a[203]||(a[203]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msup",null,[t("mi",null,"π"),t("mo",null,"∗")])])])])],-1))]),a[205]||(a[205]=Q("拟合"))])])])])])]),a[259]||(a[259]=T("",3)),t("div",B1,[a[221]||(a[221]=t("div",{class:"custom-block-title"},"A2C 算法流程",-1)),t("ul",null,[t("li",null,[a[215]||(a[215]=Q("初始Actor(策略")),t("mjx-container",R1,[(l(),s("svg",O1,a[213]||(a[213]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D70B",d:"M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z",style:{"stroke-width":"3"}})])])],-1)]))),a[214]||(a[214]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"π")])],-1))]),a[216]||(a[216]=Q(")，Actor和环境交互，采样一些资料"))]),a[217]||(a[217]=t("li",null,"用采样资料结合TD方法，估计V函数",-1)),a[218]||(a[218]=t("li",null,"基于V函数计算策略梯度，再更新参数",-1))]),t("mjx-container",S1,[(l(),s("svg",P1,a[219]||(a[219]=[T("",1)]))),a[220]||(a[220]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"J"),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"N")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"n"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"N")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"0")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"n")])])]),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msubsup",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")]),t("mi",null,"n")]),t("mo",null,"+"),t("mi",null,"γ"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"+"),t("mn",null,"1")]),t("mi",null,"n")]),t("mo",{stretchy:"false"},")"),t("mo",null,"−"),t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"权"),t("mi",{mathvariant:"normal"},"重"),t("mo",null,","),t("mi",{mathvariant:"normal"},"优"),t("mi",{mathvariant:"normal"},"势"),t("mi",{mathvariant:"normal"},"值")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mi",{mathvariant:"normal"},"∇"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"p"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msubsup",null,[t("mi",null,"a"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",null,"∣"),t("msubsup",null,[t("mi",null,"s"),t("mi",null,"t"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"动"),t("mi",{mathvariant:"normal"},"作"),t("mi",null,"a"),t("mi",{mathvariant:"normal"},"的"),t("mi",{mathvariant:"normal"},"梯"),t("mi",{mathvariant:"normal"},"度")])])])])])])])],-1))])]),a[260]||(a[260]=t("img",{src:"https://ai-studio-static-online.cdn.bcebos.com/a6096d7cce50414ebc574bccf88630900f7afcf0212e4f96bf675b817e7ec252",style:{display:"block",margin:"auto"},width:"70%"},null,-1)),a[261]||(a[261]=t("h4",{id:"关键技巧",tabindex:"-1"},[Q("关键技巧 "),t("a",{class:"header-anchor",href:"#关键技巧","aria-label":'Permalink to "关键技巧"'},"​")],-1)),t("div",z1,[a[238]||(a[238]=t("div",{class:"custom-block-title"},"A2C 关键技巧",-1)),a[239]||(a[239]=t("p",null,[t("strong",null,"1. Stop-Gradient")],-1)),a[240]||(a[240]=t("ul",null,[t("li",null,"更新Actor时，把Critic参数输出看作常数，避免梯度流向Critic网络。")],-1)),a[241]||(a[241]=t("p",null,[t("strong",null,"2：探索机制-熵正则化")],-1)),t("ul",null,[t("li",null,[t("strong",null,[a[224]||(a[224]=Q("对")),t("mjx-container",X1,[(l(),s("svg",I1,a[222]||(a[222]=[T("",1)]))),a[223]||(a[223]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"π"),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])],-1))]),a[225]||(a[225]=t("strong",null,[Q("的"),t("code",null,"输出设置约束"),Q("，使")],-1)),a[226]||(a[226]=Q("分布的熵不要太小"))]),a[227]||(a[227]=Q("，希望")),a[228]||(a[228]=t("code",null,"不同动作的采样概率平均一些",-1))]),a[229]||(a[229]=t("li",null,"避免陷入局部最优",-1))]),a[242]||(a[242]=t("p",null,[t("strong",null,"3：优势函数值域固定到[-1,1]")],-1)),a[243]||(a[243]=t("ul",null,[t("li",null,"做回报归一化，让优势函数更稳定，从而减小反差")],-1)),a[244]||(a[244]=t("p",null,[t("strong",null,"4. 共享网络")],-1)),a[245]||(a[245]=t("ul",null,[t("li",null,"提高训练效率，让Actor和Critic共享一部分参数。")],-1)),a[246]||(a[246]=t("p",null,[t("strong",null,"5. 估计V和Actor2个网络")],-1)),t("ul",null,[t("li",null,[a[232]||(a[232]=Q("Critic：")),t("mjx-container",N1,[(l(),s("svg",G1,a[230]||(a[230]=[T("",1)]))),a[231]||(a[231]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"V"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"π")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])],-1))]),a[233]||(a[233]=Q("，输入状态，输出标量"))]),t("li",null,[a[236]||(a[236]=Q("Actor：")),t("mjx-container",J1,[(l(),s("svg",q1,a[234]||(a[234]=[T("",1)]))),a[235]||(a[235]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"π"),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])],-1))]),a[237]||(a[237]=Q("，输入状态，输出动作分布，"))])])]),a[262]||(a[262]=T("",8))])}const T3=e(n,[["render",$1]]);export{Q3 as __pageData,T3 as default};

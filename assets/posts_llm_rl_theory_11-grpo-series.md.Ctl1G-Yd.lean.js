import{_ as s,c as l,o as e,ah as a,j as t,a as Q}from"./chunks/framework.CvbyeFFO.js";const o4=JSON.parse('{"title":"GRPO 改进系列","description":"","frontmatter":{"title":"GRPO 改进系列","date":"2025-11-03T14:11:13.000Z","create":"2025-11-03T14:11:13.000Z","categories":["grpo"],"tags":["GPPO","悲观更新","GRPO","DAPO","熵坍塌","Clip机制不公平","探索","奖励噪声","训练不稳定","Clip-Higher","动态采样","Token-Level Loss","Overlong 奖励设计","GSPO","Token-Level 重要性权重","Seq-Level 重要性权重","MoE Routing RePlay","CISPO","重要性权重 Clip","Dr.GRPO"]},"headers":[],"relativePath":"posts/llm/rl/theory/11-grpo-series.md","filePath":"posts/llm/rl/theory/11-grpo-series.md","lastUpdated":1763995754000}'),m={name:"posts/llm/rl/theory/11-grpo-series.md"},d={class:"custom-block important"},o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.571ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -568 4230.5 863","aria-hidden":"true"},n={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.607ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2036.3 1000","aria-hidden":"true"},h={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"84.43ex",height:"5.661ex",role:"img",focusable:"false",viewBox:"0 -1505 37317.9 2502.1","aria-hidden":"true"},p={class:"custom-block important"},H={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.607ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 3362.3 1371.2","aria-hidden":"true"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.659ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 8247.3 1000","aria-hidden":"true"},k={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.005ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -717 444 727","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.957ex",height:"2.195ex",role:"img",focusable:"false",viewBox:"0 -683 1748.8 970.2","aria-hidden":"true"},w={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},V={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.861ex"},xmlns:"http://www.w3.org/2000/svg",width:"46.779ex",height:"8.854ex",role:"img",focusable:"false",viewBox:"0 -2206.7 20676.2 3913.3","aria-hidden":"true"},M={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"122.559ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 54171.2 3113.3","aria-hidden":"true"},D={class:"custom-block note"},b={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.228ex",height:"1.33ex",role:"img",focusable:"false",viewBox:"0 -431 984.6 588.1","aria-hidden":"true"},j={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.562ex",height:"1.332ex",role:"img",focusable:"false",viewBox:"0 -431 1574.4 588.8","aria-hidden":"true"},v={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.228ex",height:"1.33ex",role:"img",focusable:"false",viewBox:"0 -431 984.6 588.1","aria-hidden":"true"},C={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.228ex",height:"1.33ex",role:"img",focusable:"false",viewBox:"0 -431 984.6 588.1","aria-hidden":"true"},B={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.562ex",height:"1.332ex",role:"img",focusable:"false",viewBox:"0 -431 1574.4 588.8","aria-hidden":"true"},X={class:"custom-block danger"},P={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.607ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2036.3 1000","aria-hidden":"true"},F={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.629ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3813.8 1000","aria-hidden":"true"},I={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.238ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.381ex",height:"3.276ex",role:"img",focusable:"false",viewBox:"0 -901 1936.2 1448.1","aria-hidden":"true"},q={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.787ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2116 1000","aria-hidden":"true"},J={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.937ex",height:"2.543ex",role:"img",focusable:"false",viewBox:"0 -1084 3508 1124","aria-hidden":"true"},$={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.502ex",height:"1.979ex",role:"img",focusable:"false",viewBox:"0 -717 4199.7 874.8","aria-hidden":"true"},W={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.223ex",height:"5.208ex",role:"img",focusable:"false",viewBox:"0 -1342 10706.5 2302","aria-hidden":"true"},t1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.937ex",height:"2.543ex",role:"img",focusable:"false",viewBox:"0 -1084 3508 1124","aria-hidden":"true"},Q1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.946ex",height:"1.979ex",role:"img",focusable:"false",viewBox:"0 -717 4396.3 874.8","aria-hidden":"true"},l1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},e1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.668ex",height:"5.208ex",role:"img",focusable:"false",viewBox:"0 -1342 10903.1 2302","aria-hidden":"true"},s1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},m1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.626ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.21ex",height:"3.079ex",role:"img",focusable:"false",viewBox:"0 -1084 5396.9 1360.8","aria-hidden":"true"},d1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},o1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.626ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.71ex",height:"2.81ex",role:"img",focusable:"false",viewBox:"0 -965.2 3849.9 1242.1","aria-hidden":"true"},r1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-5.939ex"},xmlns:"http://www.w3.org/2000/svg",width:"81.934ex",height:"10.12ex",role:"img",focusable:"false",viewBox:"0 -1847.8 36214.8 4472.9","aria-hidden":"true"},i1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-5.939ex"},xmlns:"http://www.w3.org/2000/svg",width:"60.993ex",height:"10.12ex",role:"img",focusable:"false",viewBox:"0 -1847.8 26958.7 4472.9","aria-hidden":"true"},g1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.414ex"},xmlns:"http://www.w3.org/2000/svg",width:"66.798ex",height:"9.959ex",role:"img",focusable:"false",viewBox:"0 -2451 29524.6 4402","aria-hidden":"true"},H1={class:"custom-block info"},c1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.606ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6898 1000","aria-hidden":"true"},L1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.005ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -717 444 727","aria-hidden":"true"},f1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.925ex",height:"1.864ex",role:"img",focusable:"false",viewBox:"0 -666 2618.7 823.8","aria-hidden":"true"},x1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.606ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6898 1000","aria-hidden":"true"},V1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.925ex",height:"1.864ex",role:"img",focusable:"false",viewBox:"0 -666 2618.7 823.8","aria-hidden":"true"},Z1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},D1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.925ex",height:"1.864ex",role:"img",focusable:"false",viewBox:"0 -666 2618.7 823.8","aria-hidden":"true"},b1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.606ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6898 1000","aria-hidden":"true"},j1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.005ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -717 444 727","aria-hidden":"true"},v1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.48ex",height:"1.864ex",role:"img",focusable:"false",viewBox:"0 -666 2422.2 823.8","aria-hidden":"true"},C1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"49.134ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 21717.2 1000","aria-hidden":"true"},B1={class:"custom-block warning"},E1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},X1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"25.562ex",height:"5.475ex",role:"img",focusable:"false",viewBox:"0 -1460 11298.3 2420","aria-hidden":"true"},P1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},S1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.566ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 10858.3 1371.2","aria-hidden":"true"},F1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"102.918ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 45489.6 4705.1","aria-hidden":"true"},I1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},G1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"79.462ex",height:"6.775ex",role:"img",focusable:"false",viewBox:"0 -1748.5 35122.2 2994.4","aria-hidden":"true"},q1={class:"custom-block danger"},N1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},J1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.895ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5257.6 1000","aria-hidden":"true"},K1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.694ex",height:"2.366ex",role:"img",focusable:"false",viewBox:"0 -750 7820.6 1045.7","aria-hidden":"true"},U1={class:"custom-block info"},W1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.304ex",height:"2.174ex",role:"img",focusable:"false",viewBox:"0 -666 4996.4 961","aria-hidden":"true"},t2={class:"custom-block danger"},T2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Q2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.831ex"},xmlns:"http://www.w3.org/2000/svg",width:"31.823ex",height:"6.771ex",role:"img",focusable:"false",viewBox:"0 -1741.7 14065.6 2992.8","aria-hidden":"true"},a2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},l2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.836ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.423ex",height:"6.804ex",role:"img",focusable:"false",viewBox:"0 -1753.7 14330.8 3007.4","aria-hidden":"true"},e2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.566ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 10858.3 1371.2","aria-hidden":"true"},m2={class:"custom-block danger"},d2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},o2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"85.138ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 37630.8 4672.1","aria-hidden":"true"},r2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},n2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"87.35ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 38608.7 4705.1","aria-hidden":"true"},i2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"81.043ex",height:"10.301ex",role:"img",focusable:"false",viewBox:"0 -1748.5 35821.1 4553.2","aria-hidden":"true"},g2={class:"custom-block warning"},p2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},H2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.198ex"},xmlns:"http://www.w3.org/2000/svg",width:"38.674ex",height:"5.501ex",role:"img",focusable:"false",viewBox:"0 -1460 17094 2431.6","aria-hidden":"true"},c2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},u2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.383ex",height:"5.643ex",role:"img",focusable:"false",viewBox:"0 -1497.2 11661.1 2494.4","aria-hidden":"true"},L2={class:"custom-block warning"},k2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.592ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.834ex",height:"1.567ex",role:"img",focusable:"false",viewBox:"0 -431 1694.8 692.6","aria-hidden":"true"},y2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.228ex",height:"1.33ex",role:"img",focusable:"false",viewBox:"0 -431 984.6 588.1","aria-hidden":"true"},w2={class:"custom-block tip"},V2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.383ex",height:"5.643ex",role:"img",focusable:"false",viewBox:"0 -1497.2 11661.1 2494.4","aria-hidden":"true"},Z2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.198ex"},xmlns:"http://www.w3.org/2000/svg",width:"19.258ex",height:"5.501ex",role:"img",focusable:"false",viewBox:"0 -1460 8511.8 2431.6","aria-hidden":"true"},b2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},A2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"63.485ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 28060.4 3113.3","aria-hidden":"true"},j2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},O2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"79.462ex",height:"6.775ex",role:"img",focusable:"false",viewBox:"0 -1748.5 35122.2 2994.4","aria-hidden":"true"},v2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},R2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-11.178ex"},xmlns:"http://www.w3.org/2000/svg",width:"92.587ex",height:"23.488ex",role:"img",focusable:"false",viewBox:"0 -5440.8 40923.6 10381.7","aria-hidden":"true"},C2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},_2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"92.048ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 40685.4 3113.3","aria-hidden":"true"},B2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.912ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 3939.3 1371.2","aria-hidden":"true"},X2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},P2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"97.096ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 42916.5 4672.1","aria-hidden":"true"},S2={class:"custom-block tip"},F2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.912ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 3939.3 1371.2","aria-hidden":"true"},I2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},G2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"96.073ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 42464.4 3113.3","aria-hidden":"true"},q2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},N2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"39.869ex",height:"5.643ex",role:"img",focusable:"false",viewBox:"0 -1497.2 17622 2494.4","aria-hidden":"true"},J2={class:"custom-block tip"},K2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.579ex",height:"2.538ex",role:"img",focusable:"false",viewBox:"0 -871.8 10863.8 1121.8","aria-hidden":"true"},U2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},W2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.972ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7501.6 1000","aria-hidden":"true"},Y2={class:"custom-block warning"},t3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.13ex",height:"1.644ex",role:"img",focusable:"false",viewBox:"0 -431 1825.4 726.7","aria-hidden":"true"},Q3={class:"custom-block tip"},a3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},l3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"79.255ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 35030.6 4672.1","aria-hidden":"true"},e3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},s3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.948ex"},xmlns:"http://www.w3.org/2000/svg",width:"38.517ex",height:"3.01ex",role:"img",focusable:"false",viewBox:"0 -911.5 17024.5 1330.5","aria-hidden":"true"},m3={class:"custom-block warning"},d3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},o3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.895ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5257.6 1000","aria-hidden":"true"},r3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.841ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7001.6 1000","aria-hidden":"true"},i3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.845ex",height:"2.543ex",role:"img",focusable:"false",viewBox:"0 -1084 2583.6 1124","aria-hidden":"true"},g3={class:"custom-block tip"},p3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.895ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5257.6 1000","aria-hidden":"true"},c3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.694ex",height:"2.366ex",role:"img",focusable:"false",viewBox:"0 -750 7820.6 1045.7","aria-hidden":"true"},L3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.415ex",height:"1.864ex",role:"img",focusable:"false",viewBox:"0 -666 4161.2 823.8","aria-hidden":"true"},f3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},y3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.17ex",height:"2.176ex",role:"img",focusable:"false",viewBox:"0 -666 4937 961.7","aria-hidden":"true"},x3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},w3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"84.952ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 37548.7 4705.1","aria-hidden":"true"},V3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"105.731ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 46733 4705.1","aria-hidden":"true"},Z3={class:"custom-block tip"},D3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},b3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"99.809ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 44115.7 4672.1","aria-hidden":"true"},A3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},j3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"102.918ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 45489.6 4705.1","aria-hidden":"true"},O3={class:"custom-block tip"},v3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.549ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 2452.6 840.8","aria-hidden":"true"},C3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.706ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 2079.9 840.8","aria-hidden":"true"},B3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.396ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 9015 840.8","aria-hidden":"true"},X3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},P3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.85ex"},xmlns:"http://www.w3.org/2000/svg",width:"54.957ex",height:"8.83ex",role:"img",focusable:"false",viewBox:"0 -2201.5 24290.8 3903","aria-hidden":"true"},S3={class:"custom-block tip"},F3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.798ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.137ex",height:"3.263ex",role:"img",focusable:"false",viewBox:"0 -1089.5 2270.7 1442.3","aria-hidden":"true"},I3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.678ex",height:"1.756ex",role:"img",focusable:"false",viewBox:"0 -694 3835.9 776","aria-hidden":"true"},q3={class:"custom-block warning"},N3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},J3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"100.238ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 44305 4672.1","aria-hidden":"true"},K3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},$3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.339ex",height:"5.475ex",role:"img",focusable:"false",viewBox:"0 -1460 13409.8 2420","aria-hidden":"true"},U3={class:"custom-block tip"},W3={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Y3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"96.596ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 42695.3 4672.1","aria-hidden":"true"},t4={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},T4={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.566ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 10858.3 1371.2","aria-hidden":"true"};function Q4(a4,T,l4,e4,s4,m4){return e(),l("div",null,[T[474]||(T[474]=a("",4)),t("div",d,[T[17]||(T[17]=t("div",{class:"custom-block-title"},"用IS权重优化KL-3估计",-1)),t("p",null,[t("strong",null,[T[2]||(T[2]=Q("问题：当")),t("mjx-container",o,[(e(),l("svg",r,T[0]||(T[0]=[a("",1)]))),T[1]||(T[1]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",null,"≪"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"r"),t("mi",null,"e"),t("mi",null,"f")])])])],-1))]),T[3]||(T[3]=Q("时"))])]),T[18]||(T[18]=a("",2)),t("ul",null,[T[14]||(T[14]=t("li",null,[t("p",null,[Q("核心："),t("code",null,"重要性采样比例"),Q(" * "),t("code",null,"原始K3估计"),Q("。")])],-1)),t("li",null,[t("p",null,[T[6]||(T[6]=Q("乘以 ")),t("strong",null,[t("mjx-container",n,[(e(),l("svg",i,T[4]||(T[4]=[a("",1)]))),T[5]||(T[5]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])],-1))])]),T[7]||(T[7]=Q("，无论采样如何，梯度")),T[8]||(T[8]=t("code",null,"期望值都是准确",-1)),T[9]||(T[9]=Q("的，")),T[10]||(T[10]=t("code",null,"消除了系统误差",-1)),T[11]||(T[11]=Q("，")),T[12]||(T[12]=t("code",null,"梯度变无偏估计",-1)),T[13]||(T[13]=Q("。"))])])]),t("mjx-container",h,[(e(),l("svg",g,T[15]||(T[15]=[a("",1)]))),T[16]||(T[16]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"D"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"K"),t("mi",null,"L")])])]),t("mstyle",{mathcolor:"blue"},[t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"r"),t("mi",null,"e"),t("mi",null,"f")])])])])]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"r"),t("mi",null,"e"),t("mi",null,"f")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mstyle",{mathcolor:"red"},[t("mo",null,"−"),t("mi",null,"log")]),t("mfrac",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"r"),t("mi",null,"e"),t("mi",null,"f")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"−"),t("mn",null,"1"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))]),T[19]||(T[19]=a("",3))]),T[475]||(T[475]=t("h4",{id:"mask-异策略负样本",tabindex:"-1"},[Q("Mask 异策略负样本 "),t("a",{class:"header-anchor",href:"#mask-异策略负样本","aria-label":'Permalink to "Mask 异策略负样本"'},"​")],-1)),t("div",p,[T[64]||(T[64]=a("",4)),t("ul",null,[t("li",null,[T[38]||(T[38]=t("p",null,[t("code",null,"Mask不好的序列，不学它"),Q("，差序列定义如下：")],-1)),t("ul",null,[t("li",null,[T[22]||(T[22]=t("strong",null,"结果不好",-1)),T[23]||(T[23]=Q("：")),t("mjx-container",H,[(e(),l("svg",c,T[20]||(T[20]=[a("",1)]))),T[21]||(T[21]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"<"),t("mn",null,"0")])])],-1))]),T[24]||(T[24]=Q("，")),T[25]||(T[25]=t("code",null,"优势为负",-1))]),t("li",null,[T[28]||(T[28]=t("strong",null,"偏差大",-1)),T[29]||(T[29]=Q("：")),t("mjx-container",u,[(e(),l("svg",L,T[26]||(T[26]=[a("",1)]))),T[27]||(T[27]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"D"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"K"),t("mi",null,"L")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])]),t("mo",null,"∣∣"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},")"),t("mo",null,">"),t("mi",null,"δ")])])],-1))]),T[30]||(T[30]=Q("，")),T[31]||(T[31]=t("code",null,"KL差异大",-1)),T[32]||(T[32]=Q("，")),T[33]||(T[33]=t("code",null,"rollout模型",-1)),T[34]||(T[34]=Q("和")),T[35]||(T[35]=t("code",null,"当前模型",-1)),T[36]||(T[36]=Q()),T[37]||(T[37]=t("code",null,"差异大",-1))])])]),t("li",null,[T[60]||(T[60]=t("p",null,"系数计算公式",-1)),t("ul",null,[t("li",null,[T[41]||(T[41]=t("code",null,"序列级KL散度",-1)),T[42]||(T[42]=Q("：序列内")),T[43]||(T[43]=t("code",null,"所有token的KL值做平均",-1)),T[44]||(T[44]=Q("，作为")),T[45]||(T[45]=t("code",null,"序列级KL散度",-1)),T[46]||(T[46]=Q("，设定")),T[47]||(T[47]=t("code",null,"最小阈值",-1)),t("mjx-container",k,[(e(),l("svg",f,T[39]||(T[39]=[a("",1)]))),T[40]||(T[40]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"δ")])])],-1))])]),t("li",null,[T[50]||(T[50]=t("code",null,"Token级系数",-1)),T[51]||(T[51]=Q()),t("mjx-container",y,[(e(),l("svg",x,T[48]||(T[48]=[a("",1)]))),T[49]||(T[49]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"M"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])])])],-1))]),T[52]||(T[52]=Q("，")),T[53]||(T[53]=t("code",null,"优势为负",-1)),T[54]||(T[54]=Q("且")),T[55]||(T[55]=t("code",null,"KL差异较大",-1)),T[56]||(T[56]=Q("时，")),T[57]||(T[57]=t("code",null,"设为0",-1))])]),t("mjx-container",w,[(e(),l("svg",V,T[58]||(T[58]=[a("",1)]))),T[59]||(T[59]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"M"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"{"),t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mn",null,"0")]),t("mo",null,",")]),t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"<"),t("mn",null,"0")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"red"},[t("mi",null,"log")]),t("mfrac",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mstyle",{mathcolor:"red"},[t("mo",null,">"),t("mi",null,"δ")])])]),t("mtr",null,[t("mtd",null,[t("mn",null,"1"),t("mo",null,",")]),t("mtd",null,[t("mtext",null,"otherwise")])])]),t("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])],-1))])]),t("li",null,[T[63]||(T[63]=t("p",null,"目标",-1)),t("mjx-container",M,[(e(),l("svg",Z,T[61]||(T[61]=[a("",1)]))),T[62]||(T[62]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"J")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GRPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"q"),t("mo",null,","),t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ"),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ"),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mstyle",{mathcolor:"red"},[t("mo",null,"⋅"),t("msub",null,[t("mi",null,"M"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"−"),t("mi",null,"β"),t("msub",null,[t("mi",null,"D"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"K"),t("mi",null,"L")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mo",null,"∣∣"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"r"),t("mi",null,"e"),t("mi",null,"f")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))])])])]),T[476]||(T[476]=t("h4",{id:"保留routing和采样mask-消除训推不一致",tabindex:"-1"},[Q("保留Routing和采样Mask 消除训推不一致 "),t("a",{class:"header-anchor",href:"#保留routing和采样mask-消除训推不一致","aria-label":'Permalink to "保留Routing和采样Mask 消除训推不一致"'},"​")],-1)),t("div",D,[T[90]||(T[90]=a("",6)),t("ul",null,[t("li",null,[T[74]||(T[74]=Q("问题： ")),t("ul",null,[T[73]||(T[73]=t("li",null,[Q("推理时，通常使用top-p, top-k来提高回复质量，"),t("code",null,"低概率token概率为0"),Q("，相当于"),t("code",null,"词表截断"),Q("。")],-1)),t("li",null,[T[69]||(T[69]=Q("训练时，计算IS权重，则")),t("mjx-container",b,[(e(),l("svg",A,T[65]||(T[65]=[a("",1)]))),T[66]||(T[66]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])])],-1))]),T[70]||(T[70]=Q("和")),t("mjx-container",j,[(e(),l("svg",O,T[67]||(T[67]=[a("",1)]))),T[68]||(T[68]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])],-1))]),T[71]||(T[71]=t("code",null,"动作空间/定义域 不一样",-1)),T[72]||(T[72]=Q("，导致计算失效。"))])])]),t("li",null,[T[89]||(T[89]=Q("方法 ")),t("ul",null,[t("li",null,[T[84]||(T[84]=t("code",null,"保留采样Mask",-1)),T[85]||(T[85]=Q("，")),T[86]||(T[86]=t("code",null,"在训练时应用到",-1)),t("mjx-container",v,[(e(),l("svg",R,T[75]||(T[75]=[a("",1)]))),T[76]||(T[76]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])])],-1))]),T[87]||(T[87]=Q("，该部分概率为0。")),t("strong",null,[T[81]||(T[81]=Q("保证")),t("mjx-container",C,[(e(),l("svg",_,T[77]||(T[77]=[a("",1)]))),T[78]||(T[78]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])])],-1))]),T[82]||(T[82]=Q("和")),t("mjx-container",B,[(e(),l("svg",E,T[79]||(T[79]=[a("",1)]))),T[80]||(T[80]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])],-1))]),T[83]||(T[83]=Q("词表一致"))]),T[88]||(T[88]=Q("。"))])])])])]),T[477]||(T[477]=a("",4)),t("div",X,[T[160]||(T[160]=t("div",{class:"custom-block-title"},"GPPO",-1)),T[161]||(T[161]=t("p",null,[t("strong",null,"背景")],-1)),t("ul",null,[T[103]||(T[103]=t("li",null,[Q("解决"),t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#clip-%E5%88%B0%E5%BA%95%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88",target:"_blank",rel:"noreferrer"},"PPO-CLIP超出范围后梯度为0"),Q("的问题。")],-1)),t("li",null,[T[93]||(T[93]=Q("比例")),t("mjx-container",P,[(e(),l("svg",S,T[91]||(T[91]=[a("",1)]))),T[92]||(T[92]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])])],-1))]),T[94]||(T[94]=Q("一旦")),T[95]||(T[95]=t("code",null,"超出范围",-1)),T[96]||(T[96]=Q("，变量就变为")),T[97]||(T[97]=t("code",null,"一个常数",-1)),T[98]||(T[98]=Q("，对")),T[99]||(T[99]=t("code",null,"常数求导为0",-1)),T[100]||(T[100]=Q("，")),T[101]||(T[101]=t("code",null,"导致梯度为0",-1)),T[102]||(T[102]=Q("。"))])]),T[162]||(T[162]=a("",3)),t("ul",null,[t("li",null,[t("p",null,[T[108]||(T[108]=Q("当")),T[109]||(T[109]=t("code",null,"IS比例",-1)),T[110]||(T[110]=Q()),t("mjx-container",F,[(e(),l("svg",z,T[104]||(T[104]=[a("",1)]))),T[105]||(T[105]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("mi",null,"δ")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])])],-1))]),T[111]||(T[111]=t("code",null,"超出截断范围",-1)),T[112]||(T[112]=Q("，")),T[113]||(T[113]=t("code",null,"不切断梯度",-1)),T[114]||(T[114]=Q("，而是利用 ")),t("strong",null,[t("mjx-container",I,[(e(),l("svg",G,T[106]||(T[106]=[a("",1)]))),T[107]||(T[107]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mfrac",null,[t("mi",null,"δ"),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",{stretchy:"false"},")")])])])],-1))])]),T[115]||(T[115]=Q(" 温和地")),T[116]||(T[116]=t("code",null,"回传梯度",-1)),T[117]||(T[117]=Q("。"))]),t("ul",null,[T[121]||(T[121]=a("",2)),t("li",null,[t("p",null,[t("mjx-container",q,[(e(),l("svg",N,T[118]||(T[118]=[a("",1)]))),T[119]||(T[119]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",{stretchy:"false"},")")])],-1))]),T[120]||(T[120]=Q("：停止梯度，计算数值时，该值等于输入值。"))])])])])]),T[163]||(T[163]=t("p",null,[t("strong",null,"单token loss，设置三种条件")],-1)),t("ul",null,[t("li",null,[t("p",null,[T[126]||(T[126]=Q("过度悲观：")),T[127]||(T[127]=t("code",null,"优势为负",-1)),T[128]||(T[128]=Q("且")),T[129]||(T[129]=t("code",null,"比率过低",-1)),T[130]||(T[130]=Q("，")),t("mjx-container",J,[(e(),l("svg",K,T[122]||(T[122]=[a("",1)]))),T[123]||(T[123]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"<"),t("mn",null,"0")])])],-1))]),T[131]||(T[131]=Q(" 且 ")),t("mjx-container",$,[(e(),l("svg",U,T[124]||(T[124]=[a("",1)]))),T[125]||(T[125]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"δ"),t("mo",null,"<"),t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"l")])])])])],-1))])]),t("mjx-container",W,[(e(),l("svg",Y,T[132]||(T[132]=[a("",1)]))),T[133]||(T[133]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msubsup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"l")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"="),t("msub",null,[t("mi",null,"β"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"1")])]),t("mo",null,"⋅"),t("mfrac",null,[t("mrow",null,[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"l")])]),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mi",null,"δ"),t("mo",null,"⋅"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])])])],-1))])]),t("li",null,[t("p",null,[T[138]||(T[138]=Q("过度乐观：")),T[139]||(T[139]=t("code",null,"优势为正",-1)),T[140]||(T[140]=Q("且")),T[141]||(T[141]=t("code",null,"比率过高",-1)),T[142]||(T[142]=Q("，")),t("mjx-container",t1,[(e(),l("svg",T1,T[134]||(T[134]=[a("",1)]))),T[135]||(T[135]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,">"),t("mn",null,"0")])])],-1))]),T[143]||(T[143]=Q(" 且 ")),t("mjx-container",Q1,[(e(),l("svg",a1,T[136]||(T[136]=[a("",1)]))),T[137]||(T[137]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mi",null,"δ"),t("mo",null,">"),t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"h")])])])])],-1))])]),t("mjx-container",l1,[(e(),l("svg",e1,T[144]||(T[144]=[a("",1)]))),T[145]||(T[145]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msubsup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"l")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"="),t("msub",null,[t("mi",null,"β"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"2")])]),t("mo",null,"⋅"),t("mfrac",null,[t("mrow",null,[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")])]),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mi",null,"δ"),t("mo",null,"⋅"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])])])],-1))])]),t("li",null,[T[148]||(T[148]=t("p",null,[t("code",null,"信任区域内"),Q("："),t("code",null,"正常更新")],-1)),t("mjx-container",s1,[(e(),l("svg",m1,T[146]||(T[146]=[a("",1)]))),T[147]||(T[147]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msubsup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"l")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"="),t("mi",null,"δ"),t("mo",null,"⋅"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])])])],-1))])])]),T[164]||(T[164]=t("p",null,[t("strong",null,"核心公式")],-1)),t("ul",null,[t("li",null,[t("p",null,[T[151]||(T[151]=Q("目标函数如下，其中")),t("mjx-container",d1,[(e(),l("svg",o1,T[149]||(T[149]=[a("",1)]))),T[150]||(T[150]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"δ"),t("mo",null,"="),t("msubsup",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])],-1))]),T[152]||(T[152]=Q("，是IS权重比例。"))]),t("mjx-container",r1,[(e(),l("svg",n1,T[153]||(T[153]=[a("",1)]))),T[154]||(T[154]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GPPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"E")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∼"),t("mi",null,"D")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"M")]),t("msub",null,[t("mi",null,"T"),t("mi",null,"j")])])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"M")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"j")])])])]),t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("msubsup",null,[t("mi",null,"r"),t("mi",null,"t"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("msubsup",null,[t("mi",null,"r"),t("mi",null,"t"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mfrac",null,[t("mrow",null,[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"l")])]),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",{stretchy:"false"},")")])]),t("mi",null,"δ"),t("mo",null,","),t("mfrac",null,[t("mrow",null,[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")])]),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",{stretchy:"false"},")")])]),t("mi",null,"δ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])]),t("mo",null,"⋅"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))])]),t("li",null,[T[159]||(T[159]=t("p",null,"梯度",-1)),t("mjx-container",i1,[(e(),l("svg",h1,T[155]||(T[155]=[a("",1)]))),T[156]||(T[156]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GPPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"double-struck"},"E")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∼"),t("mi",null,"D")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"M")]),t("msub",null,[t("mi",null,"T"),t("mi",null,"j")])])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"M")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"j")])])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"F")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("msub",null,[t("mi",null,"ϕ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"a"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,","),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),t("mjx-container",g1,[(e(),l("svg",p1,T[157]||(T[157]=[a("",1)]))),T[158]||(T[158]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"F")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"{"),t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"l")])]),t("mo",null,",")]),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",null,"δ"),t("mo",null,"<"),t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"l")])]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mtext",null,"and"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"<"),t("mn",null,"0")])])]),t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")])]),t("mo",null,",")]),t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("mi",null,"δ"),t("mo",null,">"),t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"h")])]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mtext",null,"and"),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,">"),t("mn",null,"0")])])]),t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"red"},[t("mi",null,"δ")]),t("mo",null,",")]),t("mtd",null,[t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"其他情况")]),t("mtext",null,", 如: ")]),t("mi",null,"δ"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"≤"),t("mtext",null,"clip"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",null,","),t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"l")]),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")]),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"j"),t("mo",{stretchy:"false"},")")])])])])]),t("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])],-1))])])]),T[165]||(T[165]=t("p",null,[t("strong",null,"Reward 设置")],-1)),T[166]||(T[166]=t("ul",null,[t("li",null,"数学：1、-1，无思考的话，也要进行惩罚。"),t("li",null,[Q("代码："),t("code",null,"soft reward"),Q("，按测试用例比例计算得分。")])],-1))]),T[478]||(T[478]=t("h4",{id:"gppo-vs-cispo",tabindex:"-1"},[Q("GPPO vs CISPO "),t("a",{class:"header-anchor",href:"#gppo-vs-cispo","aria-label":'Permalink to "GPPO vs CISPO"'},"​")],-1)),t("div",H1,[T[213]||(T[213]=a("",4)),t("ul",null,[t("li",null,[T[180]||(T[180]=t("code",null,"坏动作、概率变高",-1)),T[181]||(T[181]=Q("，")),t("mjx-container",c1,[(e(),l("svg",u1,T[167]||(T[167]=[a("",1)]))),T[168]||(T[168]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"A"),t("mo",null,"<"),t("mn",null,"0"),t("mo",null,","),t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,">"),t("mn",null,"1")])],-1))]),t("ul",null,[t("li",null,[T[171]||(T[171]=Q("GPPO：")),T[172]||(T[172]=t("code",null,"无限制",-1)),T[173]||(T[173]=Q("，使用")),t("mjx-container",L1,[(e(),l("svg",k1,T[169]||(T[169]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D6FF",d:"M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z",style:{"stroke-width":"3"}})])])],-1)]))),T[170]||(T[170]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"δ")])],-1))]),T[174]||(T[174]=t("code",null,"强力惩罚",-1))]),t("li",null,[T[177]||(T[177]=Q("CISPO：")),T[178]||(T[178]=t("code",null,"仅clip到",-1)),T[179]||(T[179]=Q()),t("mjx-container",f1,[(e(),l("svg",y1,T[175]||(T[175]=[a("",1)]))),T[176]||(T[176]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")])])],-1))])])])]),t("li",null,[T[190]||(T[190]=Q("好动作、概率变高，")),t("mjx-container",x1,[(e(),l("svg",w1,T[182]||(T[182]=[a("",1)]))),T[183]||(T[183]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"A"),t("mo",null,">"),t("mn",null,"0"),t("mo",null,","),t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,">"),t("mn",null,"1")])],-1))]),t("ul",null,[t("li",null,[T[186]||(T[186]=Q("GPPO：条件clip到")),t("mjx-container",V1,[(e(),l("svg",M1,T[184]||(T[184]=[a("",1)]))),T[185]||(T[185]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"h")])])])],-1))])]),t("li",null,[T[189]||(T[189]=Q("CISPO：clip到")),t("mjx-container",Z1,[(e(),l("svg",D1,T[187]||(T[187]=[a("",1)]))),T[188]||(T[188]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")])])],-1))])])])]),t("li",null,[T[202]||(T[202]=t("code",null,"好动作、概率变低",-1)),T[203]||(T[203]=Q("，")),t("mjx-container",b1,[(e(),l("svg",A1,T[191]||(T[191]=[a("",1)]))),T[192]||(T[192]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"A"),t("mo",null,">"),t("mn",null,"0"),t("mo",null,","),t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"<"),t("mn",null,"1")])],-1))]),t("ul",null,[t("li",null,[T[195]||(T[195]=Q("GPPO：")),T[196]||(T[196]=t("code",null,"无限制",-1)),T[197]||(T[197]=Q("，使用")),t("mjx-container",j1,[(e(),l("svg",O1,T[193]||(T[193]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D6FF",d:"M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z",style:{"stroke-width":"3"}})])])],-1)]))),T[194]||(T[194]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"δ")])],-1))]),T[198]||(T[198]=Q("恢复"))]),t("li",null,[T[201]||(T[201]=Q("CISPO：clip到 ")),t("mjx-container",v1,[(e(),l("svg",R1,T[199]||(T[199]=[a("",1)]))),T[200]||(T[200]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"l")])])])],-1))])])])])]),T[214]||(T[214]=t("p",null,[t("strong",null,"Case")],-1)),t("ul",null,[T[211]||(T[211]=t("li",null,[Q("模型犯错了，"),t("code",null,"优势为负"),Q("(A=-10)，"),t("code",null,"IS比例却很大"),Q("(r=100)")],-1)),t("li",null,[T[206]||(T[206]=Q("CISPO：")),t("mjx-container",C1,[(e(),l("svg",_1,T[204]||(T[204]=[a("",1)]))),T[205]||(T[205]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"r"),t("mo",null,"="),t("mtext",null,"clip"),t("mo",{stretchy:"false"},"("),t("mi",null,"δ"),t("mo",null,","),t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"l")]),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mi",null,"h")]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mtext",null,"clip"),t("mo",{stretchy:"false"},"("),t("mn",null,"100"),t("mo",null,","),t("mn",null,"0.9"),t("mo",null,","),t("mn",null,"1.1"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mn",null,"1.1")])],-1))]),T[207]||(T[207]=Q(", 梯度")),T[208]||(T[208]=t("code",null,"1.1 * (-10)",-1)),T[209]||(T[209]=Q("=")),T[210]||(T[210]=t("code",null,"-11",-1))]),T[212]||(T[212]=t("li",null,[Q("GPPO：不符合条件1和2，符合条件3，正常更新，梯度 "),t("code",null,"100*(-10)"),Q("="),t("code",null,"-1000")],-1))])]),T[479]||(T[479]=a("",5)),t("div",B1,[T[230]||(T[230]=t("div",{class:"custom-block-title"},"RL技巧各执一词充满矛盾",-1)),T[231]||(T[231]=t("p",null,[t("strong",null,"目前RL技巧太多，各说各的好，缺乏统一应用指南和深入研究")],-1)),t("ul",null,[T[229]||(T[229]=t("li",null,[t("p",null,"关于归一化"),t("ul",null,[t("li",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#%E7%BB%84%E5%86%85%E7%9B%B8%E5%AF%B9%E4%BC%98%E5%8A%BF",target:"_blank",rel:"noreferrer"},"GRPO"),Q("："),t("code",null,"组归一化 好")]),t("li",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#reinforce-%E7%AE%97%E6%B3%95-1",target:"_blank",rel:"noreferrer"},"REINFORCE++"),Q("："),t("code",null,"Batch归一化 好")])])],-1)),t("li",null,[T[221]||(T[221]=t("p",null,"关于组优势时除以标准差",-1)),t("ul",null,[t("li",null,[T[217]||(T[217]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#%E7%BB%84%E5%86%85%E7%9B%B8%E5%AF%B9%E4%BC%98%E5%8A%BF",target:"_blank",rel:"noreferrer"},"GRPO"),Q("："),t("code",null,"要除以标准差")],-1)),t("mjx-container",E1,[(e(),l("svg",X1,T[215]||(T[215]=[a("",1)]))),T[216]||(T[216]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")]),t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"std")]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")])])])],-1))])]),t("li",null,[T[220]||(T[220]=t("p",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#_2503-dr-grpo",target:"_blank",rel:"noreferrer"},"Dr.GRPO"),Q("："),t("code",null,"不除以标准差")],-1)),t("mjx-container",P1,[(e(),l("svg",S1,T[218]||(T[218]=[a("",1)]))),T[219]||(T[219]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")])],-1))])])])]),t("li",null,[T[228]||(T[228]=t("p",null,"关于Loss聚合",-1)),t("ul",null,[t("li",null,[T[224]||(T[224]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#_2504-dapo-seed",target:"_blank",rel:"noreferrer"},"DAPO"),Q("："),t("code",null,"Token-Level Loss")],-1)),t("mjx-container",F1,[(e(),l("svg",z1,T[222]||(T[222]=[a("",1)]))),T[223]||(T[223]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),t("li",null,[T[227]||(T[227]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#_2507-gspo-qwen",target:"_blank",rel:"noreferrer"},"GSPO"),Q("："),t("code",null,"Response-Level Loss")],-1)),t("mjx-container",I1,[(e(),l("svg",G1,T[225]||(T[225]=[a("",1)]))),T[226]||(T[226]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))])])])])]),T[232]||(T[232]=t("p",null,[t("strong",null,"可能的原因")],-1)),T[233]||(T[233]=t("ul",null,[t("li",null,"实验环境、训练数据、初始模型、评测准则等等都不一样。")],-1))]),T[480]||(T[480]=a("",11)),t("div",q1,[T[249]||(T[249]=t("div",{class:"custom-block-title"},"裁剪策略",-1)),T[250]||(T[250]=t("p",null,[t("strong",null,"2. 裁剪策略")],-1)),t("ul",null,[T[248]||(T[248]=t("li",null,[Q("目的："),t("code",null,"裁剪，限制单次更新幅度"),Q("，"),t("code",null,"防止策略过度更新"),Q("。")],-1)),t("li",null,[T[247]||(T[247]=Q("方法：可以裁剪重要性权重、奖励、优势等。 ")),t("ul",null,[t("li",null,[T[236]||(T[236]=t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#ppo-clip",target:"_blank",rel:"noreferrer"},"PPO-Clip",-1)),T[237]||(T[237]=Q("：裁剪重要性权重，")),t("mjx-container",N1,[(e(),l("svg",J1,T[234]||(T[234]=[a("",1)]))),T[235]||(T[235]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mo",{stretchy:"false"},"]")])],-1))]),T[238]||(T[238]=t("ul",null,[t("li",null,[Q("缺点："),t("code",null,"抑制了低概率token"),Q("，高概率token进一步强化，导致策略确定，"),t("code",null,"熵坍塌")])],-1))]),t("li",null,[T[241]||(T[241]=t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#clip-higher",target:"_blank",rel:"noreferrer"},"DAPO-Clip-Higher",-1)),T[242]||(T[242]=Q("：裁剪IS权重，")),T[243]||(T[243]=t("code",null,"调高上限，保持探索性",-1)),T[244]||(T[244]=Q("，")),t("mjx-container",K1,[(e(),l("svg",$1,T[239]||(T[239]=[a("",1)]))),T[240]||(T[240]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mo",{stretchy:"false"},"]")])],-1))])]),T[245]||(T[245]=t("li",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#_2506-cispo-minimax",target:"_blank",rel:"noreferrer"},"CISPO"),Q("："),t("code",null,"只裁剪IS权重的值"),Q("，"),t("code",null,"仍然保留token的梯度"),Q("。")],-1)),T[246]||(T[246]=t("li",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#critic-value-clip",target:"_blank",rel:"noreferrer"},"Value-Clip"),Q("：裁剪价值网络，防止更新过快。")],-1))])])])]),t("div",U1,[T[255]||(T[255]=t("div",{class:"custom-block-title"},"实验结果",-1)),T[256]||(T[256]=t("p",null,[t("strong",null,"Clip-Higher")],-1)),t("ul",null,[t("li",null,[t("mjx-container",W1,[(e(),l("svg",Y1,T[251]||(T[251]=[a("",1)]))),T[252]||(T[252]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"h"),t("mi",null,"i"),t("mi",null,"g"),t("mi",null,"h")])]),t("mo",null,"="),t("mn",null,"0.28")])],-1))]),T[253]||(T[253]=Q("，可以减轻熵坍塌"))]),T[254]||(T[254]=a("",3))])]),T[481]||(T[481]=a("",9)),t("div",t2,[T[273]||(T[273]=t("div",{class:"custom-block-title"},"归一化策略",-1)),T[274]||(T[274]=t("p",null,[t("strong",null,"3. 归一化策略")],-1)),t("ul",null,[T[271]||(T[271]=t("li",null,[t("p",null,[Q("含义："),t("code",null,"归一化奖励、优势"),Q("。")])],-1)),T[272]||(T[272]=t("li",null,[t("p",null,[Q("目的："),t("code",null,"稳定梯度大小"),Q("，"),t("code",null,"拉到同一水平线进行比较"),Q("，让不同任务可比较。")])],-1)),t("li",null,[T[270]||(T[270]=t("p",null,"方法：",-1)),t("ul",null,[t("li",null,[T[259]||(T[259]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#%E7%BB%84%E5%86%85%E7%9B%B8%E5%AF%B9%E4%BC%98%E5%8A%BF",target:"_blank",rel:"noreferrer"},"GRPO"),Q("/"),t("a",{href:"https://www.alphaxiv.org/abs/2402.14740",target:"_blank",rel:"noreferrer"},"RLOO"),Q("："),t("code",null,"组归一化")],-1)),t("mjx-container",T2,[(e(),l("svg",Q2,T[257]||(T[257]=[a("",1)]))),T[258]||(T[258]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mo",{fence:"false",stretchy:"false"},"{"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"j")])]),t("mo",{fence:"false",stretchy:"false"},"}"),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"K")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"std")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mo",{fence:"false",stretchy:"false"},"{"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"j")])]),t("mo",{fence:"false",stretchy:"false"},"}"),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"K")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])])])],-1))])]),t("li",null,[T[262]||(T[262]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/06-policy-gradient.html#reinforce-%E7%AE%97%E6%B3%95-1",target:"_blank",rel:"noreferrer"},"REINFORCE++"),Q("："),t("code",null,"Batch归一化"),Q(" ，使用全局批次的平均奖励作为基线")],-1)),t("mjx-container",a2,[(e(),l("svg",l2,T[260]||(T[260]=[a("",1)]))),T[261]||(T[261]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mo",{fence:"false",stretchy:"false"},"{"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"j")])]),t("mo",{fence:"false",stretchy:"false"},"}"),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"b"),t("mi",null,"s"),t("mo",null,"⋅"),t("mi",null,"K")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])]),t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"std")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mo",{fence:"false",stretchy:"false"},"{"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"j")])]),t("mo",{fence:"false",stretchy:"false"},"}"),t("mstyle",{mathcolor:"red"},[t("msubsup",null,[t("mi"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"b"),t("mi",null,"s"),t("mo",null,"⋅"),t("mi",null,"K")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])])])],-1))])]),t("li",null,[t("p",null,[T[265]||(T[265]=t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#_2503-dr-grpo",target:"_blank",rel:"noreferrer"},"Dr.GRPO",-1)),T[266]||(T[266]=Q("：")),T[267]||(T[267]=t("code",null,"不除以标准差",-1)),T[268]||(T[268]=Q("，避免难度偏差。 ")),t("mjx-container",e2,[(e(),l("svg",s2,T[263]||(T[263]=[a("",1)]))),T[264]||(T[264]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")])],-1))])]),T[269]||(T[269]=t("ul",null,[t("li",null,"论文没研究此方法，只研究了不归一化。")],-1))])])])])]),T[482]||(T[482]=a("",14)),t("div",m2,[T[286]||(T[286]=t("div",{class:"custom-block-title"},"Loss 聚合策略",-1)),T[287]||(T[287]=t("p",null,[t("strong",null,"5. Loss 聚合粒度")],-1)),t("ul",null,[T[285]||(T[285]=t("li",null,[t("p",null,"含义：决定了每个token对总目标的贡献权重。")],-1)),t("li",null,[T[284]||(T[284]=t("p",null,"方法",-1)),t("ul",null,[t("li",null,[T[277]||(T[277]=t("p",null,[t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#grpo",target:"_blank",rel:"noreferrer"},"GRPO"),Q("："),t("code",null,"Sequence-Level Loss"),Q("：序列内平均、再序列间平均。")],-1)),t("mjx-container",d2,[(e(),l("svg",o2,T[275]||(T[275]=[a("",1)]))),T[276]||(T[276]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"seq-level")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"序"),t("mi",{mathvariant:"normal"},"列"),t("mi",{mathvariant:"normal"},"间"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"序列内平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),t("li",null,[T[280]||(T[280]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#token-level-loss",target:"_blank",rel:"noreferrer"},"DAPO"),Q("："),t("code",null,"Token-Level Loss"),Q("，减少长度偏差，所有token贡献相同，Verl默认就是这个。")],-1)),t("mjx-container",r2,[(e(),l("svg",n2,T[278]||(T[278]=[a("",1)]))),T[279]||(T[279]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"tolen-level")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),t("li",null,[T[283]||(T[283]=t("p",null,[t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/11-grpo-series.html#_2507-gspo-qwen",target:"_blank",rel:"noreferrer"},"GSPO"),Q("："),t("code",null,"序列级重要性权重"),Q("、"),t("code",null,"序列级clip 更新"),Q("。")],-1)),t("mjx-container",i2,[(e(),l("svg",h2,T[281]||(T[281]=[a("",1)]))),T[282]||(T[282]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"序"),t("mi",{mathvariant:"normal"},"列"),t("mi",{mathvariant:"normal"},"间"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))])])])])])]),T[483]||(T[483]=a("",24)),t("div",g2,[T[297]||(T[297]=t("div",{class:"custom-block-title"},"GRPO Token-Level 重要性采样 训练崩溃",-1)),T[298]||(T[298]=t("p",null,[t("strong",null,"GRPO 存在训练稳定性问题")],-1)),T[299]||(T[299]=t("ul",null,[t("li",null,"Scale RL训练 需要稳定性。"),t("li",null,[t("code",null,"GRPO训大模型不稳定"),Q("：经常出现"),t("code",null,"严重不可逆转的训练崩溃"),Q("。")])],-1)),T[300]||(T[300]=t("p",null,[t("strong",null,"根本原因：Token-Level重要性采样权重")],-1)),t("ul",null,[t("li",null,[T[295]||(T[295]=t("p",null,[Q("GRPO在"),t("code",null,"每个token上计算重要性权重")],-1)),t("ul",null,[T[291]||(T[291]=t("li",null,[t("p",null,"但LLM是整个序列，逐字去比较不太合理。")],-1)),T[292]||(T[292]=t("li",null,[t("p",null,[t("code",null,"单个token概率变化"),Q("，"),t("code",null,"并不能反映"),Q(),t("code",null,"整个序列的概率变化"),Q("。")])],-1)),t("li",null,[T[290]||(T[290]=t("p",null,[Q("使得"),t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#%E9%87%8D%E8%A6%81%E6%80%A7%E9%87%87%E6%A0%B7%E5%9C%A8rl%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8",target:"_blank",rel:"noreferrer"},"重要性权重"),Q(),t("code",null,"并不能真正修正分布差异"),Q("。")],-1)),t("mjx-container",p2,[(e(),l("svg",H2,T[288]||(T[288]=[a("",1)]))),T[289]||(T[289]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])])])],-1))])])]),t("mjx-container",c2,[(e(),l("svg",u2,T[293]||(T[293]=[a("",1)]))),T[294]||(T[294]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])])])],-1))])]),T[296]||(T[296]=t("li",null,[t("p",null,[Q("而且，奖励信号是"),t("code",null,"序列级别"),Q("，但"),t("code",null,"重要性权重优化"),Q("却是"),t("code",null,"token级别"),Q("，"),t("code",null,"不匹配"),Q("。")])],-1))]),T[301]||(T[301]=a("",2))]),T[484]||(T[484]=t("h4",{id:"moe专家激活不稳定容易训崩",tabindex:"-1"},[Q("MoE专家激活不稳定容易训崩 "),t("a",{class:"header-anchor",href:"#moe专家激活不稳定容易训崩","aria-label":'Permalink to "MoE专家激活不稳定容易训崩"'},"​")],-1)),t("div",L2,[T[316]||(T[316]=a("",4)),t("ul",null,[t("li",null,[T[304]||(T[304]=Q("计算重要性权重时，")),T[305]||(T[305]=t("code",null,"缓存旧策略",-1)),t("mjx-container",k2,[(e(),l("svg",f2,T[302]||(T[302]=[a("",1)]))),T[303]||(T[303]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])],-1))]),T[306]||(T[306]=t("code",null,"激活的专家",-1)),T[307]||(T[307]=Q("。"))]),t("li",null,[T[310]||(T[310]=Q("计算新策略")),t("mjx-container",y2,[(e(),l("svg",x2,T[308]||(T[308]=[a("",1)]))),T[309]||(T[309]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])])],-1))]),T[311]||(T[311]=Q("时，")),T[312]||(T[312]=t("code",null,"强制重复旧策略激活的专家",-1)),T[313]||(T[313]=Q("。"))]),T[314]||(T[314]=t("li",null,[Q("确保"),t("code",null,"新旧策略"),Q("在每个token"),t("code",null,"使用相同的专家"),Q("，恢复IS的稳定性。")],-1)),T[315]||(T[315]=t("li",null,"不使用Routing Replay 很快就会崩溃。",-1))]),T[317]||(T[317]=t("p",null,[t("strong",null,"解决方法2：GSPO")],-1)),T[318]||(T[318]=t("ul",null,[t("li",null,[Q("从算法上去掉token级重要性权重，采用"),t("code",null,"序列级重要性权重"),Q("。")]),t("li",null,[Q("评价整个句子好不好，评价尺度更宏观，"),t("code",null,"对底层专家模型不敏感"),Q("。")]),t("li",null,"无需Routing Replay。")],-1))]),T[485]||(T[485]=a("",5)),t("div",w2,[T[337]||(T[337]=t("div",{class:"custom-block-title"},"序列级Token权重",-1)),T[338]||(T[338]=t("p",null,[t("strong",null,"Token级重要性权重")],-1)),t("mjx-container",V2,[(e(),l("svg",M2,T[319]||(T[319]=[a("",1)]))),T[320]||(T[320]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])])])],-1))]),T[339]||(T[339]=t("p",null,[t("strong",null,"序列级重要性权重")],-1)),T[340]||(T[340]=t("ul",null,[t("li",null,[t("code",null,"对序列做重要性权重"),Q("："),t("code",null,"更好地衡量整句话的概率变化"),Q("。")])],-1)),t("mjx-container",Z2,[(e(),l("svg",D2,T[321]||(T[321]=[a("",1)]))),T[322]||(T[322]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])])],-1))]),t("ul",null,[t("li",null,[T[325]||(T[325]=a("",2)),t("mjx-container",b2,[(e(),l("svg",A2,T[323]||(T[323]=[a("",1)]))),T[324]||(T[324]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mi",null,"exp")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])])]),T[341]||(T[341]=t("p",null,[t("strong",null,"GSPO 训练目标")],-1)),T[342]||(T[342]=t("ul",null,[t("li",null,[t("code",null,"序列级奖励"),Q("、"),t("code",null,"序列级优化"),Q("，"),t("code",null,"相一致"),Q("。")]),t("li",null,[t("code",null,"clip整个序列"),Q("。")])],-1)),t("mjx-container",j2,[(e(),l("svg",O2,T[326]||(T[326]=[a("",1)]))),T[327]||(T[327]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[343]||(T[343]=t("p",null,[t("strong",null,"GSPO 梯度")],-1)),T[344]||(T[344]=t("ul",null,[t("li",null,"每个token使用相同的Seq-IS权重。")],-1)),t("mjx-container",v2,[(e(),l("svg",R2,T[328]||(T[328]=[a("",1)]))),T[329]||(T[329]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])]),t("mtd",null,[t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])]),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"序列重要性权重")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"序列优势")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"序列梯度")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])])])])],-1))]),t("mjx-container",C2,[(e(),l("svg",_2,T[330]||(T[330]=[a("",1)]))),T[331]||(T[331]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[345]||(T[345]=t("p",null,[t("strong",null,"对比GRPO梯度")],-1)),t("ul",null,[t("li",null,[T[334]||(T[334]=Q("其中：")),t("mjx-container",B2,[(e(),l("svg",E2,T[332]||(T[332]=[a("",1)]))),T[333]||(T[333]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])])],-1))])])]),t("mjx-container",X2,[(e(),l("svg",P2,T[335]||(T[335]=[a("",1)]))),T[336]||(T[336]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GRPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"序"),t("mi",{mathvariant:"normal"},"列"),t("mi",{mathvariant:"normal"},"内"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"token重要性权重")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"token优势")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"token梯度")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[346]||(T[346]=a("",2))]),T[486]||(T[486]=a("",4)),t("div",S2,[T[354]||(T[354]=t("div",{class:"custom-block-title"},"提示",-1)),T[355]||(T[355]=t("p",null,[t("strong",null,"目标函数")],-1)),t("ul",null,[t("li",null,[T[349]||(T[349]=Q("其中 ")),t("mjx-container",F2,[(e(),l("svg",z2,T[347]||(T[347]=[a("",1)]))),T[348]||(T[348]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])])],-1))])])]),t("mjx-container",I2,[(e(),l("svg",G2,T[350]||(T[350]=[a("",1)]))),T[351]||(T[351]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO-token")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("mstyle",{mathcolor:"red"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[356]||(T[356]=t("ul",null,[t("li",null,"其中token重要性权重计算如下：实际仍然是序列权重？只是sg=stop gradient了。")],-1)),t("mjx-container",q2,[(e(),l("svg",N2,T[352]||(T[352]=[a("",1)]))),T[353]||(T[353]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mtext",null,"sg"),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},"]"),t("mo",null,"⋅"),t("mfrac",null,[t("mrow",null,[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")"),t("msup",null,[t("mo",{stretchy:"false"},"]"),t("mi",{"data-mjx-alternate":"1"},"′")])])])])],-1))])]),T[487]||(T[487]=t("h3",{id:"算法实验-1",tabindex:"-1"},[Q("算法实验 "),t("a",{class:"header-anchor",href:"#算法实验-1","aria-label":'Permalink to "算法实验"'},"​")],-1)),T[488]||(T[488]=t("h4",{id:"实验设置",tabindex:"-1"},[Q("实验设置 "),t("a",{class:"header-anchor",href:"#实验设置","aria-label":'Permalink to "实验设置"'},"​")],-1)),T[489]||(T[489]=t("p",null,[t("strong",null,"✍️实验设置")],-1)),t("div",J2,[T[365]||(T[365]=a("",8)),t("ul",null,[T[364]||(T[364]=t("li",null,"mini-bs=4，",-1)),t("li",null,[T[363]||(T[363]=Q("Clip比例： ")),t("ul",null,[t("li",null,[T[359]||(T[359]=Q("GSPO：")),t("mjx-container",K2,[(e(),l("svg",$2,T[357]||(T[357]=[a("",1)]))),T[358]||(T[358]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mn",null,"1"),t("mo",null,"−"),t("mn",null,"3"),t("mo",null,"⋅"),t("msup",null,[t("mn",null,"10"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"−"),t("mn",null,"4")])]),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("mn",null,"4"),t("mo",null,"⋅"),t("msup",null,[t("mn",null,"10"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"−"),t("mn",null,"4")])]),t("mo",{stretchy:"false"},"]")])],-1))])]),t("li",null,[T[362]||(T[362]=Q("GRPO：")),t("mjx-container",U2,[(e(),l("svg",W2,T[360]||(T[360]=[a("",1)]))),T[361]||(T[361]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mn",null,"1"),t("mo",null,"−"),t("mn",null,"0.2"),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("mn",null,"0.27"),t("mo",{stretchy:"false"},"]")])],-1))])])])])])]),T[490]||(T[490]=a("",15)),t("div",Y2,[T[372]||(T[372]=a("",4)),t("ul",null,[t("li",null,[T[368]||(T[368]=Q("设置")),t("mjx-container",t3,[(e(),l("svg",T3,T[366]||(T[366]=[a("",1)]))),T[367]||(T[367]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])])],-1))]),T[369]||(T[369]=Q("，但")),T[370]||(T[370]=t("code",null,"效果不好",-1)),T[371]||(T[371]=Q("。"))])])]),T[491]||(T[491]=t("h3",{id:"核心方法-1",tabindex:"-1"},[Q("核心方法 "),t("a",{class:"header-anchor",href:"#核心方法-1","aria-label":'Permalink to "核心方法"'},"​")],-1)),T[492]||(T[492]=t("p",null,[t("strong",null,"📕核心方法")],-1)),T[493]||(T[493]=t("h4",{id:"cispo-算法",tabindex:"-1"},[Q("CISPO 算法 "),t("a",{class:"header-anchor",href:"#cispo-算法","aria-label":'Permalink to "CISPO 算法"'},"​")],-1)),t("div",Q3,[T[377]||(T[377]=a("",4)),t("mjx-container",a3,[(e(),l("svg",l3,T[373]||(T[373]=[a("",1)]))),T[374]||(T[374]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"CISPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"q"),t("mo",null,"∼"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mi",null,"i"),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mi",null,"o"),t("mi",null,"k"),t("mi",null,"e"),t("mi",null,"n"),t("mi",{mathvariant:"normal"},"级"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"r"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),t("mjx-container",e3,[(e(),l("svg",s3,T[375]||(T[375]=[a("",1)]))),T[376]||(T[376]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"r"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msubsup",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"IS")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msubsup",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"IS")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))])]),T[494]||(T[494]=a("",15)),t("div",m3,[T[393]||(T[393]=t("div",{class:"custom-block-title"},"PPO/GRPO 熵坍塌",-1)),T[394]||(T[394]=t("p",null,[t("strong",null,"熵坍塌表现")],-1)),T[395]||(T[395]=t("ul",null,[t("li",null,[t("code",null,"模型熵迅速下降")]),t("li",null,[t("code",null,"失去新意，停止探索"),Q("，"),t("code",null,"过早进入利用阶段"),Q("，需要探索利用平衡。")])],-1)),T[396]||(T[396]=t("p",null,[t("strong",null,"普通Clip机制不公平")],-1)),t("ul",null,[t("li",null,[T[382]||(T[382]=Q("普通CLIP把")),T[383]||(T[383]=t("code",null,"策略更新幅度",-1)),T[384]||(T[384]=Q(" 限制在")),T[385]||(T[385]=t("code",null,"对称区间",-1)),T[386]||(T[386]=Q()),t("mjx-container",d3,[(e(),l("svg",o3,T[378]||(T[378]=[a("",1)]))),T[379]||(T[379]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mo",{stretchy:"false"},"]")])],-1))]),T[387]||(T[387]=Q("、")),t("mjx-container",r3,[(e(),l("svg",n3,T[380]||(T[380]=[a("",1)]))),T[381]||(T[381]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mn",null,"0.2")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mn",null,"0.2")]),t("mo",{stretchy:"false"},"]")])],-1))])]),T[392]||(T[392]=t("li",null,[Q("对"),t("code",null,"不同概率的token"),Q("来说，"),t("code",null,"不公平"),Q("。压制了"),t("code",null,"低概率"),Q("、"),t("code",null,"但具有探索性"),Q("的"),t("code",null,"好步骤"),Q("。")],-1)),t("li",null,[T[390]||(T[390]=Q("假设2个以下token都是好词，")),t("mjx-container",i3,[(e(),l("svg",h3,T[388]||(T[388]=[a("",1)]))),T[389]||(T[389]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mo",null,">"),t("mn",null,"0")])],-1))]),T[391]||(T[391]=a("",2))])]),T[397]||(T[397]=a("",2))]),T[495]||(T[495]=a("",8)),t("div",g3,[T[418]||(T[418]=t("div",{class:"custom-block-title"},"Clip-Higher",-1)),T[419]||(T[419]=t("p",null,[t("strong",null,"问题")],-1)),T[420]||(T[420]=t("ul",null,[t("li",null,"解决熵坍塌问题。")],-1)),T[421]||(T[421]=t("p",null,[t("strong",null,"Clip-Higher：奖励时要重奖励、惩罚时要谨慎惩罚")],-1)),t("ul",null,[t("li",null,[T[402]||(T[402]=Q("上下界由")),t("mjx-container",p3,[(e(),l("svg",H3,T[398]||(T[398]=[a("",1)]))),T[399]||(T[399]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mo",{stretchy:"false"},"]")])],-1))]),T[403]||(T[403]=Q(" 变成 ")),t("mjx-container",c3,[(e(),l("svg",u3,T[400]||(T[400]=[a("",1)]))),T[401]||(T[401]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mo",{stretchy:"false"},"]")])],-1))])]),t("li",null,[t("strong",null,[T[406]||(T[406]=Q("保持下界")),t("mjx-container",L3,[(e(),l("svg",k3,T[404]||(T[404]=[a("",1)]))),T[405]||(T[405]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])]),t("mo",null,"="),t("mn",null,"0.2")])],-1))]),T[407]||(T[407]=Q("不变"))]),T[408]||(T[408]=t("ul",null,[t("li",null,"如果太大，模型惩罚错误时，会过于激进，抑制了探索。")],-1))]),t("li",null,[t("strong",null,[T[411]||(T[411]=Q("提高上界")),t("mjx-container",f3,[(e(),l("svg",y3,T[409]||(T[409]=[a("",1)]))),T[410]||(T[410]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])]),t("mo",null,"="),t("mn",null,"0.28")])],-1))])]),T[412]||(T[412]=t("ul",null,[t("li",null,"设置更高探索天花板，当探索到好路径时，策略可以大幅度更新。")],-1))]),T[413]||(T[413]=t("li",null,"Loss",-1))]),t("mjx-container",x3,[(e(),l("svg",w3,T[414]||(T[414]=[a("",1)]))),T[415]||(T[415]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))]),T[422]||(T[422]=t("ul",null,[t("li",null,"目标函数")],-1)),t("mjx-container",V3,[(e(),l("svg",M3,T[416]||(T[416]=[a("",1)]))),T[417]||(T[417]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"J")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mo",{stretchy:"false"},"("),t("mi",null,"q"),t("mo",null,","),t("mi",null,"a"),t("mo",{stretchy:"false"},")"),t("mo",null,"∼"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")])]),t("mo",null,","),t("mo",{fence:"false",stretchy:"false"},"{"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"o"),t("mi",null,"i")])]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",null,"∣"),t("mi",null,"q"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[423]||(T[423]=a("",2))]),T[496]||(T[496]=a("",4)),t("div",Z3,[T[428]||(T[428]=a("",3)),t("mjx-container",D3,[(e(),l("svg",b3,T[424]||(T[424]=[a("",1)]))),T[425]||(T[425]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"ppo")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"样"),t("mi",{mathvariant:"normal"},"本"),t("mi",{mathvariant:"normal"},"间"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"序列内平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))]),T[429]||(T[429]=t("p",null,[t("strong",null,"DAPO Token-Level Loss")],-1)),T[430]||(T[430]=t("ul",null,[t("li",null,[t("code",null,"直接对所有Token做平均"),Q("，"),t("code",null,"每个token权重相同"),Q("，不论来自长或短序列。")])],-1)),t("mjx-container",A3,[(e(),l("svg",j3,T[426]||(T[426]=[a("",1)]))),T[427]||(T[427]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),T[497]||(T[497]=a("",2)),t("div",O3,[T[445]||(T[445]=a("",4)),t("ul",null,[t("li",null,[T[440]||(T[440]=Q("设置")),t("strong",null,[T[435]||(T[435]=Q("cache长度")),t("mjx-container",v3,[(e(),l("svg",R3,T[431]||(T[431]=[a("",1)]))),T[432]||(T[432]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])],-1))]),T[436]||(T[436]=t("strong",null,"和",-1)),T[437]||(T[437]=Q("硬顶线")),t("mjx-container",C3,[(e(),l("svg",_3,T[433]||(T[433]=[a("",1)]))),T[434]||(T[434]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])])])],-1))])]),T[441]||(T[441]=Q("，安全线等于")),t("mjx-container",B3,[(e(),l("svg",E3,T[438]||(T[438]=[a("",1)]))),T[439]||(T[439]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"safe")])]),t("mo",null,"="),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])],-1))]),T[442]||(T[442]=t("ul",null,[t("li",null,"低于安全线，不惩罚；"),t("li",null,"超过硬顶线，直接给-1."),t("li",null,"介于安全线和硬顶线之间，根据超出长度来计算惩罚，线性下降。")],-1))])]),t("mjx-container",X3,[(e(),l("svg",P3,T[443]||(T[443]=[a("",1)]))),T[444]||(T[444]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"R"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"length")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"y"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"{"),t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[t("mtr",null,[t("mtd",null,[t("mn",null,"0")]),t("mtd",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",null,"≤"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])]),t("mtr",null,[t("mtd",null,[t("mfrac",null,[t("mrow",null,[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])]),t("mo",null,"−"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")]),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])]),t("mtd",null,[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])]),t("mo",null,"<"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",null,"≤"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])])])]),t("mtr",null,[t("mtd",null,[t("mo",null,"−"),t("mn",null,"1")]),t("mtd",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",null,"≥"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])])])])]),t("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])],-1))])]),T[498]||(T[498]=t("h4",{id:"数据转换",tabindex:"-1"},[Q("数据转换 "),t("a",{class:"header-anchor",href:"#数据转换","aria-label":'Permalink to "数据转换"'},"​")],-1)),t("div",S3,[T[456]||(T[456]=t("div",{class:"custom-block-title"},"数据转换",-1)),t("ul",null,[T[455]||(T[455]=t("li",null,[t("code",null,"收集数据并做格式转换"),Q("，为了方便reward，"),t("code",null,"把所有答案都转换成数字"),Q("，"),t("code",null,"最终17k数据集"),Q("。")],-1)),t("li",null,[T[454]||(T[454]=Q("格式转换 ")),t("ul",null,[t("li",null,[T[448]||(T[448]=Q("转换前：输出复杂， 不好计算reward，如")),t("mjx-container",F3,[(e(),l("svg",z3,T[446]||(T[446]=[a("",1)]))),T[447]||(T[447]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mfrac",null,[t("mrow",null,[t("mi",null,"a"),t("mo",null,"+"),t("msqrt",null,[t("mi",null,"b")])]),t("mi",null,"c")])])],-1))])]),t("li",null,[T[451]||(T[451]=Q("转换后：输出简单，方便计算reward，如")),t("mjx-container",I3,[(e(),l("svg",G3,T[449]||(T[449]=[a("",1)]))),T[450]||(T[450]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"a"),t("mo",null,"+"),t("mi",null,"b"),t("mo",null,"+"),t("mi",null,"c")])],-1))]),T[452]||(T[452]=Q("，如llm输出11+2+6=19即可。"))]),T[453]||(T[453]=t("li",null,[t("code",null,"让llm去改写question")],-1))])])])]),T[499]||(T[499]=a("",22)),t("div",q3,[T[464]||(T[464]=t("div",{class:"custom-block-title"},"GRPO里的偏差",-1)),T[465]||(T[465]=t("p",null,[t("strong",null,"计算优势时引入Bias")],-1)),t("ul",null,[t("li",null,[T[459]||(T[459]=t("p",null,[t("strong",null,"回复长度Bias")],-1)),T[460]||(T[460]=t("ul",null,[t("li",null,"序列内平均后，再序列间平均。"),t("li",null,"序列内平均导致：短回复奖励/惩罚粒度大，长回复粒度小，容易纵容长错回复。"),t("li",null,[Q("同 "),t("a",{href:"http://plmsmile.github.io/posts/llm/rl/theory/10-ppo-series.html#%E8%A7%A3%E5%86%B3%E9%95%BF%E5%BA%A6%E4%B8%8D%E4%B8%80%E9%97%AE%E9%A2%98-length-adaptive-gae-token-level-policy-loss",target:"_blank",rel:"noreferrer"},"解决长度不一问题：VAPO Token-Level Policy Loss")])],-1)),t("mjx-container",N3,[(e(),l("svg",J3,T[457]||(T[457]=[a("",1)]))),T[458]||(T[458]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GRPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"样"),t("mi",{mathvariant:"normal"},"本"),t("mi",{mathvariant:"normal"},"间"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"序列内平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),T[461]||(T[461]=a("",1))]),t("mjx-container",K3,[(e(),l("svg",$3,T[462]||(T[462]=[a("",1)]))),T[463]||(T[463]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"r"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")]),t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"std")]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")])])])],-1))])]),T[500]||(T[500]=t("h3",{id:"核心方法-3",tabindex:"-1"},[Q("核心方法 "),t("a",{class:"header-anchor",href:"#核心方法-3","aria-label":'Permalink to "核心方法"'},"​")],-1)),T[501]||(T[501]=t("h4",{id:"去掉2个偏差项-序列内平均-标准差",tabindex:"-1"},[Q("去掉2个偏差项(序列内平均,标准差) "),t("a",{class:"header-anchor",href:"#去掉2个偏差项-序列内平均-标准差","aria-label":'Permalink to "去掉2个偏差项(序列内平均,标准差)"'},"​")],-1)),T[502]||(T[502]=t("p",null,[t("strong",null,"📕核心方法")],-1)),t("div",U3,[T[473]||(T[473]=a("",7)),t("mjx-container",W3,[(e(),l("svg",Y3,T[466]||(T[466]=[a("",1)]))),T[467]||(T[467]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"Dr.GRPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"仅"),t("mi",{mathvariant:"normal"},"样"),t("mi",{mathvariant:"normal"},"本"),t("mi",{mathvariant:"normal"},"间"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))]),t("ul",null,[t("li",null,[T[470]||(T[470]=Q("计算优势时，")),T[471]||(T[471]=t("code",null,"去掉除以标准差",-1)),T[472]||(T[472]=Q("，消除问题难度偏差。困难问题一样有高优势权重，可以更新。")),t("mjx-container",t4,[(e(),l("svg",T4,T[468]||(T[468]=[a("",1)]))),T[469]||(T[469]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"i")])]),t("mo",null,"−"),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"mean")]),t("mo",{stretchy:"false"},"("),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"bold"},"r")])]),t("mo",{stretchy:"false"},")")])],-1))])])])]),T[503]||(T[503]=a("",11))])}const r4=s(m,[["render",Q4]]);export{o4 as __pageData,r4 as default};

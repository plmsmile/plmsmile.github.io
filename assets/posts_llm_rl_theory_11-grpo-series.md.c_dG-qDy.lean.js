import{_ as m,c as l,o as e,ah as a,j as t,a as Q}from"./chunks/framework.CvbyeFFO.js";const F1=JSON.parse('{"title":"GRPO 改进系列","description":"","frontmatter":{"title":"GRPO 改进系列","date":"2025-11-03T14:11:13.000Z","create":"2025-11-03T14:11:13.000Z","categories":["grpo"],"tags":["GRPO","DAPO","熵坍塌","Clip机制不公平","探索","奖励噪声","训练不稳定","Clip-Higher","动态采样","Token-Level Loss","Overlong 奖励设计","GSPO","Token-Level 重要性权重","Seq-Level 重要性权重","MoE Routing RePlay","CISPO","重要性权重 Clip"]},"headers":[],"relativePath":"posts/llm/rl/theory/11-grpo-series.md","filePath":"posts/llm/rl/theory/11-grpo-series.md","lastUpdated":null}'),s={name:"posts/llm/rl/theory/11-grpo-series.md"},d={class:"custom-block warning"},o={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.198ex"},xmlns:"http://www.w3.org/2000/svg",width:"38.674ex",height:"5.501ex",role:"img",focusable:"false",viewBox:"0 -1460 17094 2431.6","aria-hidden":"true"},n={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.383ex",height:"5.643ex",role:"img",focusable:"false",viewBox:"0 -1497.2 11661.1 2494.4","aria-hidden":"true"},i={class:"custom-block warning"},g={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.592ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.834ex",height:"1.567ex",role:"img",focusable:"false",viewBox:"0 -431 1694.8 692.6","aria-hidden":"true"},p={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.228ex",height:"1.33ex",role:"img",focusable:"false",viewBox:"0 -431 984.6 588.1","aria-hidden":"true"},u={class:"custom-block tip"},L={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.383ex",height:"5.643ex",role:"img",focusable:"false",viewBox:"0 -1497.2 11661.1 2494.4","aria-hidden":"true"},x={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},w={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.198ex"},xmlns:"http://www.w3.org/2000/svg",width:"19.258ex",height:"5.501ex",role:"img",focusable:"false",viewBox:"0 -1460 8511.8 2431.6","aria-hidden":"true"},V={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"63.485ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 28060.4 3113.3","aria-hidden":"true"},M={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"79.462ex",height:"6.775ex",role:"img",focusable:"false",viewBox:"0 -1748.5 35122.2 2994.4","aria-hidden":"true"},k={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-11.178ex"},xmlns:"http://www.w3.org/2000/svg",width:"92.587ex",height:"23.488ex",role:"img",focusable:"false",viewBox:"0 -5440.8 40923.6 10381.7","aria-hidden":"true"},b={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"92.048ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 40685.4 3113.3","aria-hidden":"true"},O={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.912ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 3939.3 1371.2","aria-hidden":"true"},v={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},A={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"97.096ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 42916.5 4672.1","aria-hidden":"true"},C={class:"custom-block tip"},_={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.65ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.912ex",height:"3.102ex",role:"img",focusable:"false",viewBox:"0 -1084 3939.3 1371.2","aria-hidden":"true"},E={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},P={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"96.073ex",height:"7.044ex",role:"img",focusable:"false",viewBox:"0 -1867.4 42464.4 3113.3","aria-hidden":"true"},S={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.256ex"},xmlns:"http://www.w3.org/2000/svg",width:"39.869ex",height:"5.643ex",role:"img",focusable:"false",viewBox:"0 -1497.2 17622 2494.4","aria-hidden":"true"},z={class:"custom-block tip"},I={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.579ex",height:"2.538ex",role:"img",focusable:"false",viewBox:"0 -871.8 10863.8 1121.8","aria-hidden":"true"},N={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.972ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7501.6 1000","aria-hidden":"true"},F={class:"custom-block warning"},J={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.13ex",height:"1.644ex",role:"img",focusable:"false",viewBox:"0 -431 1825.4 726.7","aria-hidden":"true"},K={class:"custom-block tip"},U={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},W={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"79.255ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 35030.6 4672.1","aria-hidden":"true"},Y={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},t1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.948ex"},xmlns:"http://www.w3.org/2000/svg",width:"38.517ex",height:"3.01ex",role:"img",focusable:"false",viewBox:"0 -911.5 17024.5 1330.5","aria-hidden":"true"},T1={class:"custom-block warning"},Q1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.895ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5257.6 1000","aria-hidden":"true"},l1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.841ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7001.6 1000","aria-hidden":"true"},m1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.09ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.845ex",height:"2.543ex",role:"img",focusable:"false",viewBox:"0 -1084 2583.6 1124","aria-hidden":"true"},d1={class:"custom-block tip"},o1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.895ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 5257.6 1000","aria-hidden":"true"},n1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"17.694ex",height:"2.366ex",role:"img",focusable:"false",viewBox:"0 -750 7820.6 1045.7","aria-hidden":"true"},i1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.415ex",height:"1.864ex",role:"img",focusable:"false",viewBox:"0 -666 4161.2 823.8","aria-hidden":"true"},H1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.669ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.17ex",height:"2.176ex",role:"img",focusable:"false",viewBox:"0 -666 4937 961.7","aria-hidden":"true"},c1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},u1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"84.952ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 37548.7 4705.1","aria-hidden":"true"},L1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},f1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"105.731ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 46733 4705.1","aria-hidden":"true"},x1={class:"custom-block tip"},w1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},V1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.345ex"},xmlns:"http://www.w3.org/2000/svg",width:"98.049ex",height:"10.57ex",role:"img",focusable:"false",viewBox:"0 -1867.4 43337.7 4672.1","aria-hidden":"true"},y1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-6.42ex"},xmlns:"http://www.w3.org/2000/svg",width:"102.918ex",height:"10.645ex",role:"img",focusable:"false",viewBox:"0 -1867.4 45489.6 4705.1","aria-hidden":"true"},Z1={class:"custom-block tip"},k1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},D1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.549ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 2452.6 840.8","aria-hidden":"true"},b1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.706ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 2079.9 840.8","aria-hidden":"true"},O1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.396ex",height:"1.902ex",role:"img",focusable:"false",viewBox:"0 -683 9015 840.8","aria-hidden":"true"},v1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},A1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.85ex"},xmlns:"http://www.w3.org/2000/svg",width:"54.957ex",height:"8.83ex",role:"img",focusable:"false",viewBox:"0 -2201.5 24290.8 3903","aria-hidden":"true"},C1={class:"custom-block tip"},_1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.798ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.137ex",height:"3.263ex",role:"img",focusable:"false",viewBox:"0 -1089.5 2270.7 1442.3","aria-hidden":"true"},E1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},P1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.678ex",height:"1.756ex",role:"img",focusable:"false",viewBox:"0 -694 3835.9 776","aria-hidden":"true"};function S1(B1,T,z1,I1,G1,N1){return e(),l("div",null,[T[171]||(T[171]=a("",5)),t("div",d,[T[9]||(T[9]=t("div",{class:"custom-block-title"},"GRPO Token-Level 重要性采样 训练崩溃",-1)),T[10]||(T[10]=t("p",null,[t("strong",null,"GRPO 存在训练稳定性问题")],-1)),T[11]||(T[11]=t("ul",null,[t("li",null,"Scale RL训练 需要稳定性。"),t("li",null,[Q("GRPO训大模型不稳定：经常出现"),t("code",null,"严重不可逆转的训练崩溃"),Q("。")])],-1)),T[12]||(T[12]=t("p",null,[t("strong",null,"根本原因：Token-Level重要性采样权重")],-1)),t("ul",null,[t("li",null,[T[7]||(T[7]=t("p",null,[Q("GRPO在"),t("code",null,"每个token上计算重要性权重")],-1)),t("ul",null,[T[3]||(T[3]=t("li",null,[t("p",null,"但LLM是整个序列，逐字去比较不太合理。")],-1)),T[4]||(T[4]=t("li",null,[t("p",null,[t("code",null,"单个token概率变化"),Q("，"),t("code",null,"并不能反映"),Q(),t("code",null,"整个序列的概率变化"),Q("。")])],-1)),t("li",null,[T[2]||(T[2]=t("p",null,[Q("使得"),t("a",{href:"https://plmsmile.github.io/posts/llm/rl/theory/09-policy-trpo-ppo.html#%E9%87%8D%E8%A6%81%E6%80%A7%E9%87%87%E6%A0%B7%E5%9C%A8rl%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8",target:"_blank",rel:"noreferrer"},"重要性权重"),Q(),t("code",null,"并不能真正修正分布差异"),Q("。")],-1)),t("mjx-container",o,[(e(),l("svg",r,T[0]||(T[0]=[a("",1)]))),T[1]||(T[1]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"a"),t("mi",null,"t")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"s"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])])])],-1))])])]),t("mjx-container",n,[(e(),l("svg",h,T[5]||(T[5]=[a("",1)]))),T[6]||(T[6]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])])])],-1))])]),T[8]||(T[8]=t("li",null,[t("p",null,[Q("而且，奖励信号是"),t("code",null,"序列级别"),Q("，但重要性权重优化，却是"),t("code",null,"token级别"),Q("，"),t("code",null,"不匹配"),Q("。")])],-1))]),T[13]||(T[13]=a("",2))]),T[172]||(T[172]=t("h4",{id:"moe专家激活不稳定容易训崩",tabindex:"-1"},[Q("MoE专家激活不稳定容易训崩 "),t("a",{class:"header-anchor",href:"#moe专家激活不稳定容易训崩","aria-label":'Permalink to "MoE专家激活不稳定容易训崩"'},"​")],-1)),t("div",i,[T[24]||(T[24]=a("",4)),t("ul",null,[t("li",null,[T[16]||(T[16]=Q("计算重要性权重时，缓存旧策略")),t("mjx-container",g,[(e(),l("svg",H,T[14]||(T[14]=[a("",1)]))),T[15]||(T[15]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])],-1))]),T[17]||(T[17]=Q("激活的专家。"))]),t("li",null,[T[20]||(T[20]=Q("计算新策略")),t("mjx-container",p,[(e(),l("svg",c,T[18]||(T[18]=[a("",1)]))),T[19]||(T[19]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])])],-1))]),T[21]||(T[21]=Q("时，强制重复旧策略激活的专家。"))]),T[22]||(T[22]=t("li",null,"确保新旧策略在每个token使用相同的专家，恢复IS的稳定性。",-1)),T[23]||(T[23]=t("li",null,"不使用Routing Replay 很快就会崩溃。",-1))]),T[25]||(T[25]=t("p",null,[t("strong",null,"解决方法2：GSPO")],-1)),T[26]||(T[26]=t("ul",null,[t("li",null,"从算法上去掉token级重要性权重，采用序列级重要性权重。"),t("li",null,"评价整个句子好不好，评价尺度更宏观，对底层专家模型不敏感。"),t("li",null,"无需Routing Replay。")],-1))]),T[173]||(T[173]=a("",5)),t("div",u,[T[49]||(T[49]=t("div",{class:"custom-block-title"},"序列级Token权重",-1)),T[50]||(T[50]=t("p",null,[t("strong",null,"Token级重要性权重")],-1)),t("mjx-container",L,[(e(),l("svg",f,T[27]||(T[27]=[a("",1)]))),T[28]||(T[28]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])])])],-1))]),T[51]||(T[51]=t("p",null,[t("strong",null,"序列级重要性权重")],-1)),T[52]||(T[52]=t("ul",null,[t("li",null,[t("code",null,"对序列做重要性权重"),Q("："),t("code",null,"更好地衡量整句话的概率变化"),Q("。")])],-1)),t("mjx-container",x,[(e(),l("svg",w,T[29]||(T[29]=[a("",1)]))),T[30]||(T[30]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])])],-1))]),t("ul",null,[t("li",null,[T[33]||(T[33]=t("code",null,"长度归一化",-1)),T[34]||(T[34]=Q("：降低方差，")),T[35]||(T[35]=t("strong",null,"避免太长导致连乘概率太小",-1)),T[36]||(T[36]=Q("，类似：")),T[37]||(T[37]=t("a",{href:"https://plmsmile.github.io/posts/llm/basic/01-lm-define-information-theory.html#%E5%9B%B0%E6%83%91%E5%BA%A6",target:"_blank",rel:"noreferrer"},"困惑度长度归一化",-1)),t("mjx-container",V,[(e(),l("svg",y,T[31]||(T[31]=[a("",1)]))),T[32]||(T[32]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])])]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("mi",null,"exp")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])])]),T[53]||(T[53]=t("p",null,[t("strong",null,"GSPO 训练目标")],-1)),T[54]||(T[54]=t("ul",null,[t("li",null,"序列级奖励、序列级优化，相一致。"),t("li",null,"clip整个序列。")],-1)),t("mjx-container",M,[(e(),l("svg",Z,T[38]||(T[38]=[a("",1)]))),T[39]||(T[39]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[55]||(T[55]=t("p",null,[t("strong",null,"GSPO 梯度")],-1)),t("mjx-container",k,[(e(),l("svg",D,T[40]||(T[40]=[a("",1)]))),T[41]||(T[41]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mtable",{columnalign:"left",columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")])]),t("mtd",null,[t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])])]),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])]),t("mtr",null,[t("mtd"),t("mtd",null,[t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"序列重要性权重")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"序列优势")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mtext",null,"序列梯度")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])])])])],-1))]),t("mjx-container",b,[(e(),l("svg",j,T[42]||(T[42]=[a("",1)]))),T[43]||(T[43]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])]),t("msup",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"i")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[56]||(T[56]=t("p",null,[t("strong",null,"对比GRPO梯度")],-1)),t("ul",null,[t("li",null,[T[46]||(T[46]=Q("其中：")),t("mjx-container",O,[(e(),l("svg",R,T[44]||(T[44]=[a("",1)]))),T[45]||(T[45]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])])],-1))])])]),t("mjx-container",v,[(e(),l("svg",A,T[47]||(T[47]=[a("",1)]))),T[48]||(T[48]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GRPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mi",{mathvariant:"normal"},"序"),t("mi",{mathvariant:"normal"},"列"),t("mi",{mathvariant:"normal"},"内"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"token重要性权重")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"token优势")])])]),t("mo",null,"⋅"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",{mathvariant:"normal"},"∇"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"token梯度")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[57]||(T[57]=t("p",null,[t("strong",null,"GSPO vs GRPO")],-1)),T[58]||(T[58]=t("ul",null,[t("li",null,[Q("GRPO：每个token有自己的重要性权重。 "),t("ul",null,[t("li",null,"各token IS权重不同，累积起来，波动性很大，带来很大噪声。")])]),t("li",null,[Q("GSPO：每个token都使用相同的序列级重要性权重。 "),t("ul",null,[t("li",null,"各token IS权重相同，增加了稳定性和公平。")])])],-1))]),T[174]||(T[174]=t("h4",{id:"gspo-token-变体",tabindex:"-1"},[Q("GSPO-Token 变体 "),t("a",{class:"header-anchor",href:"#gspo-token-变体","aria-label":'Permalink to "GSPO-Token 变体"'},"​")],-1)),t("div",C,[T[66]||(T[66]=t("div",{class:"custom-block-title"},"提示",-1)),T[67]||(T[67]=t("p",null,[t("strong",null,"目标函数")],-1)),t("ul",null,[t("li",null,[T[61]||(T[61]=Q("其中 ")),t("mjx-container",_,[(e(),l("svg",X,T[59]||(T[59]=[a("",1)]))),T[60]||(T[60]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"="),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i")])])])],-1))])])]),t("mjx-container",E,[(e(),l("svg",P,T[62]||(T[62]=[a("",1)]))),T[63]||(T[63]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"GSPO-token")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"x"),t("mo",null,"∈"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")])]),t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"y"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("mstyle",{mathcolor:"red"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[68]||(T[68]=t("ul",null,[t("li",null,"其中token重要性权重计算如下：实际仍然是序列权重？只是sg=stop gradient了。")],-1)),t("mjx-container",S,[(e(),l("svg",B,T[64]||(T[64]=[a("",1)]))),T[65]||(T[65]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mtext",null,"sg"),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"s"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},"]"),t("mo",null,"⋅"),t("mfrac",null,[t("mrow",null,[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",null,[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"x"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")"),t("msup",null,[t("mo",{stretchy:"false"},"]"),t("mi",{"data-mjx-alternate":"1"},"′")])])])])],-1))])]),T[175]||(T[175]=t("h3",{id:"算法实验",tabindex:"-1"},[Q("算法实验 "),t("a",{class:"header-anchor",href:"#算法实验","aria-label":'Permalink to "算法实验"'},"​")],-1)),T[176]||(T[176]=t("h4",{id:"实验设置",tabindex:"-1"},[Q("实验设置 "),t("a",{class:"header-anchor",href:"#实验设置","aria-label":'Permalink to "实验设置"'},"​")],-1)),T[177]||(T[177]=t("p",null,[t("strong",null,"✍️实验设置")],-1)),t("div",z,[T[77]||(T[77]=a("",8)),t("ul",null,[T[76]||(T[76]=t("li",null,"mini-bs=4，",-1)),t("li",null,[T[75]||(T[75]=Q("Clip比例： ")),t("ul",null,[t("li",null,[T[71]||(T[71]=Q("GSPO：")),t("mjx-container",I,[(e(),l("svg",G,T[69]||(T[69]=[a("",1)]))),T[70]||(T[70]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mn",null,"1"),t("mo",null,"−"),t("mn",null,"3"),t("mo",null,"⋅"),t("msup",null,[t("mn",null,"10"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"−"),t("mn",null,"4")])]),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("mn",null,"4"),t("mo",null,"⋅"),t("msup",null,[t("mn",null,"10"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"−"),t("mn",null,"4")])]),t("mo",{stretchy:"false"},"]")])],-1))])]),t("li",null,[T[74]||(T[74]=Q("GRPO：")),t("mjx-container",N,[(e(),l("svg",q,T[72]||(T[72]=[a("",1)]))),T[73]||(T[73]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mn",null,"1"),t("mo",null,"−"),t("mn",null,"0.2"),t("mo",null,","),t("mn",null,"1"),t("mo",null,"+"),t("mn",null,"0.27"),t("mo",{stretchy:"false"},"]")])],-1))])])])])])]),T[178]||(T[178]=a("",15)),t("div",F,[T[84]||(T[84]=a("",4)),t("ul",null,[t("li",null,[T[80]||(T[80]=Q("设置")),t("mjx-container",J,[(e(),l("svg",$,T[78]||(T[78]=[a("",1)]))),T[79]||(T[79]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])])],-1))]),T[81]||(T[81]=Q("，但")),T[82]||(T[82]=t("code",null,"效果不好",-1)),T[83]||(T[83]=Q("。"))])])]),T[179]||(T[179]=t("h3",{id:"核心方法-1",tabindex:"-1"},[Q("核心方法 "),t("a",{class:"header-anchor",href:"#核心方法-1","aria-label":'Permalink to "核心方法"'},"​")],-1)),T[180]||(T[180]=t("p",null,[t("strong",null,"📕核心方法")],-1)),T[181]||(T[181]=t("h4",{id:"cispo-算法",tabindex:"-1"},[Q("CISPO 算法 "),t("a",{class:"header-anchor",href:"#cispo-算法","aria-label":'Permalink to "CISPO 算法"'},"​")],-1)),t("div",K,[T[89]||(T[89]=a("",4)),t("mjx-container",U,[(e(),l("svg",W,T[85]||(T[85]=[a("",1)]))),T[86]||(T[86]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"J"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"CISPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"q"),t("mo",null,"∼"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mo",{fence:"false",stretchy:"false"},"{"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])])])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mi",null,"i"),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mi",null,"o"),t("mi",null,"k"),t("mi",null,"e"),t("mi",null,"n"),t("mi",{mathvariant:"normal"},"级"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"sg"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"r"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),t("mjx-container",Y,[(e(),l("svg",t1,T[87]||(T[87]=[a("",1)]))),T[88]||(T[88]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"r"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msubsup",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"IS")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msubsup",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"IS")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")])])],-1))])]),T[182]||(T[182]=a("",15)),t("div",T1,[T[105]||(T[105]=t("div",{class:"custom-block-title"},"PPO/GRPO 熵坍塌",-1)),T[106]||(T[106]=t("p",null,[t("strong",null,"熵坍塌表现")],-1)),T[107]||(T[107]=t("ul",null,[t("li",null,[t("code",null,"模型熵迅速下降")]),t("li",null,[t("code",null,"失去新意，停止探索"),Q("，"),t("code",null,"过早进入利用阶段"),Q("，需要探索利用平衡。")])],-1)),T[108]||(T[108]=t("p",null,[t("strong",null,"普通Clip机制不公平")],-1)),t("ul",null,[t("li",null,[T[94]||(T[94]=Q("普通CLIP把")),T[95]||(T[95]=t("code",null,"策略更新幅度",-1)),T[96]||(T[96]=Q(" 限制在")),T[97]||(T[97]=t("code",null,"对称区间",-1)),T[98]||(T[98]=Q()),t("mjx-container",Q1,[(e(),l("svg",a1,T[90]||(T[90]=[a("",1)]))),T[91]||(T[91]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mo",{stretchy:"false"},"]")])],-1))]),T[99]||(T[99]=Q("、")),t("mjx-container",l1,[(e(),l("svg",e1,T[92]||(T[92]=[a("",1)]))),T[93]||(T[93]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mn",null,"0.2")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mn",null,"0.2")]),t("mo",{stretchy:"false"},"]")])],-1))])]),T[104]||(T[104]=t("li",null,[Q("对"),t("code",null,"不同概率的token"),Q("来说，"),t("code",null,"不公平"),Q("。压制了"),t("code",null,"低概率"),Q("、"),t("code",null,"但具有探索性"),Q("的"),t("code",null,"好步骤"),Q("。")],-1)),t("li",null,[T[102]||(T[102]=Q("假设2个以下token都是好词，")),t("mjx-container",m1,[(e(),l("svg",s1,T[100]||(T[100]=[a("",1)]))),T[101]||(T[101]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mo",null,">"),t("mn",null,"0")])],-1))]),T[103]||(T[103]=a("",2))])]),T[109]||(T[109]=a("",2))]),T[183]||(T[183]=a("",8)),t("div",d1,[T[130]||(T[130]=t("div",{class:"custom-block-title"},"Clip-Higher",-1)),T[131]||(T[131]=t("p",null,[t("strong",null,"问题")],-1)),T[132]||(T[132]=t("ul",null,[t("li",null,"解决熵坍塌问题。")],-1)),T[133]||(T[133]=t("p",null,[t("strong",null,"Clip-Higher：奖励时要重奖励、惩罚时要谨慎惩罚")],-1)),t("ul",null,[t("li",null,[T[114]||(T[114]=Q("上下界由")),t("mjx-container",o1,[(e(),l("svg",r1,T[110]||(T[110]=[a("",1)]))),T[111]||(T[111]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mo",{stretchy:"false"},"]")])],-1))]),T[115]||(T[115]=Q(" 变成 ")),t("mjx-container",n1,[(e(),l("svg",h1,T[112]||(T[112]=[a("",1)]))),T[113]||(T[113]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mo",{stretchy:"false"},"]")])],-1))])]),t("li",null,[t("strong",null,[T[118]||(T[118]=Q("保持下界")),t("mjx-container",i1,[(e(),l("svg",g1,T[116]||(T[116]=[a("",1)]))),T[117]||(T[117]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])]),t("mo",null,"="),t("mn",null,"0.2")])],-1))]),T[119]||(T[119]=Q("不变"))]),T[120]||(T[120]=t("ul",null,[t("li",null,"如果太大，模型惩罚错误时，会过于激进，抑制了探索。")],-1))]),t("li",null,[t("strong",null,[T[123]||(T[123]=Q("提高上界")),t("mjx-container",H1,[(e(),l("svg",p1,T[121]||(T[121]=[a("",1)]))),T[122]||(T[122]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])]),t("mo",null,"="),t("mn",null,"0.28")])],-1))])]),T[124]||(T[124]=t("ul",null,[t("li",null,"设置更高探索天花板，当探索到好路径时，策略可以大幅度更新。")],-1))]),T[125]||(T[125]=t("li",null,"Loss",-1))]),t("mjx-container",c1,[(e(),l("svg",u1,T[126]||(T[126]=[a("",1)]))),T[127]||(T[127]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))]),T[134]||(T[134]=t("ul",null,[t("li",null,"目标函数")],-1)),t("mjx-container",L1,[(e(),l("svg",f1,T[128]||(T[128]=[a("",1)]))),T[129]||(T[129]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"J")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("msub",null,[t("mi",null,"E"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mo",{stretchy:"false"},"("),t("mi",null,"q"),t("mo",null,","),t("mi",null,"a"),t("mo",{stretchy:"false"},")"),t("mo",null,"∼"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")])]),t("mo",null,","),t("mo",{fence:"false",stretchy:"false"},"{"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"o"),t("mi",null,"i")])]),t("msubsup",null,[t("mo",{fence:"false",stretchy:"false"},"}"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",null,"∼"),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("mo",null,"⋅"),t("mo",null,"∣"),t("mi",null,"q"),t("mo",{stretchy:"false"},")")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"[")]),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("msub",null,[t("mi",null,"r"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"low")])])]),t("mo",null,","),t("mstyle",{mathcolor:"red"},[t("mn",null,"1"),t("mo",null,"+"),t("msub",null,[t("mi",null,"ϵ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"high")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"]")])])],-1))]),T[135]||(T[135]=a("",2))]),T[184]||(T[184]=a("",4)),t("div",x1,[T[140]||(T[140]=t("div",{class:"custom-block-title"},"Token-Level Loss",-1)),T[141]||(T[141]=t("p",null,[t("strong",null,"PPO/GRPO 标准Seq-Loss 缺点")],-1)),T[142]||(T[142]=t("ul",null,[t("li",null,"两层平均，对长度不敏感，长序列token权重被稀释，长序列里的token远低于短序列里的token对训练的贡献。"),t("li",null,"导致模型跟关注短序列优化，忽略长序列token里的错误，导致难以学会处理长序列问题。")],-1)),t("mjx-container",w1,[(e(),l("svg",V1,T[136]||(T[136]=[a("",1)]))),T[137]||(T[137]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"ppo")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mstyle",{mathcolor:"blue"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mi",null,"G")]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"样"),t("mi",{mathvariant:"normal"},"本"),t("mi",{mathvariant:"normal"},"间"),t("mi",{mathvariant:"normal"},"平"),t("mi",{mathvariant:"normal"},"均")])])]),t("mstyle",{mathcolor:"red"},[t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])]),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"序列内平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))]),T[143]||(T[143]=t("p",null,[t("strong",null,"DAPO Token-Level Loss")],-1)),T[144]||(T[144]=t("ul",null,[t("li",null,[t("code",null,"直接对所有Token做平均"),Q("，"),t("code",null,"每个token权重相同"),Q("，不论来自长或短序列。")])],-1)),t("mjx-container",y1,[(e(),l("svg",M1,T[138]||(T[138]=[a("",1)]))),T[139]||(T[139]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"DAPO")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"θ"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mo",null,"−"),t("munder",null,[t("mrow",{"data-mjx-texclass":"OP"},[t("munder",null,[t("mrow",null,[t("mstyle",{mathcolor:"red"},[t("mfrac",null,[t("mn",null,"1"),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"G")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"i")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])]),t("mstyle",{mathcolor:"blue"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"G")])])]),t("mstyle",{mathcolor:"red"},[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP",movablelimits:"false"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"t"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"o"),t("mi",null,"t")]),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")])])])]),t("mo",null,"⏟")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mstyle",{mathcolor:"blue"},[t("mtext",null,"所有Token直接做平均")])])]),t("mstyle",{mathcolor:"blue"},[t("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"min")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mstyle",{mathcolor:"red"},[t("mtext",null,"clip")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},"(")]),t("mfrac",null,[t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"θ")])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")]),t("mstyle",{mathcolor:"red"},[t("msub",null,[t("mi",null,"π"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"θ"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"o"),t("mi",null,"l"),t("mi",null,"d")])])])]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])]),t("mo",null,"∣"),t("mi",null,"q"),t("mo",null,","),t("msub",null,[t("mi",null,"o"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mo",null,"<"),t("mi",null,"t")])]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"−"),t("mi",null,"ϵ")]),t("mo",null,","),t("mstyle",{mathcolor:"blue"},[t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"1.2em",maxsize:"1.2em"},")")]),t("mo",null,"⋅"),t("mstyle",{mathcolor:"blue"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"A"),t("mo",{stretchy:"false"},"^")])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,","),t("mi",null,"t")])])]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{minsize:"2.047em",maxsize:"2.047em"},")")])])],-1))])]),T[185]||(T[185]=t("h4",{id:"overlong-奖励设计",tabindex:"-1"},[Q("Overlong 奖励设计 "),t("a",{class:"header-anchor",href:"#overlong-奖励设计","aria-label":'Permalink to "Overlong 奖励设计"'},"​")],-1)),t("div",Z1,[T[159]||(T[159]=a("",4)),t("ul",null,[t("li",null,[T[154]||(T[154]=Q("设置")),t("strong",null,[T[149]||(T[149]=Q("cache长度")),t("mjx-container",k1,[(e(),l("svg",D1,T[145]||(T[145]=[a("",1)]))),T[146]||(T[146]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])],-1))]),T[150]||(T[150]=t("strong",null,"和",-1)),T[151]||(T[151]=Q("硬顶线")),t("mjx-container",b1,[(e(),l("svg",j1,T[147]||(T[147]=[a("",1)]))),T[148]||(T[148]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])])])],-1))])]),T[155]||(T[155]=Q("，安全线等于")),t("mjx-container",O1,[(e(),l("svg",R1,T[152]||(T[152]=[a("",1)]))),T[153]||(T[153]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"safe")])]),t("mo",null,"="),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])],-1))]),T[156]||(T[156]=t("ul",null,[t("li",null,"低于安全线，不惩罚；"),t("li",null,"超过硬顶线，直接给-1."),t("li",null,"介于安全线和硬顶线之间，根据超出长度来计算惩罚，线性下降。")],-1))])]),t("mjx-container",v1,[(e(),l("svg",A1,T[157]||(T[157]=[a("",1)]))),T[158]||(T[158]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"R"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"length")])]),t("mo",{stretchy:"false"},"("),t("mi",null,"y"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"{"),t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[t("mtr",null,[t("mtd",null,[t("mn",null,"0")]),t("mtd",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",null,"≤"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])]),t("mtr",null,[t("mtd",null,[t("mfrac",null,[t("mrow",null,[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])]),t("mo",null,"−"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|")]),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])])])]),t("mtd",null,[t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])]),t("mo",null,"−"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"cache")])]),t("mo",null,"<"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",null,"≤"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])])])]),t("mtr",null,[t("mtd",null,[t("mo",null,"−"),t("mn",null,"1")]),t("mtd",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mi",null,"y"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",null,"≥"),t("msub",null,[t("mi",null,"L"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mtext",null,"max")])])])])]),t("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])],-1))])]),T[186]||(T[186]=t("h4",{id:"数据转换",tabindex:"-1"},[Q("数据转换 "),t("a",{class:"header-anchor",href:"#数据转换","aria-label":'Permalink to "数据转换"'},"​")],-1)),t("div",C1,[T[170]||(T[170]=t("div",{class:"custom-block-title"},"数据转换",-1)),t("ul",null,[T[169]||(T[169]=t("li",null,[t("code",null,"收集数据并做格式转换"),Q("，为了方便reward，"),t("code",null,"把所有答案都转换成数字"),Q("，"),t("code",null,"最终17k数据集"),Q("。")],-1)),t("li",null,[T[168]||(T[168]=Q("格式转换 ")),t("ul",null,[t("li",null,[T[162]||(T[162]=Q("转换前：输出复杂， 不好计算reward，如")),t("mjx-container",_1,[(e(),l("svg",X1,T[160]||(T[160]=[a("",1)]))),T[161]||(T[161]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mfrac",null,[t("mrow",null,[t("mi",null,"a"),t("mo",null,"+"),t("msqrt",null,[t("mi",null,"b")])]),t("mi",null,"c")])])],-1))])]),t("li",null,[T[165]||(T[165]=Q("转换后：输出简单，方便计算reward，如")),t("mjx-container",E1,[(e(),l("svg",P1,T[163]||(T[163]=[a("",1)]))),T[164]||(T[164]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"a"),t("mo",null,"+"),t("mi",null,"b"),t("mo",null,"+"),t("mi",null,"c")])],-1))]),T[166]||(T[166]=Q("，如llm输出11+2+6=19即可。"))]),T[167]||(T[167]=t("li",null,[t("code",null,"让llm去改写question")],-1))])])])]),T[187]||(T[187]=a("",15))])}const J1=m(s,[["render",S1]]);export{F1 as __pageData,J1 as default};

import{_ as s,c as Q,o as e,a2 as T,j as t,a as r}from"./chunks/framework.CJy6NSJ1.js";const M=JSON.parse('{"title":"Transformer","description":"","frontmatter":{"title":"Transformer","date":"2018-08-29T15:41:32.000Z","tags":["Transformer","Self-Attention","多头注意力","残差连接","层归一化","位置编码","机器翻译","论文笔记"],"categories":["自然语言处理"]},"headers":[],"relativePath":"posts/olds/nlp/48-attention-is-all-you-need.md","filePath":"posts/olds/nlp/48-attention-is-all-you-need.md","lastUpdated":null}'),o={name:"posts/olds/nlp/48-attention-is-all-you-need.md"},m={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.778ex",height:"1.595ex",role:"img",focusable:"false",viewBox:"0 -511 9625.7 705","aria-hidden":"true"},l={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.552ex",height:"1.457ex",role:"img",focusable:"false",viewBox:"0 -450 3780.1 644","aria-hidden":"true"},i={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.646ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 6031.3 877","aria-hidden":"true"},p={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"64.495ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 28506.9 1000","aria-hidden":"true"},H={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.284ex",height:"2.887ex",role:"img",focusable:"false",viewBox:"0 -1026.1 13385.3 1276.1","aria-hidden":"true"},V={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},u={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"34.429ex",height:"2.887ex",role:"img",focusable:"false",viewBox:"0 -1026.1 15217.8 1276.1","aria-hidden":"true"};function f(y,a,L,w,k,x){return e(),Q("div",null,[a[18]||(a[18]=T("",26)),t("p",null,[a[4]||(a[4]=t("code",null,"Self-Attention",-1)),a[5]||(a[5]=r("会对每一个单词进行编码，得到对应的向量。")),t("mjx-container",m,[(e(),Q("svg",n,a[0]||(a[0]=[T("",1)]))),a[1]||(a[1]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"x"),t("mn",{mathvariant:"bold"},"1")])]),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"x"),t("mn",{mathvariant:"bold"},"2")])]),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"x"),t("mn",{mathvariant:"bold"},"3")])]),t("mo",{accent:"false",stretchy:"false"},"→"),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"z"),t("mn",{mathvariant:"bold"},"1")])]),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"z"),t("mn",{mathvariant:"bold"},"2")])]),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"z"),t("mn",{mathvariant:"bold"},"3")])])])],-1))]),a[6]||(a[6]=r("，再给到FFN，会得到一个Encoder的结果")),t("mjx-container",l,[(e(),Q("svg",d,a[2]||(a[2]=[T("",1)]))),a[3]||(a[3]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"r"),t("mn",{mathvariant:"bold"},"1")])]),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"r"),t("mn",{mathvariant:"bold"},"2")])]),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",{mathvariant:"bold"},"r"),t("mn",{mathvariant:"bold"},"3")])])])],-1))]),a[7]||(a[7]=r("， 再继续给到下一个Encoder"))]),a[19]||(a[19]=T("",24)),t("p",null,[a[10]||(a[10]=r("经过多头注意力映射，会生成多个注意力")),t("mjx-container",i,[(e(),Q("svg",h,a[8]||(a[8]=[T("",1)]))),a[9]||(a[9]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"Z"),t("mn",null,"0")]),t("mo",null,","),t("msub",null,[t("mi",null,"Z"),t("mn",null,"1")]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("msub",null,[t("mi",null,"Z"),t("mn",null,"7")])])],-1))]),a[11]||(a[11]=r("。"))]),a[20]||(a[20]=T("",10)),t("mjx-container",p,[(e(),Q("svg",g,a[12]||(a[12]=[T("",1)]))),a[13]||(a[13]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"F"),t("mi",{mathvariant:"normal"},"F"),t("mi",{mathvariant:"normal"},"N")]),t("mo",{stretchy:"false"},"("),t("mi",{mathvariant:"normal"},"x"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"L"),t("mi",{mathvariant:"normal"},"i"),t("mi",{mathvariant:"normal"},"n"),t("mi",{mathvariant:"normal"},"e"),t("mi",{mathvariant:"normal"},"a"),t("mi",{mathvariant:"normal"},"r")]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"R"),t("mi",{mathvariant:"normal"},"e"),t("mi",{mathvariant:"normal"},"L"),t("mi",{mathvariant:"normal"},"U")]),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"L"),t("mi",{mathvariant:"normal"},"i"),t("mi",{mathvariant:"normal"},"n"),t("mi",{mathvariant:"normal"},"e"),t("mi",{mathvariant:"normal"},"a"),t("mi",{mathvariant:"normal"},"r")]),t("mo",{stretchy:"false"},"("),t("mi",{mathvariant:"normal"},"x"),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},")"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"m"),t("mi",{mathvariant:"normal"},"a"),t("mi",{mathvariant:"normal"},"x")]),t("mo",{stretchy:"false"},"("),t("mn",null,"0"),t("mo",null,","),t("mi",{mathvariant:"normal"},"x"),t("msub",null,[t("mi",{mathvariant:"normal"},"W"),t("mn",null,"1")]),t("mo",null,"+"),t("msub",null,[t("mi",{mathvariant:"normal"},"b"),t("mn",null,"1")]),t("mo",{stretchy:"false"},")"),t("msub",null,[t("mi",{mathvariant:"normal"},"W"),t("mn",null,"2")]),t("mo",null,"+"),t("msub",null,[t("mi",{mathvariant:"normal"},"b"),t("mn",null,"2")])])],-1))]),a[21]||(a[21]=t("h1",{id:"位置编码",tabindex:"-1"},[r("位置编码 "),t("a",{class:"header-anchor",href:"#位置编码","aria-label":'Permalink to "位置编码"'},"​")],-1)),a[22]||(a[22]=t("p",null,[t("strong",null,"词向量+位置信息=带位置信息的词向量")],-1)),t("mjx-container",H,[(e(),Q("svg",c,a[14]||(a[14]=[T("",1)]))),a[15]||(a[15]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"P"),t("mi",{mathvariant:"normal"},"E")]),t("mo",{stretchy:"false"},"("),t("mi",{mathvariant:"normal"},"p"),t("mi",{mathvariant:"normal"},"o"),t("mi",{mathvariant:"normal"},"s"),t("mo",null,","),t("mn",null,"2"),t("mi",{mathvariant:"normal"},"i"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mi",null,"sin"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"p"),t("mi",{mathvariant:"normal"},"o"),t("mi",{mathvariant:"normal"},"s")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"/")]),t("msup",null,[t("mn",null,"10000"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mfrac",null,[t("mrow",null,[t("mn",null,"2"),t("mi",{mathvariant:"normal"},"i")]),t("mi",{mathvariant:"normal"},"d")])])]),t("mo",{stretchy:"false"},")")])],-1))]),t("mjx-container",V,[(e(),Q("svg",u,a[16]||(a[16]=[T("",1)]))),a[17]||(a[17]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"P"),t("mi",{mathvariant:"normal"},"E")]),t("mo",{stretchy:"false"},"("),t("mi",{mathvariant:"normal"},"p"),t("mi",{mathvariant:"normal"},"o"),t("mi",{mathvariant:"normal"},"s"),t("mo",null,","),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"2"),t("mi",{mathvariant:"normal"},"i"),t("mo",null,"+"),t("mn",null,"1")]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mi",null,"cos"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"p"),t("mi",{mathvariant:"normal"},"o"),t("mi",{mathvariant:"normal"},"s")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"/")]),t("msup",null,[t("mn",null,"10000"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mfrac",null,[t("mrow",null,[t("mn",null,"2"),t("mi",{mathvariant:"normal"},"i")]),t("mi",{mathvariant:"normal"},"d")])])]),t("mo",{stretchy:"false"},")")])],-1))]),a[23]||(a[23]=T("",25))])}const _=s(o,[["render",f]]);export{M as __pageData,_ as default};

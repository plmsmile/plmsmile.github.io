import{_ as l,c as a,o as e,ah as s,j as t,a as T}from"./chunks/framework.CvbyeFFO.js";const j2=JSON.parse('{"title":"机器翻译注意力机制及其PyTorch实现","description":"","frontmatter":{"title":"机器翻译注意力机制及其PyTorch实现","date":"2017-10-12T16:12:39.000Z","tags":["Attention","自然语言处理","深度学习","论文笔记","注意力","机器翻译"],"categories":["自然语言处理"]},"headers":[],"relativePath":"posts/olds/nlp/Attention-based-NMT.md","filePath":"posts/olds/nlp/Attention-based-NMT.md","lastUpdated":null}'),n={name:"posts/olds/nlp/Attention-based-NMT.md"},o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"19.124ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 8452.6 1000","aria-hidden":"true"},d={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.826ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 8321.2 1000","aria-hidden":"true"},m={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.187ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3176.6 1000","aria-hidden":"true"},h={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.023ex",role:"img",focusable:"false",viewBox:"0 -442 469 452","aria-hidden":"true"},c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.848ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 817 647","aria-hidden":"true"},x={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.014ex"},xmlns:"http://www.w3.org/2000/svg",width:"62.265ex",height:"6.549ex",role:"img",focusable:"false",viewBox:"0 -1562.5 27521.1 2894.7","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.023ex",role:"img",focusable:"false",viewBox:"0 -442 469 452","aria-hidden":"true"},f={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.195ex",height:"2.236ex",role:"img",focusable:"false",viewBox:"0 -694 1854 988.2","aria-hidden":"true"},V={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.023ex",role:"img",focusable:"false",viewBox:"0 -442 469 452","aria-hidden":"true"},Z={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.244ex",height:"2.059ex",role:"img",focusable:"false",viewBox:"0 -705 550 910","aria-hidden":"true"},D={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.15ex",height:"2.236ex",role:"img",focusable:"false",viewBox:"0 -694 950.3 988.2","aria-hidden":"true"},E={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.433ex",height:"2.363ex",role:"img",focusable:"false",viewBox:"0 -750 6379.6 1044.2","aria-hidden":"true"},A={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.079ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 477 647","aria-hidden":"true"},S={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.15ex",height:"2.236ex",role:"img",focusable:"false",viewBox:"0 -694 950.3 988.2","aria-hidden":"true"},R={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.848ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 817 647","aria-hidden":"true"},P={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.079ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 477 647","aria-hidden":"true"},O={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.034ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 9738.9 1000","aria-hidden":"true"},G={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.666ex"},xmlns:"http://www.w3.org/2000/svg",width:"28.448ex",height:"2.363ex",role:"img",focusable:"false",viewBox:"0 -750 12573.9 1044.2","aria-hidden":"true"},J={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.023ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.061ex",height:"1.023ex",role:"img",focusable:"false",viewBox:"0 -442 469 452","aria-hidden":"true"},q={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},U={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.222ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.396ex",height:"5.371ex",role:"img",focusable:"false",viewBox:"0 -950 9457 2374.1","aria-hidden":"true"},W={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.817ex",height:"1.441ex",role:"img",focusable:"false",viewBox:"0 -626 361 637","aria-hidden":"true"},Y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.874ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 828.3 647","aria-hidden":"true"},t1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Q1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.068ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 914.3 851.8","aria-hidden":"true"},T1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.745ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 771.3 599.8","aria-hidden":"true"},e1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.745ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 771.3 599.8","aria-hidden":"true"},l1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.819ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 2130.2 888","aria-hidden":"true"},o1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.467ex",height:"2.968ex",role:"img",focusable:"false",viewBox:"0 -1062 9046.2 1312","aria-hidden":"true"},d1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"30.021ex",height:"2.968ex",role:"img",focusable:"false",viewBox:"0 -1062 13269.1 1312","aria-hidden":"true"},m1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.745ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 771.3 599.8","aria-hidden":"true"},h1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.068ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 914.3 851.8","aria-hidden":"true"},u1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.241ex",height:"2.493ex",role:"img",focusable:"false",viewBox:"0 -945 990.6 1102.1","aria-hidden":"true"},c1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.213ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 978.3 599.8","aria-hidden":"true"},x1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.817ex",height:"1.441ex",role:"img",focusable:"false",viewBox:"0 -626 361 637","aria-hidden":"true"},y1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.874ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 828.3 647","aria-hidden":"true"},f1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.424ex",height:"1.889ex",role:"img",focusable:"false",viewBox:"0 -677 1071.5 834.8","aria-hidden":"true"},V1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.232ex",height:"1.355ex",role:"img",focusable:"false",viewBox:"0 -442 986.6 599.1","aria-hidden":"true"},Z1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.874ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 828.3 647","aria-hidden":"true"},D1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},_1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.849ex"},xmlns:"http://www.w3.org/2000/svg",width:"59.42ex",height:"6.593ex",role:"img",focusable:"false",viewBox:"0 -1655 26263.8 2914.2","aria-hidden":"true"},E1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},C1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.287ex",height:"2.968ex",role:"img",focusable:"false",viewBox:"0 -1062 20900.6 1312","aria-hidden":"true"},A1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.046ex",height:"2.867ex",role:"img",focusable:"false",viewBox:"0 -1062 10628.5 1267","aria-hidden":"true"},S1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.289ex",height:"2.704ex",role:"img",focusable:"false",viewBox:"0 -945 5431.6 1195","aria-hidden":"true"},R1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},B1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.986ex"},xmlns:"http://www.w3.org/2000/svg",width:"45.835ex",height:"9.104ex",role:"img",focusable:"false",viewBox:"0 -2262 20259.2 4023.9","aria-hidden":"true"},P1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.964ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 2194.2 636","aria-hidden":"true"},O1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.903ex",height:"1.439ex",role:"img",focusable:"false",viewBox:"0 -442 841.3 636","aria-hidden":"true"},G1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.873ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 828 683","aria-hidden":"true"},J1={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},X1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.349ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6784.1 1000","aria-hidden":"true"},q1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.213ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 978.3 599.8","aria-hidden":"true"},W1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.005ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 1328 683","aria-hidden":"true"},Y1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},K1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.005ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 1328 683","aria-hidden":"true"},t2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},Q2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.737ex",height:"1.855ex",role:"img",focusable:"false",viewBox:"0 -626 2535.8 820","aria-hidden":"true"},T2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.459ex",height:"1.645ex",role:"img",focusable:"false",viewBox:"0 -705 645 727","aria-hidden":"true"},e2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},s2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.869ex"},xmlns:"http://www.w3.org/2000/svg",width:"45.083ex",height:"2.887ex",role:"img",focusable:"false",viewBox:"0 -891.7 19926.5 1275.9","aria-hidden":"true"},l2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.213ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 978.3 599.8","aria-hidden":"true"},o2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"3.005ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 1328 683","aria-hidden":"true"},d2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"19.176ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 8475.6 1000","aria-hidden":"true"},m2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.419ex",height:"2.452ex",role:"img",focusable:"false",viewBox:"0 -833.9 3721.2 1083.9","aria-hidden":"true"},h2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.781ex"},xmlns:"http://www.w3.org/2000/svg",width:"13.92ex",height:"2.765ex",role:"img",focusable:"false",viewBox:"0 -877 6152.5 1222","aria-hidden":"true"},u2={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},H2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.148ex"},xmlns:"http://www.w3.org/2000/svg",width:"72.92ex",height:"5.641ex",role:"img",focusable:"false",viewBox:"0 -1543.9 32230.4 2493.4","aria-hidden":"true"},c2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.068ex",height:"2.76ex",role:"img",focusable:"false",viewBox:"0 -1062 914.3 1219.8","aria-hidden":"true"},x2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.068ex",height:"2.76ex",role:"img",focusable:"false",viewBox:"0 -1062 914.3 1219.8","aria-hidden":"true"},y2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},L2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.98ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 433 453","aria-hidden":"true"},f2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.068ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 914.3 851.8","aria-hidden":"true"},V2={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},M2={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.385ex",height:"1.359ex",role:"img",focusable:"false",viewBox:"0 -443 1054.3 600.8","aria-hidden":"true"};function Z2(v2,Q,D2,_2,E2,C2){return e(),a("div",null,[Q[243]||(Q[243]=s("",18)),t("p",null,[Q[4]||(Q[4]=T("输入句子")),t("mjx-container",o,[(e(),a("svg",r,Q[0]||(Q[0]=[s("",1)]))),Q[1]||(Q[1]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"x"),t("mo",null,"="),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"x"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",null,"x"),t("mn",null,"2")]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("msub",null,[t("mi",null,"x"),t("mi",null,"n")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[5]||(Q[5]=T(" ，输出目标句子")),t("mjx-container",d,[(e(),a("svg",i,Q[2]||(Q[2]=[s("",1)]))),Q[3]||(Q[3]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"y"),t("mo",null,"="),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mn",null,"1")]),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mn",null,"2")]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mi",null,"m")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[6]||(Q[6]=T(" 。"))]),t("p",null,[Q[9]||(Q[9]=T("神经机器翻译(Neural machine translation, NMT)，利用神经网络，直接对")),t("mjx-container",m,[(e(),a("svg",p,Q[7]||(Q[7]=[s("",1)]))),Q[8]||(Q[8]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("mi",null,"y"),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])])])],-1))]),Q[10]||(Q[10]=T(" 进行建模。一般由Encoder和Decoder构成。")),Q[11]||(Q[11]=t("a",{href:"https://plmsmile.github.io/2017/10/10/attention-model/#encoder-decoder",target:"_blank",rel:"noreferrer"},"Encoder-Decoder介绍文章链接 ",-1)),Q[12]||(Q[12]=T(" 。"))]),Q[244]||(Q[244]=t("img",{src:"http://plm-images.oss-cn-hongkong.aliyuncs.com/image/nlp/am/01-encoder-decoder-n",style:{display:"block",margin:"auto"},width:"70%"},null,-1)),t("p",null,[Q[20]||(Q[20]=T("Encoder把输入句子")),t("mjx-container",h,[(e(),a("svg",g,Q[13]||(Q[13]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[14]||(Q[14]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"x")])],-1))]),Q[21]||(Q[21]=T(" 编码成一个")),t("strong",null,[Q[17]||(Q[17]=T("语义向量")),t("mjx-container",u,[(e(),a("svg",H,Q[15]||(Q[15]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[16]||(Q[16]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"s")])],-1))])]),Q[22]||(Q[22]=T(" (c表示也可以)，然后由Decoder 一个一个产生目标单词 ")),t("mjx-container",c,[(e(),a("svg",w,Q[18]||(Q[18]=[s("",1)]))),Q[19]||(Q[19]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"y"),t("mi",null,"i")])])],-1))])]),t("mjx-container",x,[(e(),a("svg",k,Q[23]||(Q[23]=[s("",1)]))),Q[24]||(Q[24]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("mi",null,"y"),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"m")]),t("mi",null,"log"),t("mstyle",{mathcolor:"red"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"j")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"j")])]),t("mo",null,","),t("mi",null,"s"),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"="),t("mn",null,"1")]),t("mi",null,"m")]),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"j")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"y"),t("mn",null,"1")]),t("mo",null,","),t("mo",null,"⋯"),t("mo",null,","),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"−"),t("mn",null,"1")])]),t("mo",null,","),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])])],-1))]),t("p",null,[Q[27]||(Q[27]=T("但是怎么选择Encoder和Decoder（RNN, CNN, GRU, LSTM），怎么去生成语义")),t("mjx-container",y,[(e(),a("svg",L,Q[25]||(Q[25]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[26]||(Q[26]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"s")])],-1))]),Q[28]||(Q[28]=T("却有很多选择。"))]),Q[245]||(Q[245]=t("h2",{id:"概率计算",tabindex:"-1"},[T("概率计算 "),t("a",{class:"header-anchor",href:"#概率计算","aria-label":'Permalink to "概率计算"'},"​")],-1)),t("p",null,[Q[37]||(Q[37]=T("结合Decoder上一时刻的隐状态")),t("mjx-container",f,[(e(),a("svg",b,Q[29]||(Q[29]=[s("",1)]))),Q[30]||(Q[30]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"h"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"−"),t("mn",null,"1")])])])])])],-1))]),Q[38]||(Q[38]=T("和encoder给的语义向量")),t("mjx-container",V,[(e(),a("svg",M,Q[31]||(Q[31]=[s("",1)]))),Q[32]||(Q[32]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"s")])])])],-1))]),Q[39]||(Q[39]=T("，通过函数")),t("mjx-container",Z,[(e(),a("svg",v,Q[33]||(Q[33]=[s("",1)]))),Q[34]||(Q[34]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"f")])])])],-1))]),Q[40]||(Q[40]=T(" ，就可以计算出")),Q[41]||(Q[41]=t("strong",null,"当前的隐状态",-1)),t("mjx-container",D,[(e(),a("svg",_,Q[35]||(Q[35]=[s("",1)]))),Q[36]||(Q[36]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"j")])])])])],-1))]),Q[42]||(Q[42]=T(" ："))]),t("mjx-container",E,[(e(),a("svg",C,Q[43]||(Q[43]=[s("",1)]))),Q[44]||(Q[44]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"j")]),t("mo",null,"="),t("mi",null,"f"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"j"),t("mo",null,"−"),t("mn",null,"1")])]),t("mo",null,","),t("mi",null,"s"),t("mo",{stretchy:"false"},")")])],-1))]),t("p",null,[Q[51]||(Q[51]=T("通过")),Q[52]||(Q[52]=t("strong",null,"函数",-1)),t("mjx-container",A,[(e(),a("svg",j,Q[45]||(Q[45]=[s("",1)]))),Q[46]||(Q[46]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"g")])])])],-1))]),Q[53]||(Q[53]=T("对当前隐状态**")),t("mjx-container",S,[(e(),a("svg",F,Q[47]||(Q[47]=[s("",1)]))),Q[48]||(Q[48]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"j")])])],-1))]),Q[54]||(Q[54]=T("进行转换**，再")),Q[55]||(Q[55]=t("code",null,"softmax",-1)),Q[56]||(Q[56]=T("，就可以得到翻译的目标单词")),t("mjx-container",R,[(e(),a("svg",B,Q[49]||(Q[49]=[s("",1)]))),Q[50]||(Q[50]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"y"),t("mi",null,"i")])])],-1))]),Q[57]||(Q[57]=T("了（选概率最大的那个）。"))]),t("p",null,[t("mjx-container",P,[(e(),a("svg",I,Q[58]||(Q[58]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D454",d:"M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[59]||(Q[59]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"g")])],-1))]),Q[62]||(Q[62]=T("一般是")),Q[63]||(Q[63]=t("strong",null,"线性变换",-1)),Q[64]||(Q[64]=T("，维数变化是")),t("mjx-container",O,[(e(),a("svg",N,Q[60]||(Q[60]=[s("",1)]))),Q[61]||(Q[61]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"["),t("mn",null,"1"),t("mo",null,","),t("mi",null,"h"),t("mo",{stretchy:"false"},"]"),t("mo",{accent:"false",stretchy:"false"},"→"),t("mo",{stretchy:"false"},"["),t("mn",null,"1"),t("mo",null,","),t("mi",null,"v"),t("mi",null,"o"),t("mi",null,"c"),t("mi",null,"a"),t("mi",null,"b"),t("mi",{mathvariant:"normal"},"_"),t("mi",null,"s"),t("mi",null,"i"),t("mi",null,"z"),t("mi",null,"e"),t("mo",{stretchy:"false"},"]")])],-1))]),Q[65]||(Q[65]=T("。"))]),t("mjx-container",G,[(e(),a("svg",z,Q[66]||(Q[66]=[s("",1)]))),Q[67]||(Q[67]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"j")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"j")])]),t("mo",null,","),t("mi",null,"s"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-auto-op":"false"},"softmax")]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"0.278em"})]),t("mi",null,"g"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"j")]),t("mo",{stretchy:"false"},")")])],-1))]),t("p",null,[t("strong",null,[Q[70]||(Q[70]=T("语义向量")),t("mjx-container",J,[(e(),a("svg",X,Q[68]||(Q[68]=[s("",1)]))),Q[69]||(Q[69]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"s"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"​")])])],-1))]),Q[71]||(Q[71]=T(" 会贯穿整个翻译的过程，每一步翻译都会使用到语义向量的内容"))]),Q[72]||(Q[72]=T("，这就是")),Q[73]||(Q[73]=t("code",null,"注意力机制",-1)),Q[74]||(Q[74]=T("。"))]),Q[246]||(Q[246]=t("h2",{id:"本论文的模型",tabindex:"-1"},[T("本论文的模型 "),t("a",{class:"header-anchor",href:"#本论文的模型","aria-label":'Permalink to "本论文的模型"'},"​")],-1)),Q[247]||(Q[247]=t("p",null,"本论文采用stack LSTM的构建NMT系统。如下所示：",-1)),Q[248]||(Q[248]=t("img",{src:"http://plm-images.oss-cn-hongkong.aliyuncs.com/image/paper/01_nmt.png",style:{display:"block",margin:"auto"},width:"60%"},null,-1)),Q[249]||(Q[249]=t("p",null,"训练目标是",-1)),t("mjx-container",q,[(e(),a("svg",U,Q[75]||(Q[75]=[s("",1)]))),Q[76]||(Q[76]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"J"),t("mi",null,"t")]),t("mo",null,"="),t("munder",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",{stretchy:"false"},"("),t("mi",null,"x"),t("mo",null,","),t("mi",null,"y"),t("mo",{stretchy:"false"},")")])]),t("mo",null,"−"),t("mi",null,"log"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("mi",null,"y"),t("mo",null,"∣"),t("mi",null,"x"),t("mo",{stretchy:"false"},")")])],-1))]),Q[250]||(Q[250]=t("h1",{id:"注意力模型",tabindex:"-1"},[T("注意力模型 "),t("a",{class:"header-anchor",href:"#注意力模型","aria-label":'Permalink to "注意力模型"'},"​")],-1)),Q[251]||(Q[251]=t("p",null,[T("注意力模型广义上分为"),t("code",null,"global"),T("和"),t("code",null,"local"),T("。Global的attention来自于整个序列，而local的只来自于序列的一部分。")],-1)),Q[252]||(Q[252]=t("p",null,[t("strong",null,"解码总体流程")],-1)),t("p",null,[Q[81]||(Q[81]=T("Decoder时，在时刻")),t("mjx-container",W,[(e(),a("svg",$,Q[77]||(Q[77]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[78]||(Q[78]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"t")])],-1))]),Q[82]||(Q[82]=T("，要翻译出单词")),t("mjx-container",Y,[(e(),a("svg",K,Q[79]||(Q[79]=[s("",1)]))),Q[80]||(Q[80]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"y"),t("mi",null,"t")])])],-1))]),Q[83]||(Q[83]=T(" ，如下步骤："))]),t("ul",null,[t("li",null,[Q[87]||(Q[87]=T("最顶层")),t("strong",null,[Q[86]||(Q[86]=T("LSTM的隐状态 ")),t("mjx-container",t1,[(e(),a("svg",Q1,Q[84]||(Q[84]=[s("",1)]))),Q[85]||(Q[85]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"t")])])],-1))])])]),t("li",null,[Q[93]||(Q[93]=T("计算带有原句子信息")),t("strong",null,[Q[90]||(Q[90]=T("语义向量")),t("mjx-container",T1,[(e(),a("svg",a1,Q[88]||(Q[88]=[s("",1)]))),Q[89]||(Q[89]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"c"),t("mi",null,"t")])])],-1))])]),Q[94]||(Q[94]=T("。Global和Local的区别在于")),t("mjx-container",e1,[(e(),a("svg",s1,Q[91]||(Q[91]=[s("",1)]))),Q[92]||(Q[92]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"c"),t("mi",null,"t")])])],-1))]),Q[95]||(Q[95]=T("的计算方式不同"))]),t("li",null,[t("strong",null,[Q[98]||(Q[98]=T("串联")),t("mjx-container",l1,[(e(),a("svg",n1,Q[96]||(Q[96]=[s("",1)]))),Q[97]||(Q[97]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"c"),t("mi",null,"t")])])],-1))])]),Q[101]||(Q[101]=T("，计算得到带有")),Q[102]||(Q[102]=t("strong",null,"注意力的隐状态",-1)),Q[103]||(Q[103]=T()),t("mjx-container",o1,[(e(),a("svg",r1,Q[99]||(Q[99]=[s("",1)]))),Q[100]||(Q[100]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"t")]),t("mo",null,"="),t("mi",null,"tanh"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"W"),t("mi",null,"c")]),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"c"),t("mi",null,"t")]),t("mo",null,";"),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"]"),t("mo",{stretchy:"false"},")")])],-1))])]),t("li",null,[Q[106]||(Q[106]=T("通过注意力隐状态得到预测概率 ")),t("mjx-container",d1,[(e(),a("svg",i1,Q[104]||(Q[104]=[s("",1)]))),Q[105]||(Q[105]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"p"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mo",null,"∣"),t("msub",null,[t("mi",null,"y"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"<"),t("mi",null,"t")])]),t("mo",null,","),t("mi",null,"x"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{mathvariant:"normal"},"s"),t("mi",{mathvariant:"normal"},"o"),t("mi",{mathvariant:"normal"},"f"),t("mi",{mathvariant:"normal"},"t"),t("mi",{mathvariant:"normal"},"m"),t("mi",{mathvariant:"normal"},"a"),t("mi",{mathvariant:"normal"},"x")]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",{mathvariant:"normal"},"W"),t("mi",{mathvariant:"normal"},"s")]),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",{mathvariant:"normal"},"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",{mathvariant:"normal"},"t")]),t("mo",{stretchy:"false"},")")])],-1))])])]),Q[253]||(Q[253]=t("h2",{id:"global-attention",tabindex:"-1"},[T("Global Attention "),t("a",{class:"header-anchor",href:"#global-attention","aria-label":'Permalink to "Global Attention"'},"​")],-1)),Q[254]||(Q[254]=t("p",null,[t("strong",null,"总体思路")],-1)),t("p",null,[Q[113]||(Q[113]=T("在计算")),t("mjx-container",m1,[(e(),a("svg",p1,Q[107]||(Q[107]=[s("",1)]))),Q[108]||(Q[108]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"c"),t("mi",null,"t")])])],-1))]),Q[114]||(Q[114]=T(" 的时候，")),Q[115]||(Q[115]=t("strong",null,"会考虑整个encoder的隐状态",-1)),Q[116]||(Q[116]=T("。Decoder当前隐状态")),t("mjx-container",h1,[(e(),a("svg",g1,Q[109]||(Q[109]=[s("",1)]))),Q[110]||(Q[110]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"t")])])],-1))]),Q[117]||(Q[117]=T("， Encoder时刻s的隐状态")),t("mjx-container",u1,[(e(),a("svg",H1,Q[111]||(Q[111]=[s("",1)]))),Q[112]||(Q[112]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")])])],-1))]),Q[118]||(Q[118]=T("。"))]),t("p",null,[Q[133]||(Q[133]=t("strong",null,"对齐向量",-1)),t("mjx-container",c1,[(e(),a("svg",w1,Q[119]||(Q[119]=[s("",1)]))),Q[120]||(Q[120]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"α"),t("mi",null,"t")])])])])],-1))]),Q[134]||(Q[134]=T("代表时刻")),t("mjx-container",x1,[(e(),a("svg",k1,Q[121]||(Q[121]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[122]||(Q[122]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"t")])],-1))]),Q[135]||(Q[135]=T()),t("strong",null,[Q[125]||(Q[125]=T("输入序列中的单词对当前单词")),t("mjx-container",y1,[(e(),a("svg",L1,Q[123]||(Q[123]=[s("",1)]))),Q[124]||(Q[124]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"y"),t("mi",null,"t")])])],-1))]),Q[126]||(Q[126]=T(" 的对齐概率"))]),Q[136]||(Q[136]=T("，长度是")),t("mjx-container",f1,[(e(),a("svg",b1,Q[127]||(Q[127]=[s("",1)]))),Q[128]||(Q[128]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"x")])])],-1))]),Q[137]||(Q[137]=T("， 随着输入句子的长度而改变 。")),t("mjx-container",V1,[(e(),a("svg",M1,Q[129]||(Q[129]=[s("",1)]))),Q[130]||(Q[130]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"x"),t("mi",null,"s")])])],-1))]),Q[138]||(Q[138]=T("与")),t("mjx-container",Z1,[(e(),a("svg",v1,Q[131]||(Q[131]=[s("",1)]))),Q[132]||(Q[132]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"y"),t("mi",null,"t")])])],-1))]),Q[139]||(Q[139]=T(" 的对齐概率如下："))]),t("mjx-container",D1,[(e(),a("svg",_1,Q[140]||(Q[140]=[s("",1)]))),Q[141]||(Q[141]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"α"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-auto-op":"false"},"align")]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mfrac",null,[t("mrow",null,[t("mi",null,"s"),t("mi",null,"c"),t("mi",null,"o"),t("mi",null,"r"),t("mi",null,"e"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")")]),t("mrow",null,[t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"i"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"T"),t("mi",null,"x")])])]),t("mi",null,"s"),t("mi",null,"c"),t("mi",null,"o"),t("mi",null,"r"),t("mi",null,"e"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"i")]),t("mo",{stretchy:"false"},")")])]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mi",{mathvariant:"normal"},"实"),t("mi",{mathvariant:"normal"},"际"),t("mi",{mathvariant:"normal"},"上"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-auto-op":"false"},"softmax")])])],-1))]),Q[255]||(Q[255]=t("p",null,"结合上面的解码总体流程，有下面的流程",-1)),t("mjx-container",E1,[(e(),a("svg",C1,Q[142]||(Q[142]=[s("",1)]))),Q[143]||(Q[143]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mi",null,"a"),t("mi",null,"l"),t("mi",null,"l"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")"),t("mo",null,","),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mi",null,"α"),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mi",null,"c"),t("mi",null,"t")]),t("mo",null,"."),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mi",null,"c"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"t")]),t("mo",null,"."),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})])])],-1))]),t("p",null,[Q[146]||(Q[146]=T("简单来说是")),t("mjx-container",A1,[(e(),a("svg",j1,Q[144]||(Q[144]=[s("",1)]))),Q[145]||(Q[145]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mi",null,"α"),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mi",null,"c"),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"t")]),t("mo",{accent:"false",stretchy:"false"},"→"),t("msub",null,[t("mi",null,"y"),t("mi",null,"t")])])],-1))]),Q[147]||(Q[147]=T(" 。"))]),Q[256]||(Q[256]=t("img",{src:"http://plm-images.oss-cn-hongkong.aliyuncs.com/image/paper/02_global_attention.png",style:{display:"block",margin:"auto"},width:"50%"},null,-1)),Q[257]||(Q[257]=t("p",null,[t("strong",null,"score计算")],-1)),t("p",null,[t("mjx-container",S1,[(e(),a("svg",F1,Q[148]||(Q[148]=[s("",1)]))),Q[149]||(Q[149]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"s"),t("mi",null,"c"),t("mi",null,"o"),t("mi",null,"r"),t("mi",null,"e"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[150]||(Q[150]=T(" 是一种基于内容")),Q[151]||(Q[151]=t("code",null,"content-based",-1)),Q[152]||(Q[152]=T("的函数，有3种实现方式"))]),t("mjx-container",R1,[(e(),a("svg",B1,Q[153]||(Q[153]=[s("",1)]))),Q[154]||(Q[154]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"s"),t("mi",null,"c"),t("mi",null,"o"),t("mi",null,"r"),t("mi",null,"e"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"{"),t("mtable",{columnalign:"left left",columnspacing:"1em",rowspacing:".2em"},[t("mtr",null,[t("mtd",null,[t("msubsup",null,[t("mi",null,"h"),t("mi",null,"t"),t("mi",null,"T")]),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")])]),t("mtd",null,[t("mi",null,"d"),t("mi",null,"o"),t("mi",null,"t")])]),t("mtr",null,[t("mtd",null,[t("msubsup",null,[t("mi",null,"h"),t("mi",null,"t"),t("mi",null,"T")]),t("msub",null,[t("mi",null,"W"),t("mi",null,"a")]),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")])]),t("mtd",null,[t("mi",null,"g"),t("mi",null,"e"),t("mi",null,"n"),t("mi",null,"e"),t("mi",null,"r"),t("mi",null,"a"),t("mi",null,"l")])]),t("mtr",null,[t("mtd",null,[t("msubsup",null,[t("mi",null,"v"),t("mi",null,"a"),t("mi",null,"T")]),t("mi",null,"tanh"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"W"),t("mi",null,"a")]),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,";"),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},"]"),t("mo",{stretchy:"false"},")")]),t("mtd",null,[t("mi",null,"c"),t("mi",null,"o"),t("mi",null,"n"),t("mi",null,"c"),t("mi",null,"a"),t("mi",null,"t")])])]),t("mo",{"data-mjx-texclass":"CLOSE",fence:"true",stretchy:"true",symmetric:"true"})])])])],-1))]),Q[258]||(Q[258]=t("p",null,[t("strong",null,"缺点")],-1)),Q[259]||(Q[259]=t("p",null,[T("生成每个目标单词的时候，都"),t("strong",null,"必须注意所有的原单词"),T("， 这样"),t("strong",null,"计算量很大"),T("，"),t("strong",null,"翻译长序列可能很难"),T("，比如段落或者文章。")],-1)),Q[260]||(Q[260]=t("h2",{id:"local-attention",tabindex:"-1"},[T("Local Attention "),t("a",{class:"header-anchor",href:"#local-attention","aria-label":'Permalink to "Local Attention"'},"​")],-1)),t("p",null,[Q[157]||(Q[157]=T("在生成目标单词的时候，Local会选择性地关注一小部分原单词去计算")),t("mjx-container",P1,[(e(),a("svg",I1,Q[155]||(Q[155]=[s("",1)]))),Q[156]||(Q[156]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"α"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mi",null,"c"),t("mi",null,"t")])])],-1))]),Q[158]||(Q[158]=T("，这样就解决了Global的问题。如下图"))]),Q[261]||(Q[261]=t("img",{src:"http://plm-images.oss-cn-hongkong.aliyuncs.com/image/paper/03_local_attention.png",style:{display:"block",margin:"auto"},width:"50%"},null,-1)),Q[262]||(Q[262]=t("p",null,[t("strong",null,"Soft和Hard注意")],-1)),Q[263]||(Q[263]=t("p",null,[t("code",null,"Soft 注意"),T(" ：类似global注意，权值会放在图片的所有patches中。计算复杂。")],-1)),Q[264]||(Q[264]=t("p",null,[t("code",null,"Hard 注意"),T("： 不同时刻，会选择不同的patch。虽然计算少，但是"),t("strong",null,"non-differentiable"),T("，并且需要复杂的技术去训练模型，比如方差减少和强化学习。")],-1)),Q[265]||(Q[265]=t("p",null,[t("strong",null,"Local注意")],-1)),t("p",null,[Q[163]||(Q[163]=T("类似于滑动窗口，计算一个")),Q[164]||(Q[164]=t("strong",null,"对齐位置",-1)),t("mjx-container",O1,[(e(),a("svg",N1,Q[159]||(Q[159]=[s("",1)]))),Q[160]||(Q[160]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mstyle",{mathcolor:"blue"},[t("mrow",{"data-mjx-texclass":"ORD"},[t("msub",null,[t("mi",null,"p"),t("mi",null,"t")])])])])],-1))]),Q[165]||(Q[165]=T("，")),Q[166]||(Q[166]=t("strong",null,"根据经验",-1)),Q[167]||(Q[167]=T("设置")),Q[168]||(Q[168]=t("strong",null,"窗口大小",-1)),t("mjx-container",G1,[(e(),a("svg",z1,Q[161]||(Q[161]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D437",d:"M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[162]||(Q[162]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"D")])],-1))]),Q[169]||(Q[169]=T("，那么需要注意的源单词序列是 ："))]),t("mjx-container",J1,[(e(),a("svg",X1,Q[170]||(Q[170]=[s("",1)]))),Q[171]||(Q[171]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"−"),t("mi",null,"D"),t("mo",null,","),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"+"),t("mi",null,"D"),t("mo",{stretchy:"false"},"]")])],-1))]),t("p",null,[t("mjx-container",q1,[(e(),a("svg",U1,Q[172]||(Q[172]=[s("",1)]))),Q[173]||(Q[173]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"α"),t("mi",null,"t")])])],-1))]),Q[178]||(Q[178]=T(" 的长度就是")),t("mjx-container",W1,[(e(),a("svg",$1,Q[174]||(Q[174]=[s("",1)]))),Q[175]||(Q[175]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"2"),t("mi",null,"D")])],-1))]),Q[179]||(Q[179]=T("，只需要选择这")),t("mjx-container",Y1,[(e(),a("svg",K1,Q[176]||(Q[176]=[s("",1)]))),Q[177]||(Q[177]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"2"),t("mi",null,"D")])],-1))]),Q[180]||(Q[180]=T("个单词进行注意力计算，而不是Global的整个序列。"))]),Q[266]||(Q[266]=t("p",null,[t("strong",null,"对齐位置选择")],-1)),Q[267]||(Q[267]=t("p",null,"对齐位置的选择就很重要，主要有两种办法。",-1)),Q[268]||(Q[268]=t("p",null,"local-m (monotonic) 设置位置， 即以当前单词位置作为对齐位置",-1)),t("mjx-container",t2,[(e(),a("svg",Q2,Q[181]||(Q[181]=[s("",1)]))),Q[182]||(Q[182]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"="),t("mi",null,"t")])],-1))]),Q[269]||(Q[269]=t("p",null,"local-p (predictive) 预测位置",-1)),t("p",null,[t("mjx-container",T2,[(e(),a("svg",a2,Q[183]||(Q[183]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D446",d:"M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[184]||(Q[184]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"S")])],-1))]),Q[185]||(Q[185]=T(" 是输入句子的长度，预测对齐位置如下"))]),t("mjx-container",e2,[(e(),a("svg",s2,Q[186]||(Q[186]=[s("",1)]))),Q[187]||(Q[187]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"="),t("mi",null,"S"),t("mo",null,"⋅"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-auto-op":"false"},"sigmoid")]),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"("),t("msubsup",null,[t("mi",null,"v"),t("mi",null,"p"),t("mi",null,"T")]),t("mi",null,"tanh"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"W"),t("mi",null,"p")]),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",{stretchy:"false"},")"),t("mo",{"data-mjx-texclass":"CLOSE"},")")]),t("mo",null,","),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"∈"),t("mo",{stretchy:"false"},"["),t("mn",null,"0"),t("mo",null,","),t("mi",null,"S"),t("mo",{stretchy:"false"},"]")])],-1))]),Q[270]||(Q[270]=t("p",null,[t("strong",null,"对齐向量计算")],-1)),t("p",null,[t("strong",null,[t("mjx-container",l2,[(e(),a("svg",n2,Q[188]||(Q[188]=[s("",1)]))),Q[189]||(Q[189]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"α"),t("mi",null,"t")])])],-1))]),Q[192]||(Q[192]=T("的长度就是")),t("mjx-container",o2,[(e(),a("svg",r2,Q[190]||(Q[190]=[s("",1)]))),Q[191]||(Q[191]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mn",null,"2"),t("mi",null,"D")])],-1))])]),Q[199]||(Q[199]=T("，对于每一个")),t("mjx-container",d2,[(e(),a("svg",i2,Q[193]||(Q[193]=[s("",1)]))),Q[194]||(Q[194]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"s"),t("mo",null,"∈"),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"−"),t("mi",null,"D"),t("mo",null,","),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,"+"),t("mi",null,"D"),t("mo",{stretchy:"false"},"]")])],-1))]),Q[200]||(Q[200]=T("， 为了更好地对齐，添加一个正态分布")),t("mjx-container",m2,[(e(),a("svg",p2,Q[195]||(Q[195]=[s("",1)]))),Q[196]||(Q[196]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"N"),t("mo",{stretchy:"false"},"("),t("mi",null,"μ"),t("mo",null,","),t("msup",null,[t("mi",null,"σ"),t("mn",null,"2")]),t("mo",{stretchy:"false"},")")])],-1))]),Q[201]||(Q[201]=T("，其中 ")),t("mjx-container",h2,[(e(),a("svg",g2,Q[197]||(Q[197]=[s("",1)]))),Q[198]||(Q[198]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"μ"),t("mo",null,"="),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("mo",null,","),t("mi",null,"σ"),t("mo",null,"="),t("mfrac",null,[t("mi",null,"D"),t("mn",null,"2")])])],-1))]),Q[202]||(Q[202]=T("。"))]),Q[271]||(Q[271]=t("p",null,"计算对齐概率：",-1)),t("mjx-container",u2,[(e(),a("svg",H2,Q[203]||(Q[203]=[s("",1)]))),Q[204]||(Q[204]=t("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[t("msub",null,[t("mi",null,"α"),t("mi",null,"t")]),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",{stretchy:"false"},")"),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-auto-op":"false"},"align")]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")"),t("mi",null,"exp"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"("),t("mo",null,"−"),t("mfrac",null,[t("mrow",null,[t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",null,"−"),t("mi",null,"μ"),t("msup",null,[t("mo",{stretchy:"false"},")"),t("mn",null,"2")])]),t("mrow",null,[t("mn",null,"2"),t("msup",null,[t("mi",null,"σ"),t("mn",null,"2")])])]),t("mo",{"data-mjx-texclass":"CLOSE"},")")]),t("mo",null,"="),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",{"data-mjx-auto-op":"false"},"align")]),t("mo",{stretchy:"false"},"("),t("msub",null,[t("mi",null,"h"),t("mi",null,"t")]),t("mo",null,","),t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"¯")])]),t("mi",null,"s")]),t("mo",{stretchy:"false"},")"),t("mi",null,"exp"),t("mo",{"data-mjx-texclass":"NONE"},"⁡"),t("mrow",{"data-mjx-texclass":"INNER"},[t("mo",{"data-mjx-texclass":"OPEN"},"("),t("mo",null,"−"),t("mfrac",null,[t("mrow",null,[t("mn",null,"2"),t("mo",{stretchy:"false"},"("),t("mi",null,"s"),t("mo",null,"−"),t("msub",null,[t("mi",null,"p"),t("mi",null,"t")]),t("msup",null,[t("mo",{stretchy:"false"},")"),t("mn",null,"2")])]),t("msup",null,[t("mi",null,"D"),t("mn",null,"2")])]),t("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1))]),Q[272]||(Q[272]=t("h2",{id:"input-feeding",tabindex:"-1"},[T("Input-feeding "),t("a",{class:"header-anchor",href:"#input-feeding","aria-label":'Permalink to "Input-feeding"'},"​")],-1)),t("p",null,[Q[207]||(Q[207]=T("前面的Global和Local两种方式中，在每一步的时候，计算每一个attention (实际上是指 ")),t("mjx-container",c2,[(e(),a("svg",w2,Q[205]||(Q[205]=[s("",1)]))),Q[206]||(Q[206]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"t")])])],-1))]),Q[208]||(Q[208]=T(")，都是独立的，这样只是")),Q[209]||(Q[209]=t("strong",null,"次最优的",-1)),Q[210]||(Q[210]=T("。"))]),Q[273]||(Q[273]=t("p",null,[T("在每一步的计算中，"),t("strong",null,"这些attention应该有所关联，当前知道之前的attention才对"),T("。实际是应该有个"),t("code",null,"coverage set"),T("去追踪之前的信息。")],-1)),t("p",null,[Q[213]||(Q[213]=T("我们会把当前的注意")),t("mjx-container",x2,[(e(),a("svg",k2,Q[211]||(Q[211]=[s("",1)]))),Q[212]||(Q[212]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mrow",{"data-mjx-texclass":"ORD"},[t("mover",null,[t("mi",null,"h"),t("mo",{stretchy:"false"},"^")])]),t("mi",null,"t")])])],-1))]),Q[214]||(Q[214]=T(" 作为下一次的输入，并且做一个")),Q[215]||(Q[215]=t("strong",null,"串联",-1)),Q[216]||(Q[216]=T("，来计算新的attention，如下图所示"))]),Q[274]||(Q[274]=s("",11)),t("p",null,[Q[219]||(Q[219]=T("Encoder的输出，所有语义")),t("mjx-container",y2,[(e(),a("svg",L2,Q[217]||(Q[217]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D450",d:"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z",style:{"stroke-width":"3"}})])])],-1)]))),Q[218]||(Q[218]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"c")])],-1))]),Q[220]||(Q[220]=T("，")),Q[221]||(Q[221]=t("code",null,"encoder_outputs",-1)),Q[222]||(Q[222]=T("， ")),Q[223]||(Q[223]=t("code",null,"[is, b, h]",-1)),Q[224]||(Q[224]=T("。 ")),Q[225]||(Q[225]=t("code",null,"is=input_seq_len",-1)),Q[226]||(Q[226]=T("是输入句子的长度"))]),t("p",null,[Q[229]||(Q[229]=T("当前时刻Decoder的")),t("mjx-container",f2,[(e(),a("svg",b2,Q[227]||(Q[227]=[s("",1)]))),Q[228]||(Q[228]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"h"),t("mi",null,"t")])])],-1))]),Q[230]||(Q[230]=T("， ")),Q[231]||(Q[231]=t("code",null,"decoder_rnn_output",-1)),Q[232]||(Q[232]=T("， ")),Q[233]||(Q[233]=t("code",null,"[ts, b, h]",-1)),Q[234]||(Q[234]=T(" 。实际上")),Q[235]||(Q[235]=t("code",null,"ts=1",-1)),Q[236]||(Q[236]=T("， 因为每次解码一个单词"))]),Q[275]||(Q[275]=s("",8)),t("p",null,[Q[239]||(Q[239]=T("新的语义也就是，对于翻译单词")),t("mjx-container",V2,[(e(),a("svg",M2,Q[237]||(Q[237]=[s("",1)]))),Q[238]||(Q[238]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"w"),t("mi",null,"t")])])],-1))]),Q[240]||(Q[240]=T("所需要的")),Q[241]||(Q[241]=t("strong",null,"带注意力的语义",-1)),Q[242]||(Q[242]=T("。"))]),Q[276]||(Q[276]=s("",17))])}const S2=l(n,[["render",Z2]]);export{j2 as __pageData,S2 as default};
